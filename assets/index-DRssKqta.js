import{i as e}from"./rolldown-runtime-mxg6gZK_.js";import{$ as t,A as n,B as r,C as i,D as a,E as o,F as s,G as c,H as l,I as u,J as d,K as f,L as p,M as m,N as h,O as g,P as _,Q as v,R as y,S as b,T as x,U as S,V as ee,W as C,X as te,Y as ne,Z as re,_ as ie,_t as ae,a as oe,at as w,b as se,c as ce,ct as le,d as ue,dt as de,et as fe,f as pe,ft as T,g as me,h as he,ht as ge,i as _e,it as ve,j as E,k as ye,l as be,lt as D,m as xe,n as Se,nt as Ce,o as we,ot as Te,p as Ee,pt as De,q as Oe,r as ke,rt as Ae,s as je,st as O,t as Me,tt as k,u as Ne,ut as A,v as Pe,w as Fe,x as Ie,y as Le,z as j}from"./antd-C6Z7u7f9.js";import{a as Re,c as ze,i as Be,l as Ve,n as He,o as Ue,r as We,s as Ge,t as Ke}from"./react-vendor-Dk_eEF-x.js";import{n as qe,t as Je}from"./unit-data-Ba59kNpK.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var Ye=ge(),M=e(ae(),1),N=Ue(),{Title:Xe}=b,Ze=({categories:e,selectedCategoryId:r,onSelectCategory:i})=>(0,N.jsxs)(`div`,{children:[(0,N.jsx)(Xe,{level:3,className:`unit-type-list__title`,children:`单位类型`}),(0,N.jsx)(E,{gutter:[16,16],children:e.map(e=>(0,N.jsx)(t,{xs:24,sm:24,md:24,children:(0,N.jsxs)(k,{hoverable:!0,onClick:()=>i(e.id),className:`unit-type-list__card ${r===e.id?`unit-type-list__card--selected`:``}`,styles:{body:{padding:`20px`}},children:[(0,N.jsxs)(`div`,{className:`unit-type-list__card-header`,children:[(0,N.jsx)(Xe,{level:4,className:`unit-type-list__card-title`,children:e.name}),e.description&&(0,N.jsx)(b.Text,{type:`secondary`,className:`unit-type-list__card-description`,children:e.description})]}),(0,N.jsxs)(E,{gutter:16,children:[(0,N.jsx)(t,{span:12,children:(0,N.jsx)(n,{title:`分组`,value:e.groups.length,valueStyle:{fontSize:`20px`}})}),(0,N.jsx)(t,{span:12,children:(0,N.jsx)(n,{title:`单位`,value:e.groups.reduce((e,t)=>e+t.units.length,0),valueStyle:{fontSize:`20px`}})})]})]})},e.id))})]}),{Title:Qe,Text:$e}=b,et=({selectedCategory:e,selectedFromUnit:t,selectedToUnit:n,onSelectFromUnit:r,onSelectToUnit:i})=>{let[o,s]=(0,M.useState)([]);return(0,M.useEffect)(()=>{e&&e.groups.length>0&&s([e.groups[0].id])},[e]),e?(0,N.jsxs)(`div`,{children:[(0,N.jsx)(Qe,{level:3,className:`unit-list__title`,children:`选择单位`}),(0,N.jsx)(de,{accordion:!0,activeKey:o,onChange:e=>s(e),items:e.groups.map(e=>({key:e.id,label:(0,N.jsxs)(f,{children:[(0,N.jsx)($e,{strong:!0,children:e.name}),e.description&&(0,N.jsxs)($e,{type:`secondary`,className:`unit-list__collapse-label-description`,children:[`- `,e.description]})]}),children:(0,N.jsx)(f,{direction:`vertical`,size:16,className:`unit-list__space`,children:e.units.map(e=>(0,N.jsx)(k,{className:`unit-list__card ${t?.id===e.id?`unit-list__card--from-selected`:``} ${n?.id===e.id?`unit-list__card--to-selected`:``}`,styles:{body:{padding:`16px`}},children:(0,N.jsxs)(f,{orientation:`vertical`,size:12,className:`unit-list__space`,children:[(0,N.jsxs)(`div`,{className:`unit-list__card-header`,children:[(0,N.jsxs)(f,{children:[(0,N.jsx)(Qe,{level:5,className:`unit-list__card-title`,children:e.name}),(0,N.jsx)(a,{color:e.type===`modern`?`blue`:`orange`,children:e.type===`modern`?`现代`:`古代`})]}),(0,N.jsx)($e,{code:!0,className:`unit-list__card-symbol`,children:e.symbol})]}),e.description&&(0,N.jsx)($e,{type:`secondary`,className:`unit-list__card-description`,children:e.description}),(0,N.jsxs)(f,{size:8,children:[(0,N.jsx)(w,{type:t?.id===e.id?`primary`:`default`,onClick:()=>r(e),disabled:t?.id===e.id,className:t?.id===e.id?`unit-list__button--from-selected`:``,children:t?.id===e.id?`已选作源单位`:`设为源单位`}),(0,N.jsx)(w,{type:n?.id===e.id?`primary`:`default`,onClick:()=>i(e),disabled:n?.id===e.id,className:n?.id===e.id?`unit-list__button--to-selected`:``,children:n?.id===e.id?`已选作目标单位`:`设为目标单位`})]})]})},e.id))})}))})]}):(0,N.jsx)(`div`,{className:`unit-list__empty`,children:(0,N.jsx)(A,{description:`请选择一个单位类型`})})},tt=20,nt=1,rt=1e6,it=1e6,at=-7,ot=21,st=!1,ct=`[big.js] `,lt=ct+`Invalid `,ut=lt+`decimal places`,dt=lt+`rounding mode`,ft=ct+`Division by zero`,P={},F=void 0,pt=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function mt(){function e(t){var n=this;if(!(n instanceof e))return t===F&&arguments.length===0?mt():new e(t);if(t instanceof e)n.s=t.s,n.e=t.e,n.c=t.c.slice();else{if(typeof t!=`string`){if(e.strict===!0&&typeof t!=`bigint`)throw TypeError(lt+`value`);t=t===0&&1/t<0?`-0`:String(t)}ht(n,t)}n.constructor=e}return e.prototype=P,e.DP=tt,e.RM=nt,e.NE=at,e.PE=ot,e.strict=st,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}function ht(e,t){var n,r,i;if(!pt.test(t))throw Error(lt+`number`);for(e.s=t.charAt(0)==`-`?(t=t.slice(1),-1):1,(n=t.indexOf(`.`))>-1&&(t=t.replace(`.`,``)),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),i=t.length,r=0;r<i&&t.charAt(r)==`0`;)++r;if(r==i)e.c=[e.e=0];else{for(;i>0&&t.charAt(--i)==`0`;);for(e.e=n-r-1,e.c=[],n=0;r<=i;)e.c[n++]=+t.charAt(r++)}return e}function gt(e,t,n,r){var i=e.c;if(n===F&&(n=e.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(dt);if(t<1)r=n===3&&(r||!!i[0])||t===0&&(n===1&&i[0]>=5||n===2&&(i[0]>5||i[0]===5&&(r||i[1]!==F))),i.length=1,r?(e.e=e.e-t+1,i[0]=1):i[0]=e.e=0;else if(t<i.length){if(r=n===1&&i[t]>=5||n===2&&(i[t]>5||i[t]===5&&(r||i[t+1]!==F||i[t-1]&1))||n===3&&(r||!!i[0]),i.length=t,r){for(;++i[--t]>9;)if(i[t]=0,t===0){++e.e,i.unshift(1);break}}for(t=i.length;!i[--t];)i.pop()}return e}function _t(e,t,n){var r=e.e,i=e.c.join(``),a=i.length;if(t)i=i.charAt(0)+(a>1?`.`+i.slice(1):``)+(r<0?`e`:`e+`)+r;else if(r<0){for(;++r;)i=`0`+i;i=`0.`+i}else if(r>0)if(++r>a)for(r-=a;r--;)i+=`0`;else r<a&&(i=i.slice(0,r)+`.`+i.slice(r));else a>1&&(i=i.charAt(0)+`.`+i.slice(1));return e.s<0&&n?`-`+i:i}P.abs=function(){var e=new this.constructor(this);return e.s=1,e},P.cmp=function(e){var t,n=this,r=n.c,i=(e=new n.constructor(e)).c,a=n.s,o=e.s,s=n.e,c=e.e;if(!r[0]||!i[0])return r[0]?a:i[0]?-o:0;if(a!=o)return a;if(t=a<0,s!=c)return s>c^t?1:-1;for(o=(s=r.length)<(c=i.length)?s:c,a=-1;++a<o;)if(r[a]!=i[a])return r[a]>i[a]^t?1:-1;return s==c?0:s>c^t?1:-1},P.div=function(e){var t=this,n=t.constructor,r=t.c,i=(e=new n(e)).c,a=t.s==e.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>rt)throw Error(ut);if(!i[0])throw Error(ft);if(!r[0])return e.s=a,e.c=[e.e=0],e;var s,c,l,u,d,f=i.slice(),p=s=i.length,m=r.length,h=r.slice(0,s),g=h.length,_=e,v=_.c=[],y=0,b=o+(_.e=t.e-e.e)+1;for(_.s=a,a=b<0?0:b,f.unshift(0);g++<s;)h.push(0);do{for(l=0;l<10;l++){if(s!=(g=h.length))u=s>g?1:-1;else for(d=-1,u=0;++d<s;)if(i[d]!=h[d]){u=i[d]>h[d]?1:-1;break}if(u<0){for(c=g==s?i:f;g;){if(h[--g]<c[g]){for(d=g;d&&!h[--d];)h[d]=9;--h[d],h[g]+=10}h[g]-=c[g]}for(;!h[0];)h.shift()}else break}v[y++]=u?l:++l,h[0]&&u?h[g]=r[p]||0:h=[r[p]]}while((p++<m||h[0]!==F)&&a--);return!v[0]&&y!=1&&(v.shift(),_.e--,b--),y>b&&gt(_,b,n.RM,h[0]!==F),_},P.eq=function(e){return this.cmp(e)===0},P.gt=function(e){return this.cmp(e)>0},P.gte=function(e){return this.cmp(e)>-1},P.lt=function(e){return this.cmp(e)<0},P.lte=function(e){return this.cmp(e)<1},P.minus=P.sub=function(e){var t,n,r,i,a=this,o=a.constructor,s=a.s,c=(e=new o(e)).s;if(s!=c)return e.s=-c,a.plus(e);var l=a.c.slice(),u=a.e,d=e.c,f=e.e;if(!l[0]||!d[0])return d[0]?e.s=-c:l[0]?e=new o(a):e.s=1,e;if(s=u-f){for((i=s<0)?(s=-s,r=l):(f=u,r=d),r.reverse(),c=s;c--;)r.push(0);r.reverse()}else for(n=((i=l.length<d.length)?l:d).length,s=c=0;c<n;c++)if(l[c]!=d[c]){i=l[c]<d[c];break}if(i&&(r=l,l=d,d=r,e.s=-e.s),(c=(n=d.length)-(t=l.length))>0)for(;c--;)l[t++]=0;for(c=t;n>s;){if(l[--n]<d[n]){for(t=n;t&&!l[--t];)l[t]=9;--l[t],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--f;return l[0]||(e.s=1,l=[f=0]),e.c=l,e.e=f,e},P.mod=function(e){var t,n=this,r=n.constructor,i=n.s,a=(e=new r(e)).s;if(!e.c[0])throw Error(ft);return n.s=e.s=1,t=e.cmp(n)==1,n.s=i,e.s=a,t?new r(n):(i=r.DP,a=r.RM,r.DP=r.RM=0,n=n.div(e),r.DP=i,r.RM=a,this.minus(n.times(e)))},P.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},P.plus=P.add=function(e){var t,n,r,i=this,a=i.constructor;if(e=new a(e),i.s!=e.s)return e.s=-e.s,i.minus(e);var o=i.e,s=i.c,c=e.e,l=e.c;if(!s[0]||!l[0])return l[0]||(s[0]?e=new a(i):e.s=i.s),e;if(s=s.slice(),t=o-c){for(t>0?(c=o,r=l):(t=-t,r=s),r.reverse();t--;)r.push(0);r.reverse()}for(s.length-l.length<0&&(r=l,l=s,s=r),t=l.length,n=0;t;s[t]%=10)n=(s[--t]=s[t]+l[t]+n)/10|0;for(n&&(s.unshift(n),++c),t=s.length;s[--t]===0;)s.pop();return e.c=s,e.e=c,e},P.pow=function(e){var t=this,n=new t.constructor(`1`),r=n,i=e<0;if(e!==~~e||e<-it||e>it)throw Error(lt+`exponent`);for(i&&(e=-e);e&1&&(r=r.times(t)),e>>=1,e;)t=t.times(t);return i?n.div(r):r},P.prec=function(e,t){if(e!==~~e||e<1||e>rt)throw Error(lt+`precision`);return gt(new this.constructor(this),e,t)},P.round=function(e,t){if(e===F)e=0;else if(e!==~~e||e<-rt||e>rt)throw Error(ut);return gt(new this.constructor(this),e+this.e+1,t)},P.sqrt=function(){var e,t,n,r=this,i=r.constructor,a=r.s,o=r.e,s=new i(`0.5`);if(!r.c[0])return new i(r);if(a<0)throw Error(ct+`No square root`);a=Math.sqrt(+_t(r,!0,!0)),a===0||a===1/0?(t=r.c.join(``),t.length+o&1||(t+=`0`),a=Math.sqrt(t),o=((o+1)/2|0)-(o<0||o&1),e=new i((a==1/0?`5e`:(a=a.toExponential()).slice(0,a.indexOf(`e`)+1))+o)):e=new i(a+``),o=e.e+(i.DP+=4);do n=e,e=s.times(n.plus(r.div(n)));while(n.c.slice(0,o).join(``)!==e.c.slice(0,o).join(``));return gt(e,(i.DP-=4)+e.e+1,i.RM)},P.times=P.mul=function(e){var t,n=this,r=n.constructor,i=n.c,a=(e=new r(e)).c,o=i.length,s=a.length,c=n.e,l=e.e;if(e.s=n.s==e.s?1:-1,!i[0]||!a[0])return e.c=[e.e=0],e;for(e.e=c+l,o<s&&(t=i,i=a,a=t,l=o,o=s,s=l),t=Array(l=o+s);l--;)t[l]=0;for(c=s;c--;){for(s=0,l=o+c;l>c;)s=t[l]+a[c]*i[l-c-1]+s,t[l--]=s%10,s=s/10|0;t[l]=s}for(s?++e.e:t.shift(),c=t.length;!t[--c];)t.pop();return e.c=t,e},P.toExponential=function(e,t){var n=this,r=n.c[0];if(e!==F){if(e!==~~e||e<0||e>rt)throw Error(ut);for(n=gt(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return _t(n,!0,!!r)},P.toFixed=function(e,t){var n=this,r=n.c[0];if(e!==F){if(e!==~~e||e<0||e>rt)throw Error(ut);for(n=gt(new n.constructor(n),e+n.e+1,t),e=e+n.e+1;n.c.length<e;)n.c.push(0)}return _t(n,!1,!!r)},P.toJSON=P.toString=function(){var e=this,t=e.constructor;return _t(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},typeof Symbol<`u`&&(P[Symbol.for(`nodejs.util.inspect.custom`)]=P.toJSON),P.toNumber=function(){var e=+_t(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(e.toString()))throw Error(ct+`Imprecise conversion`);return e},P.toPrecision=function(e,t){var n=this,r=n.constructor,i=n.c[0];if(e!==F){if(e!==~~e||e<1||e>rt)throw Error(lt+`precision`);for(n=gt(new r(n),e,t);n.c.length<e;)n.c.push(0)}return _t(n,e<=n.e||n.e<=r.NE||n.e>=r.PE,!!i)},P.valueOf=function(){var e=this,t=e.constructor;if(t.strict===!0)throw Error(ct+`valueOf disallowed`);return _t(e,e.e<=t.NE||e.e>=t.PE,!0)};var vt=mt();const yt=(e,t,n)=>{let r=Je(t),i=Je(n);if(!r||!i)return null;let{unit:a}=r,{unit:o}=i;if(r.category.id!==i.category.id)return null;let s,c,l;switch(r.category.id){case`temperature`:return bt(e,a,o);case`fuel`:return xt(e,a,o);default:let t=new vt(e),n=(a.conversionFactor,new vt(a.conversionFactor)),i=(o.conversionFactor,new vt(o.conversionFactor));s=t.times(n).div(i).toNumber();let u=typeof a.conversionFactor==`string`?a.conversionFactor:a.conversionFactor.toString(),d=typeof o.conversionFactor==`string`?o.conversionFactor:o.conversionFactor.toString();c=`${e} ${a.symbol} = ${e} × ${u} ÷ ${d} ${o.symbol}`,l=`1 ${a.symbol} = ${u} ${r.category.name===`data`?`bit`:r.category.name===`length`?`m`:r.category.name===`weight`?`kg`:r.category.name===`area`?`m²`:r.category.name===`volume`?`m³`:r.category.name===`time`?`s`:r.category.name===`energy`?`J`:`基础单位`}`;break}return{fromValue:e,fromUnit:a,toUnit:o,result:s,formula:c,explanation:l}};var bt=(e,t,n)=>{let r,i,a,o;switch(t.id){case`celsius`:r=e;break;case`fahrenheit`:r=(e-32)*5/9;break;case`kelvin`:r=e-273.15;break;case`rankine`:r=(e-491.67)*5/9;break;default:r=e}switch(n.id){case`celsius`:i=r;break;case`fahrenheit`:i=r*9/5+32;break;case`kelvin`:i=r+273.15;break;case`rankine`:i=(r+273.15)*9/5;break;default:i=r}return t.id===`celsius`&&n.id===`fahrenheit`?(a=`${e} °C = (${e} × 9/5) + 32 °F`,o=`摄氏度转华氏度：°F = °C × 9/5 + 32`):t.id===`fahrenheit`&&n.id===`celsius`?(a=`${e} °F = (${e} - 32) × 5/9 °C`,o=`华氏度转摄氏度：°C = (°F - 32) × 5/9`):t.id===`celsius`&&n.id===`kelvin`?(a=`${e} °C = ${e} + 273.15 K`,o=`摄氏度转开尔文：K = °C + 273.15`):t.id===`kelvin`&&n.id===`celsius`?(a=`${e} K = ${e} - 273.15 °C`,o=`开尔文转摄氏度：°C = K - 273.15`):t.id===`fahrenheit`&&n.id===`kelvin`?(a=`${e} °F = ((${e} - 32) × 5/9) + 273.15 K`,o=`华氏度转开尔文：K = (°F - 32) × 5/9 + 273.15`):t.id===`kelvin`&&n.id===`fahrenheit`?(a=`${e} K = ((${e} - 273.15) × 9/5) + 32 °F`,o=`开尔文转华氏度：°F = (K - 273.15) × 9/5 + 32`):t.id===`celsius`&&n.id===`rankine`?(a=`${e} °C = (${e} + 273.15) × 9/5 °R`,o=`摄氏度转兰氏度：°R = (°C + 273.15) × 9/5`):t.id===`rankine`&&n.id===`celsius`?(a=`${e} °R = (${e} - 491.67) × 5/9 °C`,o=`兰氏度转摄氏度：°C = (°R - 491.67) × 5/9`):t.id===`fahrenheit`&&n.id===`rankine`?(a=`${e} °F = ${e} + 459.67 °R`,o=`华氏度转兰氏度：°R = °F + 459.67`):t.id===`rankine`&&n.id===`fahrenheit`?(a=`${e} °R = ${e} - 459.67 °F`,o=`兰氏度转华氏度：°F = °R - 459.67`):t.id===`kelvin`&&n.id===`rankine`?(a=`${e} K = ${e} × 9/5 °R`,o=`开尔文转兰氏度：°R = K × 9/5`):t.id===`rankine`&&n.id===`kelvin`?(a=`${e} °R = ${e} × 5/9 K`,o=`兰氏度转开尔文：K = °R × 5/9`):(a=`${e} ${t.symbol} = ${i} ${n.symbol}`,o=`相同温度单位转换`),{fromValue:e,fromUnit:t,toUnit:n,result:i,formula:a,explanation:o}},xt=(e,t,n)=>{let r,i,a;return t.id===`l-100km`&&n.id===`km-l`?(r=100/e,i=`${e} L/100km = 100 ÷ ${e} km/L`,a=`升每百公里转公里每升：km/L = 100 ÷ (L/100km)`):t.id===`km-l`&&n.id===`l-100km`?(r=100/e,i=`${e} km/L = 100 ÷ ${e} L/100km`,a=`公里每升转升每百公里：L/100km = 100 ÷ (km/L)`):t.id===`l-100km`&&n.id===`mpg-us`?(r=235.215/e,i=`${e} L/100km = 235.215 ÷ ${e} mpg`,a=`升每百公里转英里每加仑(美制)：mpg = 235.215 ÷ (L/100km)`):t.id===`mpg-us`&&n.id===`l-100km`?(r=235.215/e,i=`${e} mpg = 235.215 ÷ ${e} L/100km`,a=`英里每加仑(美制)转升每百公里：L/100km = 235.215 ÷ mpg`):t.id===`l-100km`&&n.id===`mpg-uk`?(r=282.481/e,i=`${e} L/100km = 282.481 ÷ ${e} mpg`,a=`升每百公里转英里每加仑(英制)：mpg = 282.481 ÷ (L/100km)`):t.id===`mpg-uk`&&n.id===`l-100km`?(r=282.481/e,i=`${e} mpg = 282.481 ÷ ${e} L/100km`,a=`英里每加仑(英制)转升每百公里：L/100km = 282.481 ÷ mpg`):t.id===`km-l`&&n.id===`mpg-us`?(r=e*2.35215,i=`${e} km/L = ${e} × 2.35215 mpg`,a=`公里每升转英里每加仑(美制)：mpg = km/L × 2.35215`):t.id===`mpg-us`&&n.id===`km-l`?(r=e/2.35215,i=`${e} mpg = ${e} ÷ 2.35215 km/L`,a=`英里每加仑(美制)转公里每升：km/L = mpg ÷ 2.35215`):t.id===`km-l`&&n.id===`mpg-uk`?(r=e*2.82481,i=`${e} km/L = ${e} × 2.82481 mpg`,a=`公里每升转英里每加仑(英制)：mpg = km/L × 2.82481`):t.id===`mpg-uk`&&n.id===`km-l`?(r=e/2.82481,i=`${e} mpg = ${e} ÷ 2.82481 km/L`,a=`英里每加仑(英制)转公里每升：km/L = mpg ÷ 2.82481`):t.id===`mpg-us`&&n.id===`mpg-uk`?(r=e*1.20095,i=`${e} mpg(美制) = ${e} × 1.20095 mpg(英制)`,a=`英里每加仑(美制)转英里每加仑(英制)：mpg(英制) = mpg(美制) × 1.20095`):t.id===`mpg-uk`&&n.id===`mpg-us`?(r=e/1.20095,i=`${e} mpg(英制) = ${e} ÷ 1.20095 mpg(美制)`,a=`英里每加仑(英制)转英里每加仑(美制)：mpg(美制) = mpg(英制) ÷ 1.20095`):(r=e,i=`${e} ${t.symbol} = ${r} ${n.symbol}`,a=`相同油耗单位转换`),{fromValue:e,fromUnit:t,toUnit:n,result:r,formula:i,explanation:a}};const St=(e,t=8)=>{let n=Number(e);if(isNaN(n))return`NaN`;if(!isFinite(n))return n.toString();let r=Object.is(n,-0)?0:n,i=Math.max(0,Math.min(10,t)),a=r.toFixed(i);return a.includes(`.`)&&(a=a.replace(/\.?0+$/,``)),a};var{Title:Ct,Text:wt,Paragraph:Tt}=b,Et=({selectedFromUnit:e,selectedToUnit:n,onSwapUnits:r})=>{let[i,a]=(0,M.useState)(`1`),[o,s]=(0,M.useState)(null),[c,l]=(0,M.useState)(!0),[u,d]=(0,M.useState)(!1),p=e=>{if(e===``)return!0;let t=parseFloat(e);return!isNaN(t)&&isFinite(t)};return(0,M.useEffect)(()=>{if(e&&n&&i!==``){let t=parseFloat(i);if(!isNaN(t)){let r=yt(t,e.id,n.id);r&&s(r)}}else s(null)},[e,n,i]),(0,N.jsxs)(k,{children:[(0,N.jsx)(Ct,{level:3,className:`conversion-result-display__title`,children:`单位换算`}),(0,N.jsxs)(f,{orientation:`vertical`,size:24,className:`conversion-result-display__space`,children:[(0,N.jsxs)(E,{gutter:16,align:`middle`,children:[(0,N.jsx)(t,{xs:24,md:10,children:e&&(0,N.jsx)(k,{size:`small`,className:`conversion-result-display__unit-card conversion-result-display__unit-card--from ${u?`conversion-result-display__unit-card--swap-right`:``}`,children:(0,N.jsxs)(f,{direction:`vertical`,size:8,className:`conversion-result-display__unit-card-space`,children:[(0,N.jsxs)(`div`,{children:[(0,N.jsx)(wt,{strong:!0,className:`conversion-result-display__unit-name`,children:e.name}),(0,N.jsx)(wt,{code:!0,className:`conversion-result-display__unit-symbol`,children:e.symbol})]}),e.description&&(0,N.jsx)(wt,{type:`secondary`,className:`conversion-result-display__unit-description`,children:e.description}),(0,N.jsx)(j,{type:`number`,value:i,onChange:e=>{let t=e.target.value;a(t),l(p(t))},placeholder:`输入数值`,min:`0`,step:`any`,status:c?void 0:`error`,size:`large`,className:`conversion-result-display__input`})]})})}),(0,N.jsx)(t,{xs:24,md:4,className:`conversion-result-display__swap-button-container`,children:e&&n&&(0,N.jsx)(w,{icon:(0,N.jsx)(S,{}),onClick:()=>{d(!0),a(o?.result.toString()||`1`),r(),setTimeout(()=>{d(!1)},300)},disabled:!o,size:`large`,className:`conversion-result-display__swap-button ${u?`conversion-result-display__swap-button--animating`:``}`,children:`交换`})}),(0,N.jsx)(t,{xs:24,md:10,children:n&&(0,N.jsx)(k,{size:`small`,className:`conversion-result-display__unit-card conversion-result-display__unit-card--to ${u?`conversion-result-display__unit-card--swap-left`:``}`,children:(0,N.jsxs)(f,{direction:`vertical`,size:8,className:`conversion-result-display__unit-card-space`,children:[(0,N.jsxs)(`div`,{children:[(0,N.jsx)(wt,{strong:!0,className:`conversion-result-display__unit-name`,children:n.name}),(0,N.jsx)(wt,{code:!0,className:`conversion-result-display__unit-symbol`,children:n.symbol})]}),n.description&&(0,N.jsx)(wt,{type:`secondary`,className:`conversion-result-display__unit-description`,children:n.description}),o&&(0,N.jsx)(`div`,{className:`conversion-result-display__result-value`,children:(0,N.jsx)(wt,{className:`conversion-result-display__result-text conversion-result-display__result-text--highlight`,children:St(o.result)})}),!o&&(0,N.jsx)(`div`,{className:`conversion-result-display__result-placeholder`,children:(0,N.jsx)(wt,{type:`secondary`,children:`-`})})]})})})]}),o&&(0,N.jsx)(k,{className:`conversion-result-display__result-card`,children:(0,N.jsxs)(f,{orientation:`vertical`,size:16,className:`conversion-result-display__space`,children:[(0,N.jsxs)(`div`,{children:[(0,N.jsx)(Ct,{level:5,className:`conversion-result-display__formula-title`,children:`换算公式:`}),(0,N.jsx)(Tt,{code:!0,className:`conversion-result-display__formula`,children:o.formula})]}),(0,N.jsxs)(`div`,{children:[(0,N.jsx)(Ct,{level:5,className:`conversion-result-display__explanation-title`,children:`说明:`}),(0,N.jsx)(Tt,{className:`conversion-result-display__explanation`,children:o.explanation})]})]})}),!e||!n&&(0,N.jsx)(T,{message:`请选择要转换的单位`,type:`info`,showIcon:!0}),c===!1&&(0,N.jsx)(T,{message:`请输入有效的数值`,type:`error`,showIcon:!0})]})]})},{Text:Dt}=b,Ot=({onSearchResultClick:e})=>{let[t,n]=(0,M.useState)(``),[r,i]=(0,M.useState)(!1),o=(0,M.useMemo)(()=>{if(!t.trim())return[];let e=t.toLowerCase().trim(),n=[];return qe.forEach(t=>{t.groups.forEach(r=>{r.units.forEach(i=>{let a=i.name.toLowerCase().includes(e),o=i.symbol.toLowerCase().includes(e),s=i.description?i.description.toLowerCase().includes(e):!1;(a||o||s)&&n.push({unit:i,categoryId:t.id,categoryName:t.name,groupId:r.id,groupName:r.name})})})}),n},[t]),s=e=>{n(e.target.value),i(!0)},c=t=>{e(t.categoryId,t.unit),i(!1),n(``)};return(0,N.jsxs)(`div`,{className:`global-search`,children:[(0,N.jsx)(j,{placeholder:`全局搜索单位`,prefix:(0,N.jsx)(le,{}),value:t,onChange:s,onFocus:()=>{t.trim()&&i(!0)},onBlur:()=>{setTimeout(()=>{i(!1)},200)},allowClear:!0,size:`large`,className:`global-search__input`}),r&&t.trim()&&(0,N.jsx)(k,{className:`global-search__results`,bordered:!1,children:o.length===0?(0,N.jsx)(A,{description:`未找到与"${t}"匹配的单位`,image:A.PRESENTED_IMAGE_SIMPLE}):(0,N.jsx)(u,{dataSource:o,renderItem:e=>(0,N.jsx)(u.Item,{className:`global-search__result-item`,onClick:()=>c(e),children:(0,N.jsxs)(`div`,{className:`global-search__result-content`,children:[(0,N.jsxs)(`div`,{className:`global-search__result-header`,children:[(0,N.jsx)(Dt,{strong:!0,className:`global-search__result-name`,children:e.unit.name}),(0,N.jsx)(Dt,{code:!0,className:`global-search__result-symbol`,children:e.unit.symbol}),(0,N.jsx)(a,{color:e.unit.type===`modern`?`blue`:`orange`,className:`global-search__result-tag`,children:e.unit.type===`modern`?`现代`:`古代`})]}),(0,N.jsxs)(`div`,{className:`global-search__result-meta`,children:[(0,N.jsx)(Dt,{type:`secondary`,className:`global-search__result-category`,children:e.categoryName}),(0,N.jsx)(Dt,{type:`secondary`,className:`global-search__result-group`,children:e.groupName})]}),e.unit.description&&(0,N.jsx)(Dt,{type:`secondary`,className:`global-search__result-description`,children:e.unit.description})]})})})})]})},kt=()=>(0,N.jsx)(ze,{to:`/`,className:`back-button__link`,children:(0,N.jsx)(w,{type:`default`,icon:(0,N.jsx)(se,{}),size:`large`,children:`返回列表`})}),{Header:At}=y,{Title:jt}=b,Mt=({title:e,extra:t})=>(0,N.jsxs)(At,{className:`module-header`,children:[(0,N.jsx)(kt,{}),(0,N.jsx)(jt,{level:3,className:`module-header__title`,children:e}),t&&(0,N.jsx)(`div`,{className:`module-header__extra`,children:t})]}),{Content:Nt,Sider:Pt}=y,Ft=()=>{let[e,t]=(0,M.useState)(null),[n,r]=(0,M.useState)(null),[i,a]=(0,M.useState)(null),o=qe.find(t=>t.id===e)||null;return(0,M.useEffect)(()=>{if(qe.length>0&&!e){let e=qe[0];t(e.id);let n=e.groups.flatMap(e=>e.units);n.length>=2&&(r(n[0]),a(n[1]))}},[e]),(0,N.jsxs)(y,{className:`unit-converter`,children:[(0,N.jsx)(Mt,{title:`单位换算大全`,extra:(0,N.jsx)(Ot,{onSearchResultClick:(e,n)=>{t(e);let i=qe.find(t=>t.id===e);if(i){let e=i.groups.flatMap(e=>e.units);e.length>=2?(r(n),a(e.find(e=>e.id!==n.id)||null)):(r(n),a(null))}}})}),(0,N.jsxs)(y,{children:[(0,N.jsx)(Pt,{width:400,className:`unit-converter__sider`,children:(0,N.jsx)(Ze,{categories:qe,selectedCategoryId:e,onSelectCategory:e=>{t(e);let n=qe.find(t=>t.id===e);if(n){let e=n.groups.flatMap(e=>e.units);e.length>=2?(r(e[0]),a(e[1])):(r(null),a(null))}}})}),(0,N.jsx)(Pt,{width:400,className:`unit-converter__unit-list`,children:(0,N.jsx)(et,{selectedCategory:o,selectedFromUnit:n,selectedToUnit:i,onSelectFromUnit:e=>{if(r(e),!i||i.id===e.id){let t=(o?.groups.flatMap(e=>e.units)||[]).find(t=>t.id!==e.id);t&&a(t)}},onSelectToUnit:e=>{a(e)}})}),(0,N.jsx)(Nt,{className:`unit-converter__content`,children:(0,N.jsx)(`div`,{className:`unit-converter__result-container`,children:(0,N.jsx)(Et,{selectedFromUnit:n,selectedToUnit:i,onSwapUnits:()=>{if(n&&i){let e=n;r(i),a(e)}}})})})]})]})},It=e(ve(),1),Lt=class{constructor(e,t){this.db=null,this.dbName=e,this.dbVersion=t}async init(){if(!this.db)return new Promise((e,t)=>{let n=indexedDB.open(this.dbName,this.dbVersion);n.onerror=()=>{t(Error(`Failed to open IndexedDB: ${this.dbName}`))},n.onsuccess=()=>{this.db=n.result,e()},n.onupgradeneeded=e=>{let t=e.target.result;this.onUpgrade(t)}})}onUpgrade(e){}async ensureDB(){return this.db||await this.init(),this.db}async addRecord(e,t){let n=await this.ensureDB();return new Promise((r,i)=>{let a=n.transaction([e],`readwrite`).objectStore(e).add(t);a.onsuccess=()=>r(String(a.result)),a.onerror=()=>i(Error(`Failed to add record to ${e}`))})}async updateRecord(e,t){let n=await this.ensureDB();return new Promise((r,i)=>{let a=n.transaction([e],`readwrite`).objectStore(e).put(t);a.onsuccess=()=>r(),a.onerror=()=>i(Error(`Failed to update record in ${e}`))})}async deleteRecord(e,t){let n=await this.ensureDB();return new Promise((r,i)=>{let a=n.transaction([e],`readwrite`).objectStore(e).delete(t);a.onsuccess=()=>r(),a.onerror=()=>i(Error(`Failed to delete record from ${e}`))})}async getRecord(e,t){let n=await this.ensureDB();return new Promise((r,i)=>{let a=n.transaction([e],`readonly`).objectStore(e).get(t);a.onsuccess=()=>r(a.result),a.onerror=()=>i(Error(`Failed to get record from ${e}`))})}async getAllRecords(e){let t=await this.ensureDB();return new Promise((n,r)=>{let i=t.transaction([e],`readonly`).objectStore(e).getAll();i.onsuccess=()=>n(i.result),i.onerror=()=>r(Error(`Failed to get all records from ${e}`))})}async getRecordsByIndex(e,t,n){let r=await this.ensureDB();return new Promise((i,a)=>{let o=r.transaction([e],`readonly`).objectStore(e).index(t).getAll(n);o.onsuccess=()=>i(o.result),o.onerror=()=>a(Error(`Failed to get records by index ${t}`))})}async clearStore(e){let t=await this.ensureDB();return new Promise((n,r)=>{let i=t.transaction([e],`readwrite`).objectStore(e).clear();i.onsuccess=()=>n(),i.onerror=()=>r(Error(`Failed to clear store ${e}`))})}async close(){this.db&&=(this.db.close(),null)}};const I={NAME:`HabitTrackerDB`,VERSION:3,STORES:{HABITS:`habits`,RECORDS:`records`,TIME_HABITS:`timeHabits`,TIME_RECORDS:`timeRecords`},INDEX_NAMES:{HABITS:{CREATED_AT:`createdAt`,START_DATE:`startDate`},RECORDS:{HABIT_ID:`habitId`,DATE:`date`,HABIT_ID_DATE:`habitId_date`},TIME_HABITS:{CREATED_AT:`createdAt`,START_DATE:`startDate`},TIME_RECORDS:{HABIT_ID:`habitId`,DATE:`date`,HABIT_ID_DATE:`habitId_date`}},INDEX_KEY_PATHS:{HABITS:{CREATED_AT:`createdAt`,START_DATE:`startDate`},RECORDS:{HABIT_ID:`habitId`,DATE:`date`,HABIT_ID_DATE:[`habitId`,`date`]},TIME_HABITS:{CREATED_AT:`createdAt`,START_DATE:`startDate`},TIME_RECORDS:{HABIT_ID:`habitId`,DATE:`date`,HABIT_ID_DATE:[`habitId`,`date`]}}},L=new class extends Lt{constructor(){super(I.NAME,I.VERSION)}onUpgrade(e){if(!e.objectStoreNames.contains(I.STORES.HABITS)){let t=e.createObjectStore(I.STORES.HABITS,{keyPath:`id`});t.createIndex(I.INDEX_NAMES.HABITS.CREATED_AT,I.INDEX_KEY_PATHS.HABITS.CREATED_AT,{unique:!1}),t.createIndex(I.INDEX_NAMES.HABITS.START_DATE,I.INDEX_KEY_PATHS.HABITS.START_DATE,{unique:!1})}if(!e.objectStoreNames.contains(I.STORES.RECORDS)){let t=e.createObjectStore(I.STORES.RECORDS,{keyPath:`id`});t.createIndex(I.INDEX_NAMES.RECORDS.HABIT_ID,I.INDEX_KEY_PATHS.RECORDS.HABIT_ID,{unique:!1}),t.createIndex(I.INDEX_NAMES.RECORDS.DATE,I.INDEX_KEY_PATHS.RECORDS.DATE,{unique:!1}),t.createIndex(I.INDEX_NAMES.RECORDS.HABIT_ID_DATE,I.INDEX_KEY_PATHS.RECORDS.HABIT_ID_DATE,{unique:!0})}if(!e.objectStoreNames.contains(I.STORES.TIME_HABITS)){let t=e.createObjectStore(I.STORES.TIME_HABITS,{keyPath:`id`});t.createIndex(I.INDEX_NAMES.TIME_HABITS.CREATED_AT,I.INDEX_KEY_PATHS.TIME_HABITS.CREATED_AT,{unique:!1}),t.createIndex(I.INDEX_NAMES.TIME_HABITS.START_DATE,I.INDEX_KEY_PATHS.TIME_HABITS.START_DATE,{unique:!1})}if(!e.objectStoreNames.contains(I.STORES.TIME_RECORDS)){let t=e.createObjectStore(I.STORES.TIME_RECORDS,{keyPath:`id`});t.createIndex(I.INDEX_NAMES.TIME_RECORDS.HABIT_ID,I.INDEX_KEY_PATHS.TIME_RECORDS.HABIT_ID,{unique:!1}),t.createIndex(I.INDEX_NAMES.TIME_RECORDS.DATE,I.INDEX_KEY_PATHS.TIME_RECORDS.DATE,{unique:!1}),t.createIndex(I.INDEX_NAMES.TIME_RECORDS.HABIT_ID_DATE,I.INDEX_KEY_PATHS.TIME_RECORDS.HABIT_ID_DATE,{unique:!1})}}async addHabit(e){await this.addRecord(I.STORES.HABITS,e)}async updateHabit(e){await this.updateRecord(I.STORES.HABITS,e)}async deleteHabit(e){let t=await this.ensureDB();return new Promise((n,r)=>{let i=t.transaction([I.STORES.HABITS,I.STORES.RECORDS],`readwrite`),a=i.objectStore(I.STORES.HABITS),o=i.objectStore(I.STORES.RECORDS);a.delete(e);let s=o.index(I.INDEX_NAMES.RECORDS.HABIT_ID).openCursor(IDBKeyRange.only(e));s.onsuccess=e=>{let t=e.target.result;t&&(t.delete(),t.continue())},i.oncomplete=()=>n(),i.onerror=()=>r(i.error)})}async getAllHabits(){return this.getAllRecords(I.STORES.HABITS)}async getHabit(e){return await this.getRecord(I.STORES.HABITS,e)||null}async addHabitRecord(e){await this.updateRecord(I.STORES.RECORDS,e)}async deleteHabitRecord(e){await this.deleteRecord(I.STORES.RECORDS,e)}async getHabitRecordsByHabit(e){return this.getRecordsByIndex(I.STORES.RECORDS,I.INDEX_NAMES.RECORDS.HABIT_ID,e)}async getHabitRecordsByDate(e){return this.getRecordsByIndex(I.STORES.RECORDS,I.INDEX_NAMES.RECORDS.DATE,e)}async getAllHabitRecords(){return this.getAllRecords(I.STORES.RECORDS)}async addTimeHabit(e){await this.addRecord(I.STORES.TIME_HABITS,e)}async updateTimeHabit(e){await this.updateRecord(I.STORES.TIME_HABITS,e)}async deleteTimeHabit(e){let t=await this.ensureDB();return new Promise((n,r)=>{let i=t.transaction([I.STORES.TIME_HABITS,I.STORES.TIME_RECORDS],`readwrite`),a=i.objectStore(I.STORES.TIME_HABITS),o=i.objectStore(I.STORES.TIME_RECORDS);a.delete(e);let s=o.index(I.INDEX_NAMES.TIME_RECORDS.HABIT_ID).openCursor(IDBKeyRange.only(e));s.onsuccess=e=>{let t=e.target.result;t&&(t.delete(),t.continue())},i.oncomplete=()=>n(),i.onerror=()=>r(i.error)})}async getAllTimeHabits(){return this.getAllRecords(I.STORES.TIME_HABITS)}async getTimeHabit(e){return await this.getRecord(I.STORES.TIME_HABITS,e)||null}async addTimeHabitRecord(e){await this.updateRecord(I.STORES.TIME_RECORDS,e)}async deleteTimeHabitRecord(e){await this.deleteRecord(I.STORES.TIME_RECORDS,e)}async getTimeHabitRecordsByHabit(e){return this.getRecordsByIndex(I.STORES.TIME_RECORDS,I.INDEX_NAMES.TIME_RECORDS.HABIT_ID,e)}async getTimeHabitRecordsByDate(e){return this.getRecordsByIndex(I.STORES.TIME_RECORDS,I.INDEX_NAMES.TIME_RECORDS.DATE,e)}async getAllTimeHabitRecords(){return this.getAllRecords(I.STORES.TIME_RECORDS)}async exportData(){return{habits:await this.getAllHabits(),records:await this.getAllHabitRecords(),timeHabits:await this.getAllTimeHabits(),timeHabitRecords:await this.getAllTimeHabitRecords(),exportDate:Date.now()}}async importData(e){let t=await this.ensureDB();return new Promise((n,r)=>{let i=t.transaction([I.STORES.HABITS,I.STORES.RECORDS,I.STORES.TIME_HABITS,I.STORES.TIME_RECORDS],`readwrite`),a=i.objectStore(I.STORES.HABITS),o=i.objectStore(I.STORES.RECORDS),s=i.objectStore(I.STORES.TIME_HABITS),c=i.objectStore(I.STORES.TIME_RECORDS);e.habits.forEach(e=>{a.put(e)}),e.records.forEach(e=>{o.put(e)}),e.timeHabits&&e.timeHabits.forEach(e=>{s.put(e)}),e.timeHabitRecords&&e.timeHabitRecords.forEach(e=>{c.put(e)}),i.oncomplete=()=>n(),i.onerror=()=>r(i.error)})}async clearAll(){await this.clearStore(I.STORES.HABITS),await this.clearStore(I.STORES.RECORDS),await this.clearStore(I.STORES.TIME_HABITS),await this.clearStore(I.STORES.TIME_RECORDS)}},R=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,`0`)}-${String(e.getDate()).padStart(2,`0`)}`,Rt=e=>{let t=[],n=new Date(e);for(let e=0;e<30;e++)t.push(new Date(n)),n.setDate(n.getDate()+1);return t},zt=()=>`${Date.now()}-${Math.random().toString(36).substring(2,11)}`,Bt=()=>{let e=[`#1890ff`,`#52c41a`,`#faad14`,`#f5222d`,`#722ed1`,`#eb2f96`,`#13c2c2`,`#fa8c16`,`#a0d911`,`#2f54eb`];return e[Math.floor(Math.random()*e.length)]},Vt=e=>{let t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},Ht=e=>{let t=new Date;return t.setHours(0,0,0,0),e<t},Ut=e=>{let t=new Date;return t.setHours(23,59,59,999),e>t};var{Title:Wt,Text:Gt}=b,Kt=({habits:e,selectedHabitId:t,onHabitsChange:n,onHabitSelect:r})=>{let[i]=C.useForm(),[o,c]=(0,M.useState)(!1),[l,d]=(0,M.useState)(null),p=(e,t)=>{let n=new Date(e);return n.setDate(n.getDate()+t-1),n},m=(0,M.useCallback)(()=>{d(null),i.resetFields(),c(!0)},[i]),g=(0,M.useCallback)(e=>{d(e),i.setFieldsValue({name:e.name,description:e.description,startDate:(0,It.default)(e.startDate),targetDays:e.targetDays}),c(!0)},[i]),v=(0,M.useCallback)(async i=>{try{await L.deleteHabit(i),n(e.filter(e=>e.id!==i)),t===i&&r(null),s.success(`习惯已删除`)}catch(e){console.error(`删除习惯失败:`,e),s.error(`删除习惯失败，请重试`)}},[e,t,n,r]),y=(0,M.useCallback)(async()=>{try{let t=await i.validateFields(),r=t.startDate?new Date(t.startDate.valueOf()):new Date,a=p(r,t.targetDays),o={id:l?.id||zt(),name:t.name,description:t.description,color:l?.color||Bt(),createdAt:l?.createdAt||Date.now(),startDate:r.getTime(),endDate:a.getTime(),targetDays:t.targetDays};l?(await L.updateHabit(o),s.success(`习惯已更新`)):(await L.addHabit(o),s.success(`习惯已添加`)),n(l?e.map(e=>e.id===o.id?o:e):[...e,o]),c(!1),i.resetFields()}catch(e){console.error(`操作失败:`,e),s.error(`操作失败，请检查输入后重试`)}},[i,l,e,n]),b=(0,M.useCallback)(()=>{c(!1),i.resetFields(),d(null)},[i]);return(0,N.jsxs)(`div`,{className:`habit-manager`,children:[(0,N.jsxs)(`div`,{className:`habit-manager__header`,children:[(0,N.jsx)(Wt,{level:3,children:`习惯管理`}),(0,N.jsx)(w,{type:`primary`,icon:(0,N.jsx)(Ae,{}),onClick:m,children:`添加习惯`})]}),(0,N.jsx)(u,{className:`habit-manager__list`,dataSource:e,renderItem:e=>(0,N.jsx)(u.Item,{className:`habit-manager__item`,onClick:()=>r(e.id),children:(0,N.jsxs)(k,{className:`habit-manager__card ${t===e.id?`habit-manager__card--selected`:``}`,style:{borderColor:e.color},children:[(0,N.jsxs)(`div`,{className:`habit-manager__card-header`,children:[(0,N.jsxs)(`div`,{className:`habit-manager__card-title`,children:[(0,N.jsx)(Gt,{strong:!0,children:e.name}),(0,N.jsxs)(a,{color:e.color,children:[e.targetDays,`天`]})]}),(0,N.jsxs)(f,{children:[(0,N.jsx)(w,{type:`text`,icon:(0,N.jsx)(Fe,{}),onClick:t=>{t.stopPropagation(),g(e)}}),(0,N.jsx)(h,{title:`确认删除`,description:`确定要删除这个习惯吗？`,onConfirm:t=>{t?.stopPropagation(),v(e.id)},onCancel:e=>e?.stopPropagation(),okText:`确定`,cancelText:`取消`,children:(0,N.jsx)(w,{type:`text`,danger:!0,icon:(0,N.jsx)(x,{}),onClick:e=>e.stopPropagation()})})]})]}),e.description&&(0,N.jsx)(Gt,{type:`secondary`,className:`habit-manager__card-description`,children:e.description}),(0,N.jsx)(`div`,{className:`habit-manager__card-footer`,children:(0,N.jsxs)(Gt,{type:`secondary`,className:`habit-manager__card-date`,children:[R(new Date(e.startDate)),` - `,R(new Date(e.endDate))]})})]})})}),e.length===0&&(0,N.jsx)(`div`,{className:`habit-manager__empty`,children:(0,N.jsx)(Gt,{type:`secondary`,children:`还没有习惯，点击上方按钮添加一个吧！`})}),(0,N.jsx)(_,{title:l?`编辑习惯`:`添加习惯`,open:o,onOk:y,onCancel:b,okText:`确定`,cancelText:`取消`,children:(0,N.jsxs)(C,{form:i,layout:`vertical`,children:[(0,N.jsx)(C.Item,{label:`习惯名称`,name:`name`,rules:[{required:!0,message:`请输入习惯名称`}],children:(0,N.jsx)(j,{placeholder:`例如：每天跑步`})}),(0,N.jsx)(C.Item,{label:`描述`,name:`description`,children:(0,N.jsx)(j.TextArea,{placeholder:`描述这个习惯（可选）`,rows:3})}),(0,N.jsx)(C.Item,{label:`开始日期`,name:`startDate`,rules:[{required:!0,message:`请选择开始日期`}],initialValue:(0,It.default)(),children:(0,N.jsx)(Oe,{style:{width:`100%`}})}),(0,N.jsx)(C.Item,{label:`目标天数`,name:`targetDays`,rules:[{required:!0,message:`请输入目标天数`}],initialValue:30,children:(0,N.jsx)(re,{min:1,max:365,style:{width:`100%`}})})]})})]})},{Title:qt,Text:Jt}=b,Yt=({habit:e,onToggleRecord:t})=>{let n=(0,M.useCallback)(e=>{t(e)},[t]),r=(0,M.useCallback)(t=>{if(!e)return`past`;let n=R(t),r=e.records.find(e=>e.date===n);return Vt(t)?r?.completed?`completed`:`today`:Ut(t)?`future`:r?.completed?`completed`:Ht(t)?`missed`:`past`},[e]),i=(0,M.useCallback)(e=>{switch(e){case`completed`:return(0,N.jsx)(me,{});case`missed`:return(0,N.jsx)(he,{});case`today`:return(0,N.jsx)(d,{});default:return null}},[]),a=(0,M.useCallback)((e,t)=>{let n=R(e);return t===`completed`?`${n} - 已完成`:t===`missed`?`${n} - 未完成`:t===`today`?`${n} - 今天`:t===`future`?`${n} - 未来`:n},[]),o=(0,M.useCallback)((e,t)=>Ut(e)?null:t===`completed`&&Vt(e)?(0,N.jsx)(w,{type:`primary`,danger:!0,size:`small`,icon:(0,N.jsx)(De,{}),onClick:t=>{t.stopPropagation(),n(e)},className:`habit-calendar__action-btn habit-calendar__action-btn--cancel`,children:`取消`}):t===`completed`?(0,N.jsx)(w,{type:`default`,size:`small`,disabled:!0,className:`habit-calendar__action-btn habit-calendar__action-btn--disabled`,children:`已完成`}):(0,N.jsx)(w,{type:`primary`,size:`small`,icon:(0,N.jsx)(D,{}),onClick:t=>{t.stopPropagation(),n(e)},className:`habit-calendar__action-btn habit-calendar__action-btn--check`,children:`打卡`}),[n]),s=(0,M.useMemo)(()=>{if(!e)return null;let t=Rt(new Date(e.startDate)),n=e.records.filter(e=>e.completed).length;return{dateRange:t,completedDays:n,progress:n/e.targetDays*100}},[e]);if(!e)return(0,N.jsx)(`div`,{className:`habit-calendar habit-calendar--empty`,children:(0,N.jsx)(k,{className:`habit-calendar__card`,children:(0,N.jsx)(`div`,{className:`habit-calendar__empty-state`,children:(0,N.jsx)(Jt,{type:`secondary`,children:`请从左侧选择一个习惯查看追踪记录`})})})});let{dateRange:c,completedDays:l,progress:u}=s;return(0,N.jsx)(`div`,{className:`habit-calendar`,children:(0,N.jsxs)(k,{className:`habit-calendar__card`,children:[(0,N.jsxs)(`div`,{className:`habit-calendar__header`,children:[(0,N.jsx)(qt,{level:3,children:e.name}),(0,N.jsxs)(`div`,{className:`habit-calendar__progress`,children:[(0,N.jsxs)(Jt,{strong:!0,children:[l,` / `,e.targetDays,` 天`]}),(0,N.jsxs)(Jt,{type:`secondary`,children:[`(`,u.toFixed(1),`%)`]})]})]}),e.description&&(0,N.jsx)(Jt,{type:`secondary`,className:`habit-calendar__description`,children:e.description}),(0,N.jsx)(`div`,{className:`habit-calendar__grid`,children:c.map((e,t)=>{let n=r(e),s=R(e),c=t+1;return(0,N.jsx)(Te,{title:a(e,n),children:(0,N.jsxs)(`div`,{className:`habit-calendar__day habit-calendar__day--${n}`,children:[(0,N.jsx)(`div`,{className:`habit-calendar__day-number`,children:c}),(0,N.jsxs)(`div`,{className:`habit-calendar__day-date`,children:[e.getMonth()+1,`/`,e.getDate()]}),(0,N.jsx)(`div`,{className:`habit-calendar__day-icon`,children:i(n)}),(0,N.jsx)(`div`,{className:`habit-calendar__day-action`,children:o(e,n)})]})},s)})}),(0,N.jsxs)(`div`,{className:`habit-calendar__legend`,children:[(0,N.jsxs)(`div`,{className:`habit-calendar__legend-item`,children:[(0,N.jsx)(me,{className:`habit-calendar__legend-icon habit-calendar__legend-icon--completed`}),(0,N.jsx)(Jt,{children:`已完成`})]}),(0,N.jsxs)(`div`,{className:`habit-calendar__legend-item`,children:[(0,N.jsx)(he,{className:`habit-calendar__legend-icon habit-calendar__legend-icon--missed`}),(0,N.jsx)(Jt,{children:`未完成`})]}),(0,N.jsxs)(`div`,{className:`habit-calendar__legend-item`,children:[(0,N.jsx)(d,{className:`habit-calendar__legend-icon habit-calendar__legend-icon--today`}),(0,N.jsx)(Jt,{children:`今天`})]}),(0,N.jsxs)(`div`,{className:`habit-calendar__legend-item`,children:[(0,N.jsx)(`div`,{className:`habit-calendar__legend-icon habit-calendar__legend-icon--future`}),(0,N.jsx)(Jt,{children:`未来`})]})]})]})})},{Title:Xt}=b,Zt=({habit:e})=>{if(!e)return(0,N.jsx)(`div`,{className:`habit-charts habit-charts--empty`,children:(0,N.jsx)(k,{className:`habit-charts__card`,children:(0,N.jsx)(A,{description:`请选择一个习惯查看图表`})})});let t=Rt(new Date(e.startDate)),n=t.map(t=>{let n=R(t),r=e.records.find(e=>e.date===n);return{date:`${t.getMonth()+1}/${t.getDate()}`,value:r?.completed?1:0,type:`完成状态`}}),r=t.map(t=>{let n=e.records.filter(e=>e.completed&&new Date(e.date)<=t).length;return{date:`${t.getMonth()+1}/${t.getDate()}`,value:n,type:`累计完成`}}),i={data:n,xField:`date`,yField:`value`,seriesField:`type`,smooth:!0,point:{size:5,shape:`circle`},yAxis:{min:0,max:1,tickCount:2,label:{formatter:e=>e===1?`完成`:`未完成`}},color:e.color,tooltip:{formatter:e=>({name:e.date,value:e.value===1?`已完成`:`未完成`})}},a={data:r,xField:`date`,yField:`value`,seriesField:`type`,smooth:!0,point:{size:5,shape:`circle`},yAxis:{min:0,max:Math.max(e.targetDays,10),title:{text:`累计天数`}},color:e.color,tooltip:{formatter:e=>({name:e.date,value:`${e.value} 天`})}},o=[];for(let n=0;n<t.length;n+=7){let r=t.slice(n,n+7),i=`第${Math.floor(n/7)+1}周`,a=r.filter(t=>{let n=R(t);return e.records.find(e=>e.date===n)?.completed}).length;o.push({week:i,value:a})}let s={data:o,xField:`week`,yField:`value`,label:{position:`top`,formatter:e=>`${e.value||0} 天`},color:e.color,yAxis:{min:0,max:7,title:{text:`完成天数`}},tooltip:{formatter:e=>({name:e.week,value:`${e.value||0} 天`})}};return(0,N.jsx)(`div`,{className:`habit-charts`,children:(0,N.jsxs)(k,{className:`habit-charts__card`,children:[(0,N.jsx)(`div`,{className:`habit-charts__header`,children:(0,N.jsxs)(Xt,{level:3,children:[e.name,` - 进度图表`]})}),(0,N.jsxs)(`div`,{className:`habit-charts__content`,children:[(0,N.jsxs)(`div`,{className:`habit-charts__section`,children:[(0,N.jsx)(Xt,{level:4,children:`每日完成状态`}),(0,N.jsx)(Me,{...i,height:200})]}),(0,N.jsxs)(`div`,{className:`habit-charts__section`,children:[(0,N.jsx)(Xt,{level:4,children:`累计完成天数`}),(0,N.jsx)(Me,{...a,height:200})]}),(0,N.jsxs)(`div`,{className:`habit-charts__section`,children:[(0,N.jsx)(Xt,{level:4,children:`每周完成统计`}),(0,N.jsx)(Se,{...s,height:200})]})]})]})})},{Text:Qt}=b,$t=({onDataImport:e})=>{let t=(0,M.useCallback)(async()=>{try{let e=await L.getAllHabits();if(e.length===0){s.warning(`没有数据可导出`);return}let t=`习惯名称,描述,开始日期,结束日期,目标天数,日期,完成状态
`;for(let n of e){let e=await L.getHabitRecordsByHabit(n.id);if(e.length===0)t+=`"${n.name}","${n.description||``}","${new Date(n.startDate).toLocaleDateString()}","${new Date(n.endDate).toLocaleDateString()}",${n.targetDays},,未记录\n`;else for(let r of e){let e=r.completed?`已完成`:`未完成`;t+=`"${n.name}","${n.description||``}","${new Date(n.startDate).toLocaleDateString()}","${new Date(n.endDate).toLocaleDateString()}",${n.targetDays},"${r.date}","${e}"\n`}}let n=new Blob([`﻿`+t],{type:`text/csv;charset=utf-8;`}),r=URL.createObjectURL(n),i=document.createElement(`a`);i.href=r,i.download=`habit-tracker-${new Date().toISOString().split(`T`)[0]}.csv`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),s.success(`CSV导出成功`)}catch{s.error(`CSV导出失败`)}},[]),n=(0,M.useCallback)(async()=>{try{let e=await L.exportData(),t=JSON.stringify(e,null,2),n=new Blob([t],{type:`application/json`}),r=URL.createObjectURL(n),i=document.createElement(`a`);i.href=r,i.download=`habit-tracker-backup-${new Date().toISOString().split(`T`)[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),s.success(`数据导出成功`)}catch{s.error(`数据导出失败`)}},[]),r=(0,M.useCallback)(()=>{let t=document.createElement(`input`);t.type=`file`,t.accept=`application/json`,t.onchange=async t=>{let n=t.target.files?.[0];if(n)try{let t=await n.text(),r=JSON.parse(t);if(!r.habits||!r.records)throw Error(`Invalid data format`);_.confirm({title:`确认导入`,content:(0,N.jsxs)(`div`,{children:[(0,N.jsx)(`p`,{children:`即将导入以下数据：`}),(0,N.jsxs)(`p`,{children:[`习惯数量：`,r.habits.length]}),(0,N.jsxs)(`p`,{children:[`记录数量：`,r.records.length]}),(0,N.jsxs)(`p`,{children:[`导出日期：`,new Date(r.exportDate).toLocaleString()]}),(0,N.jsx)(`p`,{style:{color:`#ff4d4f`},children:`注意：导入将覆盖当前数据，请确认是否继续？`})]}),okText:`确认导入`,cancelText:`取消`,okButtonProps:{danger:!0},onOk:async()=>{try{await L.clearAll(),await L.importData(r),s.success(`数据导入成功`),e()}catch{s.error(`数据导入失败`)}}})}catch{s.error(`文件格式错误，请选择正确的备份文件`)}},t.click()},[e]),i=(0,M.useCallback)(()=>{_.confirm({title:`确认清空`,content:`确定要清空所有数据吗？此操作不可恢复！`,okText:`确定清空`,cancelText:`取消`,okButtonProps:{danger:!0},onOk:async()=>{try{await L.clearAll(),s.success(`数据已清空`),e()}catch{s.error(`清空数据失败`)}}})},[e]);return(0,N.jsxs)(`div`,{className:`data-manager`,children:[(0,N.jsx)(`div`,{className:`data-manager__actions`,children:(0,N.jsxs)(f,{size:`middle`,children:[(0,N.jsx)(w,{icon:(0,N.jsx)(pe,{}),onClick:t,children:`导出CSV`}),(0,N.jsx)(w,{icon:(0,N.jsx)(Ie,{}),onClick:n,children:`导出JSON`}),(0,N.jsx)(w,{icon:(0,N.jsx)(ke,{}),onClick:r,children:`导入数据`}),(0,N.jsx)(w,{danger:!0,icon:(0,N.jsx)(x,{}),onClick:i,children:`清空数据`})]})}),(0,N.jsx)(`div`,{className:`data-manager__info`,children:(0,N.jsx)(Qt,{type:`secondary`,children:`导出CSV可在Excel等表格软件中查看；导出JSON用于数据备份；导入数据可恢复之前的备份。清空数据将删除所有习惯和记录。`})})]})};const en=[{name:`喝水`,description:`每天定时喝水，保持身体健康`,targetTime:`09:00`,frequency:`daily`,intervalMinutes:60,reminderEnabled:!0,reminderMinutes:5},{name:`运动`,description:`下班后运动，保持身材和健康`,targetTime:`18:00`,timeRange:`19:00`,frequency:`weekdays`,weekdays:[1,2,3,4,5],reminderEnabled:!0,reminderMinutes:10},{name:`学习`,description:`每天固定时间学习新知识`,targetTime:`20:00`,frequency:`daily`,reminderEnabled:!0,reminderMinutes:5},{name:`休息`,description:`工作间隙休息，放松身心`,targetTime:`10:00`,frequency:`weekdays`,weekdays:[1,2,3,4,5],intervalMinutes:120,reminderEnabled:!0,reminderMinutes:2},{name:`眼保健操`,description:`保护眼睛，缓解视疲劳`,targetTime:`14:00`,frequency:`weekdays`,weekdays:[1,2,3,4,5],reminderEnabled:!0,reminderMinutes:5},{name:`冥想`,description:`每天冥想，保持内心平静`,targetTime:`07:00`,frequency:`daily`,reminderEnabled:!0,reminderMinutes:5}];var tn=e(ve(),1),{Title:nn,Text:z}=b,{Option:B}=O,rn=({timeHabits:e,selectedTimeHabitId:t,onTimeHabitsChange:n,onTimeHabitSelect:r})=>{let[i]=C.useForm(),[c,l]=(0,M.useState)(!1),[p,m]=(0,M.useState)(!1),[v,y]=(0,M.useState)(null),b=(0,M.useCallback)(()=>{y(null),m(!0)},[]),S=(0,M.useCallback)(e=>{i.setFieldsValue({name:e.name,description:e.description,targetTime:(0,tn.default)(e.targetTime,`HH:mm`),timeRange:e.timeRange?(0,tn.default)(e.timeRange,`HH:mm`):null,frequency:e.frequency,weekdays:e.weekdays,intervalMinutes:e.intervalMinutes,reminderEnabled:e.reminderEnabled,reminderMinutes:e.reminderMinutes,startDate:(0,tn.default)()}),m(!1),l(!0)},[i]),ee=(0,M.useCallback)(()=>{i.resetFields(),i.setFieldsValue({targetTime:(0,tn.default)(`09:00`,`HH:mm`),frequency:`daily`,weekdays:[1,2,3,4,5],reminderEnabled:!1,reminderMinutes:5,startDate:(0,tn.default)()}),m(!1),l(!0)},[i]),te=(0,M.useCallback)(e=>{y(e),i.setFieldsValue({name:e.name,description:e.description,targetTime:(0,tn.default)(e.targetTime,`HH:mm`),timeRange:e.timeRange?(0,tn.default)(e.timeRange,`HH:mm`):null,frequency:e.frequency,weekdays:e.weekdays,intervalMinutes:e.intervalMinutes,reminderEnabled:e.reminderEnabled,reminderMinutes:e.reminderMinutes,startDate:(0,tn.default)(e.startDate)}),l(!0)},[i]),ne=(0,M.useCallback)(async i=>{try{await L.deleteTimeHabit(i),n(e.filter(e=>e.id!==i)),t===i&&r(null),s.success(`时段习惯已删除`)}catch{s.error(`删除时段习惯失败`)}},[e,t,n,r]),ie=(0,M.useCallback)(async()=>{try{let t=await i.validateFields(),r=t.startDate?new Date(t.startDate.valueOf()):new Date,a={id:v?.id||zt(),name:t.name,description:t.description,color:v?.color||Bt(),createdAt:v?.createdAt||Date.now(),targetTime:t.targetTime.format(`HH:mm`),timeRange:t.timeRange?t.timeRange.format(`HH:mm`):void 0,reminderEnabled:t.reminderEnabled||!1,reminderMinutes:t.reminderMinutes||5,frequency:t.frequency||`daily`,weekdays:t.weekdays||[1,2,3,4,5],intervalMinutes:t.intervalMinutes,startDate:r.getTime(),endDate:t.endDate?new Date(t.endDate.valueOf()).getTime():void 0};v?(await L.updateTimeHabit(a),s.success(`时段习惯已更新`)):(await L.addTimeHabit(a),s.success(`时段习惯已添加`)),n(v?e.map(e=>e.id===a.id?a:e):[...e,a]),l(!1),i.resetFields()}catch{s.error(`操作失败`)}},[i,v,e,n]),ae=(0,M.useCallback)(()=>{l(!1),i.resetFields(),y(null)},[i]),oe=(0,M.useCallback)(()=>{m(!1)},[]),se=(0,M.useCallback)((e,t,n)=>{let r=[`周日`,`周一`,`周二`,`周三`,`周四`,`周五`,`周六`],i=``;switch(e){case`daily`:i=`每天`;break;case`weekdays`:i=`工作日`;break;case`weekends`:i=`周末`;break;case`custom`:i=t?.map(e=>r[e]).join(`、`)||`自定义`;break;default:i=`每天`}return n&&(i+=`，每隔 ${n} 分钟`),i},[]),ce=(0,M.useMemo)(()=>en.map((e,t)=>(0,N.jsxs)(k,{hoverable:!0,onClick:()=>S(e),style:{cursor:`pointer`},children:[(0,N.jsx)(`div`,{style:{marginBottom:8},children:(0,N.jsx)(z,{strong:!0,style:{fontSize:16},children:e.name})}),(0,N.jsx)(z,{type:`secondary`,style:{fontSize:14,display:`block`,marginBottom:8},children:e.description}),(0,N.jsxs)(`div`,{children:[(0,N.jsx)(a,{color:`blue`,children:e.targetTime}),(0,N.jsx)(a,{children:se(e.frequency,e.weekdays,e.intervalMinutes)}),e.reminderEnabled&&(0,N.jsx)(a,{color:`green`,children:`已开启提醒`})]})]},t)),[S,se]);return(0,N.jsxs)(`div`,{className:`time-habit-manager`,children:[(0,N.jsxs)(`div`,{className:`time-habit-manager__header`,children:[(0,N.jsx)(nn,{level:3,children:`时段习惯`}),(0,N.jsx)(w,{type:`primary`,icon:(0,N.jsx)(Ae,{}),onClick:b,children:`添加时段习惯`})]}),(0,N.jsx)(u,{className:`time-habit-manager__list`,dataSource:e,renderItem:e=>(0,N.jsx)(u.Item,{className:`time-habit-manager__item`,onClick:()=>r(e.id),children:(0,N.jsxs)(k,{className:`time-habit-manager__card ${t===e.id?`time-habit-manager__card--selected`:``}`,style:{borderColor:e.color},children:[(0,N.jsxs)(`div`,{className:`time-habit-manager__card-header`,children:[(0,N.jsxs)(`div`,{className:`time-habit-manager__card-title`,children:[(0,N.jsx)(d,{style:{color:e.color,marginRight:8}}),(0,N.jsx)(z,{strong:!0,children:e.name}),(0,N.jsx)(a,{color:e.color,children:e.targetTime})]}),(0,N.jsxs)(f,{children:[(0,N.jsx)(w,{type:`text`,icon:(0,N.jsx)(Fe,{}),onClick:t=>{t.stopPropagation(),te(e)}}),(0,N.jsx)(h,{title:`删除时段习惯`,description:`删除后，该习惯的所有记录也将被删除，确定要继续吗？`,onConfirm:t=>{t?.stopPropagation(),ne(e.id)},onCancel:e=>e?.stopPropagation(),okText:`确定删除`,cancelText:`取消`,okButtonProps:{danger:!0},children:(0,N.jsx)(w,{type:`text`,danger:!0,icon:(0,N.jsx)(x,{}),onClick:e=>e.stopPropagation()})})]})]}),e.description&&(0,N.jsx)(z,{type:`secondary`,className:`time-habit-manager__card-description`,children:e.description}),(0,N.jsxs)(`div`,{className:`time-habit-manager__card-footer`,children:[(0,N.jsx)(z,{type:`secondary`,className:`time-habit-manager__card-info`,children:se(e.frequency,e.weekdays,e.intervalMinutes)}),e.timeRange&&(0,N.jsxs)(z,{type:`secondary`,className:`time-habit-manager__card-info`,children:[`至 `,e.timeRange]})]})]})})}),e.length===0&&(0,N.jsxs)(`div`,{className:`time-habit-manager__empty`,children:[(0,N.jsx)(d,{style:{fontSize:48,color:`#d9d9d9`,marginBottom:16}}),(0,N.jsx)(z,{type:`secondary`,style:{fontSize:16},children:`还没有时段习惯，点击上方按钮添加一个吧！`}),(0,N.jsx)(`div`,{style:{marginTop:8},children:(0,N.jsx)(z,{type:`secondary`,style:{fontSize:14},children:`时段习惯可以帮助你养成定时打卡的好习惯，比如每天喝水、定时休息等`})})]}),(0,N.jsxs)(_,{title:`选择习惯模板`,open:p,onCancel:oe,footer:null,width:700,children:[(0,N.jsx)(`div`,{style:{marginBottom:24},children:(0,N.jsx)(z,{type:`secondary`,children:`选择一个预设模板快速创建习惯，或者自定义创建`})}),(0,N.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(2, 1fr)`,gap:16,marginBottom:24},children:ce}),(0,N.jsx)(w,{block:!0,onClick:ee,style:{marginBottom:8},children:`自定义创建习惯`})]}),(0,N.jsx)(_,{title:v?`编辑时段习惯`:`添加时段习惯`,open:c,onOk:ie,onCancel:ae,okText:`确定`,cancelText:`取消`,width:600,children:(0,N.jsxs)(C,{form:i,layout:`vertical`,children:[(0,N.jsx)(C.Item,{label:`习惯名称`,name:`name`,rules:[{required:!0,message:`请输入习惯名称`}],extra:`给你的习惯起个名字，比如：喝水、站起来活动`,children:(0,N.jsx)(j,{placeholder:`例如：喝水、起来走一走`})}),(0,N.jsx)(C.Item,{label:`描述`,name:`description`,extra:`简单描述这个习惯的目的（可选）`,children:(0,N.jsx)(j.TextArea,{placeholder:`描述这个习惯（可选）`,rows:3})}),(0,N.jsx)(C.Item,{label:`目标时间`,name:`targetTime`,rules:[{required:!0,message:`请选择目标时间`}],extra:`每天在这个时间开始执行习惯`,children:(0,N.jsx)(o,{format:`HH:mm`,style:{width:`100%`}})}),(0,N.jsx)(C.Item,{label:`频率`,name:`frequency`,rules:[{required:!0,message:`请选择频率`}],extra:`选择习惯执行的日期频率`,children:(0,N.jsxs)(O,{children:[(0,N.jsx)(B,{value:`daily`,children:`每天`}),(0,N.jsx)(B,{value:`weekdays`,children:`工作日（周一至周五）`}),(0,N.jsx)(B,{value:`weekends`,children:`周末（周六、周日）`}),(0,N.jsx)(B,{value:`custom`,children:`自定义星期`})]})}),(0,N.jsx)(C.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.frequency!==t.frequency,children:({getFieldValue:e})=>e(`frequency`)===`custom`?(0,N.jsx)(C.Item,{label:`选择星期`,name:`weekdays`,rules:[{required:!0,message:`请选择星期`}],extra:`选择习惯执行的星期`,children:(0,N.jsxs)(O,{mode:`multiple`,placeholder:`选择星期`,children:[(0,N.jsx)(B,{value:0,children:`周日`}),(0,N.jsx)(B,{value:1,children:`周一`}),(0,N.jsx)(B,{value:2,children:`周二`}),(0,N.jsx)(B,{value:3,children:`周三`}),(0,N.jsx)(B,{value:4,children:`周四`}),(0,N.jsx)(B,{value:5,children:`周五`}),(0,N.jsx)(B,{value:6,children:`周六`})]})}):null}),(0,N.jsx)(de,{items:[{key:`1`,label:(0,N.jsxs)(`span`,{children:[(0,N.jsx)(we,{style:{marginRight:8}}),`高级设置`]}),children:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(C.Item,{label:`结束时间（可选）`,name:`timeRange`,extra:`习惯执行的结束时间，不填则全天有效`,children:(0,N.jsx)(o,{format:`HH:mm`,style:{width:`100%`}})}),(0,N.jsx)(C.Item,{label:`时间间隔（可选）`,name:`intervalMinutes`,extra:`设置后可以在一天内多次打卡，比如每隔60分钟喝一次水`,children:(0,N.jsx)(re,{min:1,max:1440,placeholder:`如：60（表示每隔60分钟）`,style:{width:`100%`}})}),(0,N.jsx)(C.Item,{label:`开始日期`,name:`startDate`,rules:[{required:!0,message:`请选择开始日期`}],extra:`习惯从这一天开始执行`,children:(0,N.jsx)(Oe,{style:{width:`100%`}})}),(0,N.jsx)(C.Item,{label:`结束日期（可选）`,name:`endDate`,extra:`习惯执行到这一天结束，不填则长期有效`,children:(0,N.jsx)(Oe,{style:{width:`100%`}})}),(0,N.jsx)(C.Item,{label:`启用提醒`,name:`reminderEnabled`,valuePropName:`checked`,extra:`开启后会在目标时间前提醒你`,children:(0,N.jsx)(g,{})}),(0,N.jsx)(C.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.reminderEnabled!==t.reminderEnabled,children:({getFieldValue:e})=>e(`reminderEnabled`)?(0,N.jsx)(C.Item,{label:`提前提醒（分钟）`,name:`reminderMinutes`,rules:[{required:!0,message:`请输入提前提醒时间`}],extra:`在目标时间前多少分钟提醒你`,children:(0,N.jsx)(re,{min:1,max:60,style:{width:`100%`}})}):null})]})}]})]})})]})},an=e(ve(),1),{Title:on,Text:V}=b,sn=({habit:e,onRecordChange:t})=>{let[n,r]=(0,M.useState)([]),[i,o]=(0,M.useState)(!1),c=(0,M.useCallback)(async()=>{try{let e=R(new Date);r(await L.getTimeHabitRecordsByDate(e))}catch(e){console.error(`加载记录失败:`,e),s.error(`加载记录失败，请重试`)}},[]);(0,M.useEffect)(()=>{c()},[e.id,c]);let l=(0,M.useCallback)(()=>{let t=R(new Date);return n.find(n=>n.habitId===e.id&&n.date===t)},[n,e.id]),u=(0,M.useCallback)(()=>{let t=new Date,n=t.getDay(),r=new Date(e.startDate),i=e.endDate?new Date(e.endDate):null;if(t<r||i&&t>i)return!1;switch(e.frequency){case`daily`:return!0;case`weekdays`:return n>=1&&n<=5;case`weekends`:return n===0||n===6;case`custom`:return e.weekdays?.includes(n)??!1;case`interval`:return!0;default:return!0}},[e.startDate,e.endDate,e.frequency,e.weekdays]),p=(0,M.useCallback)(()=>{let t=l();if(!u())return{status:`inactive`,text:`今天不是执行日`};if(e.intervalMinutes){let t=(0,an.default)(),r=(0,an.default)(e.targetTime,`HH:mm`),i=r.hour()*60+r.minute(),a=t.hour()*60+t.minute(),o=e.intervalMinutes;if(a<i)return{status:`pending`,text:`将在 ${e.targetTime} 开始`};let s=n.filter(t=>t.habitId===e.id).sort((e,t)=>t.completedAt-e.completedAt)[0];if(s){let e=(0,an.default)(s.completedAt);if(t.diff(e,`minute`)>=o)return{status:`pending`,text:`可以再次打卡`};{let n=e.add(o,`minute`),r=n.diff(t,`minute`);return{status:`completed`,text:`下次 ${n.format(`HH:mm`)} (${r}分钟后)`}}}return{status:`pending`,text:`将在 ${e.targetTime} 开始`}}if(t)return{status:`completed`,text:`已于 ${(0,an.default)(t.completedAt).format(`HH:mm`)} 完成`};let r=(0,an.default)(),i=(0,an.default)(e.targetTime,`HH:mm`);return r.isBefore(i)?{status:`pending`,text:`目标时间 ${e.targetTime}`}:{status:`pending`,text:`可以随时打卡`}},[l,u,e,n]),m=(0,M.useCallback)(async()=>{o(!0);try{let n=R(new Date);if(e.intervalMinutes){let t={id:zt(),habitId:e.id,date:n,completedAt:Date.now()};await L.addTimeHabitRecord(t),s.success(`打卡成功`)}else{let t=l();if(t)await L.deleteTimeHabitRecord(t.id),s.success(`已取消打卡`);else{let t={id:zt(),habitId:e.id,date:n,completedAt:Date.now()};await L.addTimeHabitRecord(t),s.success(`打卡成功`)}}await c(),t()}catch(e){console.error(`打卡失败:`,e),s.error(`操作失败: ${e instanceof Error?e.message:`未知错误`}`)}finally{o(!1)}},[e,l,c,t]),h=(0,M.useCallback)(()=>{let{status:t}=p(),n=l();return t===`inactive`?(0,N.jsx)(w,{disabled:!0,className:`time-habit-timeline__action-btn`,children:`今天不是执行日`}):e.intervalMinutes?(0,N.jsx)(w,{type:`primary`,icon:(0,N.jsx)(D,{}),onClick:m,loading:i,className:`time-habit-timeline__action-btn time-habit-timeline__action-btn--check`,size:`large`,children:`立即打卡`}):n?(0,N.jsx)(w,{type:`primary`,danger:!0,icon:(0,N.jsx)(De,{}),onClick:m,loading:i,className:`time-habit-timeline__action-btn time-habit-timeline__action-btn--cancel`,children:`取消打卡`}):(0,N.jsx)(w,{type:`primary`,icon:(0,N.jsx)(D,{}),onClick:m,loading:i,className:`time-habit-timeline__action-btn time-habit-timeline__action-btn--check`,size:`large`,children:`立即打卡`})},[p,l,e.intervalMinutes,m,i]),{status:g,text:_}=p(),v=l(),y=(0,M.useMemo)(()=>{switch(g){case`completed`:return`success`;case`pending`:return`processing`;case`inactive`:return`default`;default:return`default`}},[g]);return(0,N.jsx)(`div`,{className:`time-habit-timeline`,children:(0,N.jsxs)(k,{className:`time-habit-timeline__card`,children:[(0,N.jsxs)(`div`,{className:`time-habit-timeline__header`,children:[(0,N.jsxs)(`div`,{className:`time-habit-timeline__title`,children:[(0,N.jsx)(d,{style:{color:e.color,fontSize:20,marginRight:12}}),(0,N.jsx)(on,{level:4,style:{margin:0},children:e.name})]}),(0,N.jsx)(`div`,{className:`time-habit-timeline__status`,children:(0,N.jsx)(a,{color:y,children:_})})]}),e.description&&(0,N.jsx)(V,{type:`secondary`,className:`time-habit-timeline__description`,children:e.description}),(0,N.jsx)(`div`,{className:`time-habit-timeline__info`,children:(0,N.jsxs)(f,{direction:`vertical`,size:`small`,style:{width:`100%`},children:[(0,N.jsxs)(`div`,{className:`time-habit-timeline__info-item`,children:[(0,N.jsx)(V,{type:`secondary`,children:`目标时间：`}),(0,N.jsx)(V,{strong:!0,children:e.targetTime}),e.timeRange&&(0,N.jsxs)(V,{strong:!0,children:[` - `,e.timeRange]})]}),(0,N.jsxs)(`div`,{className:`time-habit-timeline__info-item`,children:[(0,N.jsx)(V,{type:`secondary`,children:`频率：`}),(0,N.jsx)(V,{children:cn(e)})]}),e.reminderEnabled&&(0,N.jsxs)(`div`,{className:`time-habit-timeline__info-item`,children:[(0,N.jsx)(V,{type:`secondary`,children:`提醒：`}),(0,N.jsxs)(V,{children:[`提前 `,e.reminderMinutes,` 分钟`]})]}),v&&(0,N.jsxs)(`div`,{className:`time-habit-timeline__info-item`,children:[(0,N.jsx)(V,{type:`secondary`,children:`完成时间：`}),(0,N.jsx)(V,{strong:!0,style:{color:`#52c41a`},children:(0,an.default)(v.completedAt).format(`YYYY-MM-DD HH:mm`)})]})]})}),(0,N.jsx)(`div`,{className:`time-habit-timeline__actions`,children:h()}),(0,N.jsxs)(`div`,{className:`time-habit-timeline__stats`,children:[(0,N.jsxs)(`div`,{className:`time-habit-timeline__stat-item`,children:[(0,N.jsx)(V,{type:`secondary`,children:`已完成`}),(0,N.jsx)(V,{strong:!0,style:{fontSize:24,color:e.color},children:e.completedDays})]}),(0,N.jsxs)(`div`,{className:`time-habit-timeline__stat-item`,children:[(0,N.jsx)(V,{type:`secondary`,children:`完成率`}),(0,N.jsxs)(V,{strong:!0,style:{fontSize:24,color:e.color},children:[e.completionRate.toFixed(1),`%`]})]})]})]})})},cn=e=>{if(!e)return``;let t=[`周日`,`周一`,`周二`,`周三`,`周四`,`周五`,`周六`];switch(e.frequency){case`daily`:return`每天`;case`weekdays`:return`工作日`;case`weekends`:return`周末`;case`custom`:return e.weekdays?.map(e=>t[e]).join(`、`)||`自定义`;case`interval`:return`每隔 ${e.intervalMinutes||60} 分钟`;default:return`每天`}},ln=sn,un=e(ve(),1),{Title:dn}=b,fn=({habit:e,records:t})=>{if(!e)return(0,N.jsx)(`div`,{className:`time-habit-charts time-habit-charts--empty`,children:(0,N.jsx)(k,{className:`time-habit-charts__card`,children:(0,N.jsx)(A,{description:`请选择一个习惯查看图表`})})});let n=Rt(new Date(e.startDate)),r=t.filter(t=>t.habitId===e.id);if(e.intervalMinutes){let t={data:n.map(e=>{let t=R(e),n=r.filter(e=>e.date===t).length;return{date:`${e.getMonth()+1}/${e.getDate()}`,value:n}}),xField:`date`,yField:`value`,smooth:!0,point:{size:5,shape:`circle`},yAxis:{min:0,title:{text:`打卡次数`}},color:e.color,tooltip:{formatter:e=>({name:e.date,value:`${e.value} 次`})}},i=R(new Date),a=r.filter(e=>e.date===i).map(e=>({time:(0,un.default)(e.completedAt).format(`HH:mm`),value:1})).sort((e,t)=>e.time.localeCompare(t.time)),o={data:a,xField:`time`,yField:`value`,smooth:!0,point:{size:5,shape:`circle`},yAxis:{min:0,max:1,tickCount:2,label:{formatter:e=>e===1?`打卡`:``}},color:e.color,tooltip:{formatter:e=>({name:e.time,value:`打卡`})}},s=[];for(let e=0;e<n.length;e+=7){let t=n.slice(e,e+7),i=`第${Math.floor(e/7)+1}周`,a=t.reduce((e,t)=>{let n=R(t);return e+r.filter(e=>e.date===n).length},0);s.push({week:i,value:a})}let c={data:s,xField:`week`,yField:`value`,label:{position:`top`,formatter:e=>`${e.value||0} 次`},color:e.color,yAxis:{min:0,title:{text:`打卡次数`}},tooltip:{formatter:e=>({name:e.week,value:`${e.value||0} 次`})}};return(0,N.jsx)(`div`,{className:`time-habit-charts`,children:(0,N.jsxs)(k,{className:`time-habit-charts__card`,children:[(0,N.jsx)(`div`,{className:`time-habit-charts__header`,children:(0,N.jsxs)(dn,{level:3,children:[e.name,` - 打卡统计`]})}),(0,N.jsxs)(`div`,{className:`time-habit-charts__content`,children:[a.length>0&&(0,N.jsxs)(`div`,{className:`time-habit-charts__section`,children:[(0,N.jsx)(dn,{level:4,children:`今日打卡时间分布`}),(0,N.jsx)(Me,{...o,height:200})]}),(0,N.jsxs)(`div`,{className:`time-habit-charts__section`,children:[(0,N.jsx)(dn,{level:4,children:`每日打卡次数`}),(0,N.jsx)(Me,{...t,height:200})]}),(0,N.jsxs)(`div`,{className:`time-habit-charts__section`,children:[(0,N.jsx)(dn,{level:4,children:`每周打卡统计`}),(0,N.jsx)(Se,{...c,height:200})]})]})]})})}let i={data:n.map(e=>{let t=R(e),n=r.some(e=>e.date===t);return{date:`${e.getMonth()+1}/${e.getDate()}`,value:n?1:0,type:`完成状态`}}),xField:`date`,yField:`value`,seriesField:`type`,smooth:!0,point:{size:5,shape:`circle`},yAxis:{min:0,max:1,tickCount:2,label:{formatter:e=>e===1?`完成`:`未完成`}},color:e.color,tooltip:{formatter:e=>({name:e.date,value:e.value===1?`已完成`:`未完成`})}},a={data:n.map(e=>{let t=r.filter(t=>new Date(t.date)<=e).length;return{date:`${e.getMonth()+1}/${e.getDate()}`,value:t,type:`累计完成`}}),xField:`date`,yField:`value`,seriesField:`type`,smooth:!0,point:{size:5,shape:`circle`},yAxis:{min:0,title:{text:`累计天数`}},color:e.color,tooltip:{formatter:e=>({name:e.date,value:`${e.value} 天`})}},o=[];for(let e=0;e<n.length;e+=7){let t=n.slice(e,e+7),i=`第${Math.floor(e/7)+1}周`,a=t.filter(e=>{let t=R(e);return r.some(e=>e.date===t)}).length;o.push({week:i,value:a})}let s={data:o,xField:`week`,yField:`value`,label:{position:`top`,formatter:e=>`${e.value||0} 天`},color:e.color,yAxis:{min:0,max:7,title:{text:`完成天数`}},tooltip:{formatter:e=>({name:e.week,value:`${e.value||0} 天`})}};return(0,N.jsx)(`div`,{className:`time-habit-charts`,children:(0,N.jsxs)(k,{className:`time-habit-charts__card`,children:[(0,N.jsx)(`div`,{className:`time-habit-charts__header`,children:(0,N.jsxs)(dn,{level:3,children:[e.name,` - 进度图表`]})}),(0,N.jsxs)(`div`,{className:`time-habit-charts__content`,children:[(0,N.jsxs)(`div`,{className:`time-habit-charts__section`,children:[(0,N.jsx)(dn,{level:4,children:`每日完成状态`}),(0,N.jsx)(Me,{...i,height:200})]}),(0,N.jsxs)(`div`,{className:`time-habit-charts__section`,children:[(0,N.jsx)(dn,{level:4,children:`累计完成天数`}),(0,N.jsx)(Me,{...a,height:200})]}),(0,N.jsxs)(`div`,{className:`time-habit-charts__section`,children:[(0,N.jsx)(dn,{level:4,children:`每周完成统计`}),(0,N.jsx)(Se,{...s,height:200})]})]})]})})},{Sider:pn,Content:mn}=y,hn=()=>{let[e,t]=(0,M.useState)([]),[n,r]=(0,M.useState)([]),[i,a]=(0,M.useState)(null),[o,c]=(0,M.useState)(null),[l,u]=(0,M.useState)(null),[d,f]=(0,M.useState)(null),[p,m]=(0,M.useState)([]),[h,g]=(0,M.useState)(`daily`),_=(0,M.useCallback)(async()=>{try{let e=await L.getAllHabits();t(e),e.length>0&&!i&&a(e[0].id)}catch{s.error(`加载习惯数据失败`)}},[i]),v=(0,M.useCallback)(async()=>{try{let e=await L.getAllTimeHabits();r(e),e.length>0&&!l&&u(e[0].id)}catch{s.error(`加载时段习惯数据失败`)}},[l]),b=(0,M.useCallback)(async()=>{try{m(await L.getAllTimeHabitRecords())}catch{s.error(`加载时段习惯记录失败`)}},[]),x=(0,M.useCallback)(async e=>{try{let t=await L.getHabit(e);if(!t)return null;let n=await L.getHabitRecordsByHabit(e),r=n.filter(e=>e.completed).length,i=n.length>0?r/n.length*100:0;return{...t,records:n,completedDays:r,completionRate:i}}catch{return s.error(`加载习惯记录失败`),null}},[]),S=(0,M.useCallback)(async e=>{try{let t=await L.getTimeHabit(e);if(!t)return null;let n=await L.getTimeHabitRecordsByHabit(e),r=0,i=0;if(t.intervalMinutes){r=n.length;let e=new Date(t.startDate),a=t.endDate?new Date(t.endDate):new Date,o=(Math.ceil((a.getTime()-e.getTime())/(1e3*60*60*24))+1)*Math.floor(1440/t.intervalMinutes);i=o>0?r/o*100:0}else{r=new Set(n.map(e=>e.date)).size;let e=new Date(t.startDate),a=t.endDate?new Date(t.endDate):new Date,o=Math.ceil((a.getTime()-e.getTime())/(1e3*60*60*24))+1,s=0;for(let n=0;n<o;n++){let r=new Date(e);r.setDate(r.getDate()+n);let i=r.getDay();switch(t.frequency){case`daily`:s++;break;case`weekdays`:i>=1&&i<=5&&s++;break;case`weekends`:(i===0||i===6)&&s++;break;case`custom`:t.weekdays?.includes(i)&&s++;break;case`interval`:s++;break}}i=s>0?r/s*100:0}return{...t,records:n,completedDays:r,completionRate:i}}catch{return s.error(`加载时段习惯记录失败`),null}},[]);(0,M.useEffect)(()=>{i?x(i).then(c):c(null)},[i,x]),(0,M.useEffect)(()=>{l?S(l).then(f):f(null)},[l,S]);let ee=(0,M.useCallback)(async e=>{t(e)},[]),C=(0,M.useCallback)(async e=>{r(e)},[]),te=(0,M.useCallback)(async e=>{a(e),c(e?await x(e):null)},[x]),ne=(0,M.useCallback)(async e=>{u(e),f(e?await S(e):null)},[S]),re=(0,M.useCallback)(async e=>{if(i)try{let t=e.toISOString().split(`T`)[0],n=(await L.getHabitRecordsByHabit(i)).find(e=>e.date===t);if(n)await L.deleteHabitRecord(n.id),s.success(`记录已取消`);else{let e={id:`${i}-${t}`,habitId:i,date:t,completed:!0};await L.addHabitRecord(e),s.success(`记录已添加`)}await _(),i&&c(await x(i))}catch{s.error(`操作失败`)}},[i,_,x]),ie=(0,M.useCallback)(async()=>{await _(),await v()},[_,v]),ae=(0,M.useCallback)(async()=>{await b(),l&&f(await S(l))},[b,S,l]);return(0,M.useEffect)(()=>{_(),v(),b()},[_,v,b]),(0,N.jsxs)(y,{className:`habit-tracker`,children:[(0,N.jsx)(Mt,{title:`习惯追踪器`}),(0,N.jsxs)(y,{children:[(0,N.jsx)(pn,{width:320,className:`habit-tracker__sider`,children:(0,N.jsx)(Ce,{activeKey:h,onChange:g,className:`habit-tracker__tabs`,items:[{key:`daily`,label:`日常习惯`,children:(0,N.jsx)(Kt,{habits:e,selectedHabitId:i,onHabitsChange:ee,onHabitSelect:te})},{key:`time`,label:`时段习惯`,children:(0,N.jsx)(rn,{timeHabits:n,selectedTimeHabitId:l,onTimeHabitsChange:C,onTimeHabitSelect:ne})}]})}),(0,N.jsx)(y,{className:`habit-tracker__main`,children:(0,N.jsxs)(mn,{className:`habit-tracker__content`,children:[(0,N.jsx)(`div`,{className:`habit-tracker__data-manager`,children:(0,N.jsx)($t,{onDataImport:ie})}),h===`daily`?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(`div`,{className:`habit-tracker__calendar`,children:o?(0,N.jsx)(Yt,{habit:o,onToggleRecord:re}):(0,N.jsx)(`div`,{className:`habit-tracker__empty`,children:`请选择或创建一个习惯`})}),(0,N.jsx)(`div`,{className:`habit-tracker__charts`,children:o?(0,N.jsx)(Zt,{habit:o},`${i}-${o.records.length}`):(0,N.jsx)(`div`,{className:`habit-tracker__empty`,children:`请选择一个习惯查看图表`})})]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(`div`,{className:`habit-tracker__timeline`,children:d?(0,N.jsx)(ln,{habit:d,onRecordChange:ae}):(0,N.jsx)(`div`,{className:`habit-tracker__empty`,children:`请选择或创建一个时段习惯`})}),(0,N.jsx)(`div`,{className:`habit-tracker__charts`,children:d?(0,N.jsx)(fn,{habit:d,records:p},`${l}-${p.length}`):(0,N.jsx)(`div`,{className:`habit-tracker__empty`,children:`请选择一个时段习惯查看图表`})})]})]})})]})]})};const gn=[{id:`protanopia`,name:`红色盲`,description:`无法感知红色`},{id:`deuteranopia`,name:`绿色盲`,description:`无法感知绿色`},{id:`tritanopia`,name:`蓝色盲`,description:`无法感知蓝色`},{id:`achromatopsia`,name:`全色盲`,description:`完全无法感知颜色`}],_n=[{name:`日落`,type:`linear`,angle:180,colorStops:[{id:`1`,color:`#ff6b6b`,position:0},{id:`2`,color:`#feca57`,position:50},{id:`3`,color:`#ff9ff3`,position:100}]},{name:`海洋`,type:`linear`,angle:135,colorStops:[{id:`1`,color:`#667eea`,position:0},{id:`2`,color:`#764ba2`,position:100}]},{name:`森林`,type:`linear`,angle:90,colorStops:[{id:`1`,color:`#11998e`,position:0},{id:`2`,color:`#38ef7d`,position:100}]},{name:`极光`,type:`linear`,angle:45,colorStops:[{id:`1`,color:`#00c6ff`,position:0},{id:`2`,color:`#0072ff`,position:100}]},{name:`彩虹`,type:`linear`,angle:90,colorStops:[{id:`1`,color:`#ff0000`,position:0},{id:`2`,color:`#ff7f00`,position:16},{id:`3`,color:`#ffff00`,position:33},{id:`4`,color:`#00ff00`,position:50},{id:`5`,color:`#0000ff`,position:66},{id:`6`,color:`#4b0082`,position:83},{id:`7`,color:`#9400d3`,position:100}]},{name:`星空`,type:`radial`,angle:0,colorStops:[{id:`1`,color:`#0f0c29`,position:0},{id:`2`,color:`#302b63`,position:50},{id:`3`,color:`#24243e`,position:100}]},{name:`火焰`,type:`linear`,angle:180,colorStops:[{id:`1`,color:`#f12711`,position:0},{id:`2`,color:`#f5af19`,position:100}]},{name:`薄荷`,type:`linear`,angle:135,colorStops:[{id:`1`,color:`#a8edea`,position:0},{id:`2`,color:`#fed6e3`,position:100}]}];function vn(e){let t=e.replace(`#`,``);(t.length===3||t.length===4)&&(t=t.split(``).map(e=>e+e).join(``));let n=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(t);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),a:n[4]?parseInt(n[4],16)/255:void 0}:{r:0,g:0,b:0}}function H(e,t,n,r){let i=[e,t,n].map(e=>{let t=Math.round(e).toString(16);return t.length===1?`0`+t:t}).join(``);if(r!==void 0){let e=Math.round(r*255).toString(16),t=e.length===1?`0`+e:e;return`#`+i+t}return`#`+i}function yn(e,t,n,r){e/=255,t/=255,n/=255;let i=Math.max(e,t,n),a=Math.min(e,t,n),o=0,s=0,c=(i+a)/2;if(i!==a){let r=i-a;switch(s=c>.5?r/(2-i-a):r/(i+a),i){case e:o=((t-n)/r+(t<n?6:0))/6;break;case t:o=((n-e)/r+2)/6;break;case n:o=((e-t)/r+4)/6;break}}return{h:o*360,s:s*100,l:c*100,a:r}}function bn(e,t,n,r){e/=360,t/=100,n/=100;let i,a,o;if(t===0)i=a=o=n;else{let r=(e,t,n)=>(n<0&&(n+=1),n>1&&--n,n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e),s=n<.5?n*(1+t):n+t-n*t,c=2*n-s;i=r(c,s,e+1/3),a=r(c,s,e),o=r(c,s,e-1/3)}return{r:Math.round(i*255),g:Math.round(a*255),b:Math.round(o*255),a:r}}function xn(e,t,n){let[r,i,a]=[e,t,n].map(e=>(e/=255,e<=.03928?e/12.92:((e+.055)/1.055)**2.4));return .2126*r+.7152*i+.0722*a}function Sn(e,t){let n=vn(e),r=vn(t),i=xn(n.r,n.g,n.b),a=xn(r.r,r.g,r.b),o=Math.max(i,a),s=Math.min(i,a);return(o+.05)/(s+.05)}function Cn(e){return{ratio:e,levelAA:e>=4.5,levelAAA:e>=7,levelAALarge:e>=3,levelAAALarge:e>=4.5}}function wn(e,t){let n=vn(e),r=n.r,i=n.g,a=n.b,o=r,s=i,c=a;switch(t){case`protanopia`:r=.567*o+.433*s+0*c,i=.558*o+.442*s+0*c,a=0*o+.242*s+.758*c;break;case`deuteranopia`:r=.625*o+.375*s+0*c,i=.7*o+.3*s+0*c,a=0*o+.3*s+.7*c;break;case`tritanopia`:r=.95*o+.05*s+0*c,i=0*o+.433*s+.567*c,a=0*o+.475*s+.525*c;break;case`achromatopsia`:let e=.299*o+.587*s+.114*c;r=e,i=e,a=e;break;default:break}return H(Math.min(255,Math.max(0,r)),Math.min(255,Math.max(0,i)),Math.min(255,Math.max(0,a)))}function Tn(e){let t=vn(e),n=yn(t.r,t.g,t.b),r=bn((n.h+180)%360,n.s,n.l);return[H(r.r,r.g,r.b)]}function En(e){let t=vn(e),n=yn(t.r,t.g,t.b),r=bn((n.h-30+360)%360,n.s,n.l),i=bn((n.h+30)%360,n.s,n.l);return[H(r.r,r.g,r.b),H(i.r,i.g,i.b)]}function Dn(e){let t=vn(e),n=yn(t.r,t.g,t.b),r=bn((n.h+120)%360,n.s,n.l),i=bn((n.h+240)%360,n.s,n.l);return[H(r.r,r.g,r.b),H(i.r,i.g,i.b)]}function On(e){let t=vn(e),n=yn(t.r,t.g,t.b),r=[];for(let e=1;e<=4;e++){let t=Math.max(0,Math.min(100,n.l+e*10)),i=bn(n.h,n.s,t);r.push(H(i.r,i.g,i.b))}for(let e=1;e<=4;e++){let t=Math.max(0,Math.min(100,n.l-e*10)),i=bn(n.h,n.s,t);r.push(H(i.r,i.g,i.b))}return r}function kn(e){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{8}|[A-Fa-f0-9]{3}|[A-Fa-f0-9]{4})$/.test(e)}function An(e){return e>=7?`AAA`:e>=4.5?`AA`:e>=3?`AA Large`:`Fail`}function U(e){let t=vn(e);return t.a===void 0?`rgb(${t.r}, ${t.g}, ${t.b})`:`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a.toFixed(2)})`}function jn(e){let t=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*([\d.]+))?\s*\)$/i.exec(e);if(t){let e=parseInt(t[1],10),n=parseInt(t[2],10),r=parseInt(t[3],10),i=t[4]?parseFloat(t[4]):void 0;if(e>=0&&e<=255&&n>=0&&n<=255&&r>=0&&r<=255)return i!==void 0&&(i<0||i>1)?null:{r:e,g:n,b:r,a:i}}return null}function Mn(e){let t=/^hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%(?:\s*,\s*([\d.]+))?\s*\)$/i.exec(e);if(t){let e=parseInt(t[1],10),n=parseInt(t[2],10),r=parseInt(t[3],10),i=t[4]?parseFloat(t[4]):void 0;if(e>=0&&e<=360&&n>=0&&n<=100&&r>=0&&r<=100)return i!==void 0&&(i<0||i>1)?null:{h:e,s:n,l:r,a:i}}return null}function Nn(e){let t=e.trim();if(!t)return{success:!1,error:`输入为空`};if(kn(t))return{success:!0,color:t,format:`HEX`};let n=jn(t);if(n)return{success:!0,color:H(n.r,n.g,n.b,n.a),format:n.a===void 0?`RGB`:`RGBA`};let r=Mn(t);if(r){let e=bn(r.h,r.s,r.l,r.a);return{success:!0,color:H(e.r,e.g,e.b,e.a),format:r.a===void 0?`HSL`:`HSLA`}}return{success:!1,error:`不支持的颜色格式，请使用 HEX (#RRGGBB)、RGB (rgb(r,g,b)) 或 HSL (hsl(h,s%,l%)) 格式`}}var{Text:Pn}=b,{Option:Fn}=O,In=()=>{let[e,n]=(0,M.useState)(`linear`),[r,a]=(0,M.useState)(90),[o,c]=(0,M.useState)([{id:`1`,color:`#667eea`,position:0},{id:`2`,color:`#764ba2`,position:100}]),[l,u]=(0,M.useState)(null),d=()=>{let e=Date.now().toString(),t=Math.round(Math.random()*100),n=`#`+Math.floor(Math.random()*16777215).toString(16).padStart(6,`0`);c([...o,{id:e,color:n,position:t}].sort((e,t)=>e.position-t.position))},p=e=>{if(o.length<=2){s.warning(`至少需要保留两个颜色`);return}c(o.filter(t=>t.id!==e))},m=(e,t,n)=>{c(o.map(r=>r.id===e?{...r,[t]:n}:r).sort((e,t)=>e.position-t.position))},h=e=>{n(e.type),a(e.angle),c(e.colorStops),s.success(`已应用预设: ${e.name}`)},g=()=>{let e=Math.floor(Math.random()*4)+2,t=[],r=new Set;for(let n=0;n<e;n++){let e;do e=Math.round(Math.random()*100);while(r.has(e));r.add(e),t.push({id:Date.now().toString()+n,color:`#`+Math.floor(Math.random()*16777215).toString(16).padStart(6,`0`),position:e})}let i=[`linear`,`radial`,`conic`];n(i[Math.floor(Math.random()*i.length)]),a(Math.floor(Math.random()*360)),c(t.sort((e,t)=>e.position-t.position)),s.success(`已生成随机渐变`)},_=()=>{let t=[...o].sort((e,t)=>e.position-t.position).map(e=>`${U(e.color)} ${e.position}%`).join(`, `);switch(e){case`linear`:return`linear-gradient(${r}deg, ${t})`;case`radial`:return`radial-gradient(circle, ${t})`;case`conic`:return`conic-gradient(from ${r}deg, ${t})`;default:return``}},v=()=>{let t=[...o].sort((e,t)=>e.position-t.position),n=`gradient-${e}-${t.map(e=>e.color+e.position).join(`-`)}`,i=``,a=``;switch(e){case`linear`:i=`<linearGradient id="${n}" x1="${Math.round(50+50*Math.cos((r-90)*Math.PI/180))}%" y1="${Math.round(50+50*Math.sin((r-90)*Math.PI/180))}%" x2="${Math.round(50+50*Math.cos((r+90)*Math.PI/180))}%" y2="${Math.round(50+50*Math.sin((r+90)*Math.PI/180))}%">`;break;case`radial`:i=`<radialGradient id="${n}">`;break;case`conic`:i=`<linearGradient id="${n}" gradientTransform="rotate(${r})">`;break}let s=t.map(e=>`  <stop offset="${e.position}%" stop-color="${U(e.color)}" />`).join(`
`);return a=`<rect width="100%" height="100%" fill="url(#${n})" />`,`<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
  <defs>
${i}
${s}
</${e===`radial`?`radialGradient`:`linearGradient`}>
  </defs>
  ${a}
</svg>`},y=(e,t)=>{navigator.clipboard.writeText(e),u(t),s.success(`已复制到剪贴板`),setTimeout(()=>u(null),2e3)},b=(e,t)=>(0,N.jsx)(k,{size:`small`,className:`color-stop-card`,children:(0,N.jsxs)(f,{direction:`vertical`,style:{width:`100%`},children:[(0,N.jsxs)(`div`,{className:`color-stop-header`,children:[(0,N.jsxs)(Pn,{strong:!0,children:[`颜色 `,t+1]}),o.length>2&&(0,N.jsx)(w,{type:`text`,danger:!0,size:`small`,icon:(0,N.jsx)(x,{}),onClick:()=>p(e.id)})]}),(0,N.jsxs)(`div`,{className:`color-stop-controls`,children:[(0,N.jsxs)(`div`,{className:`color-picker-wrapper`,children:[(0,N.jsx)(ne,{value:e.color,onChange:t=>m(e.id,`color`,t.toHex()),className:`color-input`}),(0,N.jsx)(j,{value:e.color,onChange:t=>m(e.id,`color`,t.target.value),placeholder:`#000000`,style:{width:100}})]}),(0,N.jsxs)(`div`,{className:`position-slider`,children:[(0,N.jsxs)(Pn,{style:{margin:`5px 0`},children:[`位置: `,e.position,`%`]}),(0,N.jsx)(te,{style:{flex:1},min:0,max:100,value:e.position,onChange:t=>m(e.id,`position`,t)})]})]})]})},e.id);return(0,N.jsx)(`div`,{className:`gradient-generator`,children:(0,N.jsx)(k,{title:`渐变生成实验室`,className:`gradient-generator-card`,children:(0,N.jsxs)(E,{gutter:[24,24],children:[(0,N.jsxs)(t,{xs:24,lg:12,children:[(0,N.jsx)(`div`,{className:`gradient-form`,children:(0,N.jsxs)(f,{direction:`vertical`,size:`large`,style:{width:`100%`},children:[(0,N.jsxs)(`div`,{className:`gradient-type-selector`,children:[(0,N.jsx)(Pn,{strong:!0,children:`渐变类型`}),(0,N.jsxs)(O,{value:e,onChange:n,style:{width:`100%`},children:[(0,N.jsx)(Fn,{value:`linear`,children:`线性渐变`}),(0,N.jsx)(Fn,{value:`radial`,children:`径向渐变`}),(0,N.jsx)(Fn,{value:`conic`,children:`圆锥渐变`})]})]}),e!==`radial`&&(0,N.jsxs)(`div`,{className:`angle-control`,children:[(0,N.jsxs)(Pn,{strong:!0,children:[`角度: `,r,`°`]}),(0,N.jsx)(te,{min:0,max:360,value:r,onChange:a})]}),(0,N.jsxs)(`div`,{className:`color-stops-section`,children:[(0,N.jsxs)(`div`,{className:`color-stops-header`,children:[(0,N.jsx)(Pn,{strong:!0,children:`颜色停止点`}),(0,N.jsx)(w,{type:`primary`,size:`small`,icon:(0,N.jsx)(Ae,{}),onClick:d,children:`添加颜色`})]}),(0,N.jsx)(f,{direction:`vertical`,size:`middle`,style:{width:`100%`},children:o.map((e,t)=>b(e,t))})]})]})}),(0,N.jsxs)(`div`,{className:`gradient-presets`,children:[(0,N.jsxs)(`div`,{className:`presets-header`,children:[(0,N.jsx)(Pn,{strong:!0,children:`预设模板`}),(0,N.jsx)(w,{type:`primary`,icon:(0,N.jsx)(_e,{}),onClick:g,children:`随机渐变`})]}),(0,N.jsx)(`div`,{className:`presets-grid`,children:_n.map(e=>(0,N.jsxs)(`div`,{className:`preset-item`,onClick:()=>h(e),children:[(0,N.jsx)(`div`,{className:`preset-preview`,style:{background:e.type===`linear`?`linear-gradient(${e.angle}deg, ${e.colorStops.map(e=>`${U(e.color)} ${e.position}%`).join(`, `)})`:e.type===`radial`?`radial-gradient(circle, ${e.colorStops.map(e=>`${U(e.color)} ${e.position}%`).join(`, `)})`:`conic-gradient(from ${e.angle}deg, ${e.colorStops.map(e=>`${U(e.color)} ${e.position}%`).join(`, `)})`}}),(0,N.jsx)(Pn,{className:`preset-name`,children:e.name})]},e.name))})]})]}),(0,N.jsx)(t,{xs:24,lg:12,children:(0,N.jsxs)(f,{direction:`vertical`,size:`large`,style:{width:`100%`},children:[(0,N.jsxs)(`div`,{className:`gradient-preview-section`,children:[(0,N.jsx)(Pn,{strong:!0,children:`预览`}),(0,N.jsx)(`div`,{className:`gradient-preview`,style:{background:_()}})]}),(0,N.jsx)(Ce,{defaultActiveKey:`css`,items:[{key:`css`,label:`CSS 代码`,children:(0,N.jsxs)(`div`,{className:`code-output`,children:[(0,N.jsx)(j.TextArea,{value:_(),readOnly:!0,autoSize:{minRows:3,maxRows:6},className:`code-textarea`}),(0,N.jsx)(w,{type:`primary`,icon:l===`css`?(0,N.jsx)(D,{}):(0,N.jsx)(i,{}),onClick:()=>y(_(),`css`),children:`复制 CSS`})]})},{key:`svg`,label:`SVG 代码`,children:(0,N.jsxs)(`div`,{className:`code-output`,children:[(0,N.jsx)(j.TextArea,{value:v(),readOnly:!0,autoSize:{minRows:8,maxRows:12},className:`code-textarea`}),(0,N.jsx)(w,{type:`primary`,icon:l===`svg`?(0,N.jsx)(D,{}):(0,N.jsx)(i,{}),onClick:()=>y(v(),`svg`),children:`复制 SVG`})]})}]})]})})]})})})},{Text:Ln}=b,Rn=({foregroundColor:e,backgroundColor:t,onColorChange:n,onHexInput:r,onSwapColors:i})=>(0,N.jsx)(k,{title:`颜色选择`,className:`color-selection-card`,children:(0,N.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:24},children:[(0,N.jsxs)(`div`,{className:`color-picker-item`,children:[(0,N.jsx)(Ln,{strong:!0,children:`前景色`}),(0,N.jsx)(ne,{value:e,onChange:e=>n(e,`foreground`),showText:!0,size:`large`,className:`color-picker-box`}),(0,N.jsx)(j,{value:e,onChange:e=>r(e.target.value,`foreground`),placeholder:`#000000 或 rgb(0,0,0) 或 hsl(0,0%,0%)`,size:`large`,className:`color-picker-input`})]}),(0,N.jsx)(w,{type:`primary`,icon:(0,N.jsx)(S,{}),onClick:i,block:!0,children:`交换颜色`}),(0,N.jsxs)(`div`,{className:`color-picker-item`,children:[(0,N.jsx)(Ln,{strong:!0,children:`背景色`}),(0,N.jsx)(ne,{value:t,onChange:e=>n(e,`background`),showText:!0,size:`large`,className:`color-picker-box`}),(0,N.jsx)(j,{value:t,onChange:e=>r(e.target.value,`background`),placeholder:`#FFFFFF 或 rgb(255,255,255) 或 hsl(0,0%,100%)`,size:`large`,className:`color-picker-input`})]})]})}),{Text:zn}=b,Bn=({color:e,label:t,copied:n,onCopy:r})=>{let a=vn(e),o=yn(a.r,a.g,a.b,a.a),s=a.a===void 0?`rgb(${a.r}, ${a.g}, ${a.b})`:`rgba(${a.r}, ${a.g}, ${a.b}, ${a.a.toFixed(2)})`,c=o.a===void 0?`hsl(${Math.round(o.h)}, ${Math.round(o.s)}%, ${Math.round(o.l)}%)`:`hsla(${Math.round(o.h)}, ${Math.round(o.s)}%, ${Math.round(o.l)}%, ${o.a.toFixed(2)})`;return(0,N.jsxs)(k,{className:`color-info-card`,children:[(0,N.jsxs)(`div`,{className:`color-info-header`,children:[(0,N.jsx)(zn,{strong:!0,children:t}),(0,N.jsx)(`div`,{className:`color-preview`,style:{backgroundColor:U(e)}})]}),(0,N.jsxs)(f,{direction:`vertical`,size:`small`,style:{width:`100%`},children:[(0,N.jsxs)(`div`,{className:`color-value`,children:[(0,N.jsx)(zn,{type:`secondary`,children:`HEX:`}),(0,N.jsxs)(f,{children:[(0,N.jsx)(zn,{code:!0,children:e}),(0,N.jsx)(w,{type:`text`,size:`small`,icon:n===e?(0,N.jsx)(D,{}):(0,N.jsx)(i,{}),onClick:()=>r(e)})]})]}),(0,N.jsxs)(`div`,{className:`color-value`,children:[(0,N.jsx)(zn,{type:`secondary`,children:`RGB:`}),(0,N.jsxs)(f,{children:[(0,N.jsx)(zn,{code:!0,children:s}),(0,N.jsx)(w,{type:`text`,size:`small`,icon:n===s?(0,N.jsx)(D,{}):(0,N.jsx)(i,{}),onClick:()=>r(s)})]})]}),(0,N.jsxs)(`div`,{className:`color-value`,children:[(0,N.jsx)(zn,{type:`secondary`,children:`HSL:`}),(0,N.jsxs)(f,{children:[(0,N.jsx)(zn,{code:!0,children:c}),(0,N.jsx)(w,{type:`text`,size:`small`,icon:n===c?(0,N.jsx)(D,{}):(0,N.jsx)(i,{}),onClick:()=>r(c)})]})]})]})]})},{Title:Vn,Text:W}=b,Hn=({foregroundColor:e,backgroundColor:t})=>{let n=Sn(e,t),r=Cn(n),i=An(n);return(0,N.jsxs)(k,{title:`对比度分析`,className:`contrast-card`,children:[(0,N.jsxs)(`div`,{className:`contrast-preview`,style:{backgroundColor:U(t)},children:[(0,N.jsx)(W,{style:{fontSize:`24px`,fontWeight:`bold`,color:U(e)},children:`示例文本 Sample Text`}),(0,N.jsx)(W,{style:{fontSize:`18px`,color:U(e)},children:`这是普通大小的文本，用于测试对比度`}),(0,N.jsx)(W,{style:{fontSize:`14px`,color:U(e)},children:`这是小号文本，用于测试对比度`}),(0,N.jsx)(W,{style:{fontSize:`32px`,fontWeight:`bold`,color:U(e)},children:`大号文本 Large Text`})]}),(0,N.jsx)(v,{}),(0,N.jsxs)(`div`,{className:`contrast-ratio`,children:[(0,N.jsx)(W,{strong:!0,children:`对比度比率: `}),(0,N.jsxs)(W,{style:{fontSize:`28px`,fontWeight:`bold`,color:r.levelAAA?`#52c41a`:r.levelAA?`#faad14`:`#ff4d4f`},children:[n.toFixed(2),`:1`]}),(0,N.jsx)(a,{color:r.levelAAA?`success`:r.levelAA?`warning`:`error`,children:i})]}),(0,N.jsx)(v,{}),(0,N.jsxs)(`div`,{className:`wcag-standards`,children:[(0,N.jsx)(Vn,{level:5,children:`WCAG 标准`}),(0,N.jsxs)(f,{direction:`vertical`,size:`small`,style:{width:`100%`},children:[(0,N.jsxs)(`div`,{className:`wcag-item`,children:[(0,N.jsx)(W,{children:`普通文本 (AA): `}),r.levelAA?(0,N.jsx)(a,{color:`success`,icon:(0,N.jsx)(D,{}),children:`通过 (≥4.5:1)`}):(0,N.jsx)(a,{color:`error`,children:`未通过`})]}),(0,N.jsxs)(`div`,{className:`wcag-item`,children:[(0,N.jsx)(W,{children:`普通文本 (AAA): `}),r.levelAAA?(0,N.jsx)(a,{color:`success`,icon:(0,N.jsx)(D,{}),children:`通过 (≥7:1)`}):(0,N.jsx)(a,{color:`error`,children:`未通过`})]}),(0,N.jsxs)(`div`,{className:`wcag-item`,children:[(0,N.jsx)(W,{children:`大号文本 (AA): `}),r.levelAALarge?(0,N.jsx)(a,{color:`success`,icon:(0,N.jsx)(D,{}),children:`通过 (≥3:1)`}):(0,N.jsx)(a,{color:`error`,children:`未通过`})]}),(0,N.jsxs)(`div`,{className:`wcag-item`,children:[(0,N.jsx)(W,{children:`大号文本 (AAA): `}),r.levelAAALarge?(0,N.jsx)(a,{color:`success`,icon:(0,N.jsx)(D,{}),children:`通过 (≥4.5:1)`}):(0,N.jsx)(a,{color:`error`,children:`未通过`})]})]})]})]})},{Text:Un}=b,Wn=({foregroundColor:e,backgroundColor:n})=>(0,N.jsxs)(k,{title:`色盲模拟`,className:`colorblind-card`,children:[(0,N.jsx)(T,{message:`色盲友好度检测`,description:`查看您的颜色在不同色盲类型下的显示效果`,type:`info`,showIcon:!0,style:{marginBottom:16}}),(0,N.jsx)(E,{gutter:[16,16],children:gn.map(r=>(0,N.jsx)(t,{xs:24,sm:12,children:(0,N.jsxs)(k,{size:`small`,className:`colorblind-type-card`,children:[(0,N.jsx)(Un,{strong:!0,children:r.name}),(0,N.jsx)(Un,{type:`secondary`,style:{display:`block`,marginBottom:8},children:r.description}),(0,N.jsx)(`div`,{className:`colorblind-preview`,style:{backgroundColor:U(wn(n,r.id))},children:(0,N.jsx)(Un,{style:{color:U(wn(e,r.id))},children:`示例文本 Sample Text`})})]})},r.id))})]}),{Text:Gn}=b,Kn=({foregroundColor:e,onCopy:n})=>{let r=Tn(e),i=En(e),a=Dn(e),o=On(e),s=(t,r)=>(0,N.jsxs)(k,{size:`small`,className:`harmony-card`,children:[(0,N.jsx)(Gn,{strong:!0,children:t}),(0,N.jsxs)(`div`,{className:`color-palette`,children:[(0,N.jsx)(`div`,{className:`color-swatch`,style:{backgroundColor:U(e)},title:`原色`}),r.map((e,t)=>(0,N.jsx)(`div`,{className:`color-swatch`,style:{backgroundColor:U(e)},title:e,onClick:()=>n(e)},t))]})]});return(0,N.jsx)(k,{title:`颜色搭配推荐`,className:`harmonies-card`,children:(0,N.jsxs)(E,{gutter:[16,16],children:[(0,N.jsx)(t,{xs:24,md:12,children:s(`互补色`,r)}),(0,N.jsx)(t,{xs:24,md:12,children:s(`类比色`,i)}),(0,N.jsx)(t,{xs:24,md:12,children:s(`三角色`,a)}),(0,N.jsx)(t,{xs:24,md:12,children:s(`单色系`,o)})]})})},{Text:qn}=b,Jn=({open:e,detectedColor:t,detectedFormat:n,onApply:r,onCancel:i})=>(0,N.jsx)(_,{title:`检测到剪贴板颜色`,open:e,onCancel:i,footer:null,width:400,children:(0,N.jsxs)(f,{direction:`vertical`,size:`large`,style:{width:`100%`},children:[(0,N.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,N.jsx)(`div`,{style:{width:100,height:100,backgroundColor:t||`#000000`,border:`2px solid #d9d9d9`,borderRadius:8,margin:`0 auto 16px`}}),(0,N.jsx)(qn,{code:!0,style:{fontSize:16},children:t}),(0,N.jsx)(`div`,{style:{marginTop:8},children:(0,N.jsxs)(qn,{type:`secondary`,children:[`格式: `,n]})})]}),(0,N.jsxs)(f,{direction:`vertical`,style:{width:`100%`},children:[(0,N.jsx)(w,{type:`primary`,size:`large`,onClick:()=>r(`foreground`),block:!0,children:`应用为前景色`}),(0,N.jsx)(w,{size:`large`,onClick:()=>r(`background`),block:!0,children:`应用为背景色`})]})]})}),{Content:Yn}=y,Xn=()=>{let[e,t]=(0,M.useState)(`000000`),[n,i]=(0,M.useState)(`FFFFFF`),[a,o]=(0,M.useState)(null),[c,l]=(0,M.useState)(!1),[u,d]=(0,M.useState)(null),[p,m]=(0,M.useState)(null),h=(0,M.useRef)(null),g=(0,M.useRef)(new Set);(0,M.useEffect)(()=>{(()=>{try{let e=localStorage.getItem(`color-calculator-prompted-colors`);e&&(g.current=new Set(JSON.parse(e)))}catch{console.log(`无法加载已提示的颜色记录`)}})();let e=setInterval(async()=>{try{let e=Nn(await navigator.clipboard.readText());if(e.success&&e.color){let t=e.color.toLowerCase();if(h.current!==t&&(h.current=t,!g.current.has(t))){g.current.add(t);try{localStorage.setItem(`color-calculator-prompted-colors`,JSON.stringify(Array.from(g.current)))}catch{console.log(`无法保存已提示的颜色记录`)}d(e.color),m(e.format||`HEX`),l(!0)}}}catch(e){console.log(`无法读取剪贴板`,e)}},2e3);return()=>clearInterval(e)},[]);let _=e=>{if(u){let n=u.replace(`#`,``);e===`foreground`?t(n):i(n),s.success(`已应用${p}颜色到${e===`foreground`?`前景色`:`背景色`}`),l(!1),d(null),m(null)}},v=(e,n)=>{let r=e.toHex();n===`foreground`?t(r):i(r)},b=(e,n)=>{if(!e.trim())return;let r=Nn(e);if(r.success&&r.color){let e=r.color.replace(`#`,``);n===`foreground`?t(e):i(e),s.success(`已应用${r.format}颜色`)}else s.error(r.error||`无效的颜色格式`)},x=()=>{let r=e;t(n),i(r)},S=e=>{navigator.clipboard.writeText(e),o(e),s.success(`已复制到剪贴板`),setTimeout(()=>o(null),2e3)};return(0,N.jsxs)(y,{className:`color-calculator`,children:[(0,N.jsx)(Mt,{title:`颜色计算器`}),(0,N.jsx)(Yn,{className:`color-calculator__content`,children:(0,N.jsxs)(`div`,{style:{display:`flex`,gap:24,flexDirection:`row`,flexWrap:`wrap`},children:[(0,N.jsx)(`div`,{style:{flex:`0 0 33.333%`,minWidth:300},children:(0,N.jsxs)(f,{direction:`vertical`,size:`large`,style:{width:`100%`},children:[(0,N.jsx)(Rn,{foregroundColor:e,backgroundColor:n,onColorChange:v,onHexInput:b,onSwapColors:x}),(0,N.jsx)(Bn,{color:e,label:`前景色`,copied:a,onCopy:S}),(0,N.jsx)(Bn,{color:n,label:`背景色`,copied:a,onCopy:S})]})}),(0,N.jsx)(`div`,{style:{flex:1,minWidth:300},children:(0,N.jsx)(Ce,{defaultActiveKey:`harmonies`,items:[{key:`harmonies`,label:(0,N.jsxs)(`span`,{children:[(0,N.jsx)(r,{}),`颜色搭配`]}),children:(0,N.jsx)(Kn,{foregroundColor:e,onCopy:S})},{key:`colorblind`,label:(0,N.jsxs)(`span`,{children:[(0,N.jsx)(r,{}),`色盲模拟`]}),children:(0,N.jsx)(Wn,{foregroundColor:e,backgroundColor:n})},{key:`contrast`,label:(0,N.jsxs)(`span`,{children:[(0,N.jsx)(r,{}),`对比度分析`]}),children:(0,N.jsx)(Hn,{foregroundColor:e,backgroundColor:n})},{key:`gradient`,label:(0,N.jsxs)(`span`,{children:[(0,N.jsx)(_e,{}),`渐变生成实验室`]}),children:(0,N.jsx)(In,{})}]})})]})}),(0,N.jsx)(Jn,{open:c,detectedColor:u,detectedFormat:p,onApply:_,onCancel:()=>{l(!1),d(null),m(null)}})]})},{Text:Zn}=b,Qn=[{label:`g (全局匹配)`,value:`g`},{label:`i (忽略大小写)`,value:`i`},{label:`m (多行模式)`,value:`m`},{label:`s (点号匹配换行)`,value:`s`},{label:`u (Unicode)`,value:`u`},{label:`y (粘性匹配)`,value:`y`}],$n=({pattern:e,flags:t,onPatternChange:n,onFlagsChange:r,error:i,presets:a,onPresetSelect:o})=>(0,N.jsx)(k,{title:`正则表达式编辑器`,className:`regex-editor`,children:(0,N.jsxs)(f,{direction:`vertical`,size:`large`,style:{width:`100%`},children:[(0,N.jsxs)(`div`,{className:`regex-pattern-section`,children:[(0,N.jsx)(Zn,{strong:!0,children:`正则表达式模式`}),(0,N.jsx)(j,{value:e,onChange:e=>n(e.target.value),placeholder:`输入正则表达式，例如：^\\\\d+$`,size:`large`,className:`regex-pattern-input`,status:i?`error`:void 0}),i&&(0,N.jsx)(T,{message:i,type:`error`,showIcon:!0,style:{marginTop:8}})]}),(0,N.jsxs)(`div`,{className:`regex-flags-section`,children:[(0,N.jsx)(Zn,{strong:!0,children:`标志位`}),(0,N.jsx)(fe.Group,{options:Qn,value:t.split(``),onChange:e=>{r(e.join(``))},className:`regex-flags-checkbox`})]}),a&&a.length>0&&(0,N.jsxs)(`div`,{className:`regex-presets-section`,children:[(0,N.jsx)(Zn,{strong:!0,children:`快速选择预设`}),(0,N.jsx)(O,{placeholder:`选择预设正则表达式`,style:{width:`100%`},options:a.map(e=>({label:e.name,value:e.id})),onChange:e=>{let t=a.find(t=>t.id===e);t&&o&&o(t)},showSearch:!0,filterOption:(e,t)=>(t?.label??``).toLowerCase().includes(e.toLowerCase())})]})]})}),{TextArea:er}=j,{Text:G}=b,tr=({testString:e,onTestStringChange:r,testResult:i})=>{let o=(e,t)=>{if(t.length===0)return(0,N.jsx)(G,{children:e});let n=[],r=0;return t.forEach(t=>{t.index>r&&n.push({text:e.slice(r,t.index),isMatch:!1}),n.push({text:t.match,isMatch:!0}),r=t.index+t.match.length}),r<e.length&&n.push({text:e.slice(r),isMatch:!1}),(0,N.jsx)(`div`,{className:`highlighted-text`,children:n.map((e,t)=>(0,N.jsx)(`span`,{className:e.isMatch?`match-highlight`:`text-normal`,children:e.text},t))})},s=e=>{if(e.length===0)return{totalLength:0,avgLength:0,maxMatch:``,minMatch:``};let t=e.map(e=>e.match.length).reduce((e,t)=>e+t,0),n=Math.round(t/e.length),r=e.reduce((e,t)=>t.match.length>e.match.length?t:e),i=e.reduce((e,t)=>t.match.length<e.match.length?t:e);return{totalLength:t,avgLength:n,maxMatch:r.match,minMatch:i.match}},c=e=>{let t=e.groups.length>0,n=e.groups.filter(e=>e!=null).length;return(0,N.jsx)(`div`,{className:`match-explanation`,children:(0,N.jsxs)(f,{direction:`vertical`,size:`small`,style:{width:`100%`},children:[(0,N.jsxs)(`div`,{className:`explanation-basic`,children:[(0,N.jsx)(ue,{style:{color:`#1890ff`,marginRight:8}}),(0,N.jsxs)(G,{type:`secondary`,children:[`在位置 `,(0,N.jsx)(G,{code:!0,children:e.index}),` 处找到匹配，长度为 `,(0,N.jsx)(G,{code:!0,children:e.match.length}),` 个字符`]})]}),t&&(0,N.jsx)(`div`,{className:`explanation-groups`,children:(0,N.jsxs)(G,{type:`secondary`,children:[`捕获了 `,(0,N.jsx)(G,{code:!0,children:n}),` 个分组`]})})]})})};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(k,{title:`测试字符串`,className:`regex-tester-input`,children:(0,N.jsx)(er,{value:e,onChange:e=>r(e.target.value),placeholder:`输入要测试的字符串...`,rows:6,className:`regex-test-textarea`})}),(0,N.jsx)(k,{title:`匹配结果`,className:`regex-tester-result`,children:i?i.error?(0,N.jsx)(T,{message:`正则表达式错误`,description:i.error,type:`error`,showIcon:!0,icon:(0,N.jsx)(he,{})}):i.matches.length>0?(0,N.jsxs)(f,{direction:`vertical`,style:{width:`100%`},children:[(0,N.jsx)(`div`,{className:`match-summary`,children:(0,N.jsxs)(f,{children:[(0,N.jsx)(me,{style:{color:`#52c41a`,fontSize:20}}),(0,N.jsxs)(G,{strong:!0,style:{fontSize:16},children:[`找到 `,i.matches.length,` 个匹配`]})]})}),(0,N.jsxs)(`div`,{className:`match-stats`,children:[(0,N.jsx)(G,{strong:!0,style:{marginBottom:12,display:`block`},children:`匹配统计：`}),(0,N.jsxs)(E,{gutter:16,children:[(0,N.jsx)(t,{span:8,children:(0,N.jsx)(n,{title:`总匹配长度`,value:s(i.matches).totalLength,suffix:`字符`,valueStyle:{fontSize:18}})}),(0,N.jsx)(t,{span:8,children:(0,N.jsx)(n,{title:`平均长度`,value:s(i.matches).avgLength,suffix:`字符`,valueStyle:{fontSize:18}})}),(0,N.jsx)(t,{span:8,children:(0,N.jsx)(n,{title:`匹配数量`,value:i.matches.length,valueStyle:{fontSize:18}})})]})]}),(0,N.jsxs)(`div`,{className:`match-preview`,children:[(0,N.jsx)(G,{strong:!0,className:`match-preview-title`,children:`高亮显示：`}),(0,N.jsx)(`div`,{className:`match-preview-content`,children:o(i.input,i.matches)})]}),(0,N.jsxs)(`div`,{className:`match-details`,children:[(0,N.jsx)(G,{strong:!0,children:`匹配详情：`}),(0,N.jsx)(`div`,{className:`match-list`,children:i.matches.map((e,t)=>(0,N.jsxs)(`div`,{className:`match-item`,children:[(0,N.jsxs)(`div`,{className:`match-item-header`,children:[(0,N.jsxs)(a,{color:`blue`,children:[`匹配 #`,t+1]}),(0,N.jsx)(G,{code:!0,style:{fontSize:13},children:e.match}),(0,N.jsxs)(G,{type:`secondary`,children:[`位置: `,e.index]}),(0,N.jsxs)(G,{type:`secondary`,children:[`长度: `,e.match.length]})]}),c(e),e.groups.length>0&&(0,N.jsxs)(`div`,{className:`match-groups`,children:[(0,N.jsx)(G,{type:`secondary`,style:{display:`block`,marginBottom:8},children:`捕获分组：`}),(0,N.jsx)(f,{wrap:!0,children:e.groups.map((e,t)=>(0,N.jsxs)(a,{color:e?`geekblue`:`default`,style:{fontSize:12},children:[`$`,t+1,`: `,e||`(空)`]},t))})]})]},t))})]})]}):(0,N.jsx)(A,{description:`未找到匹配`}):(0,N.jsx)(A,{description:`输入正则表达式和测试字符串后查看结果`})})]})},{Text:nr,Title:rr}=b,ir=({presets:e,onPresetSelect:t,selectedPreset:n})=>{let[r,i]=(0,M.useState)(``),[o,c]=(0,M.useState)(`全部`),[l,d]=(0,M.useState)(1),m=Array.from(new Set(e.map(e=>e.category))),h=e.filter(e=>{let t=e.name.toLowerCase().includes(r.toLowerCase())||e.description.toLowerCase().includes(r.toLowerCase())||e.pattern.toLowerCase().includes(r.toLowerCase()),n=o===`全部`||e.category===o;return t&&n}),g=(l-1)*8,_=g+8,v=h.slice(g,_),y=e=>{d(e)},b=e=>{i(e),d(1)},x=e=>{c(e),d(1)},S=e=>{t(e),s.success(`已应用正则表达式: ${e.name}`)},ee=e=>{let t=n?.id===e.id;return(0,N.jsx)(u.Item,{className:`preset-item ${t?`preset-item--selected`:``}`,onClick:()=>S(e),children:(0,N.jsx)(u.Item.Meta,{title:(0,N.jsxs)(f,{children:[(0,N.jsx)(nr,{strong:!0,style:{fontSize:14},children:e.name}),(0,N.jsx)(a,{color:`blue`,style:{fontSize:11},children:e.category}),t&&(0,N.jsx)(a,{color:`green`,children:`已选中`})]}),description:(0,N.jsxs)(f,{direction:`vertical`,size:`small`,style:{width:`100%`},children:[(0,N.jsx)(nr,{type:`secondary`,style:{fontSize:12},children:e.description}),(0,N.jsxs)(`div`,{className:`preset-pattern`,children:[(0,N.jsx)(nr,{code:!0,style:{fontSize:11},children:e.pattern}),(0,N.jsx)(a,{color:`purple`,style:{marginLeft:8,fontSize:11},children:e.flags||`无标志`})]})]})})},e.id)},C=[{key:`全部`,label:`全部`},...m.map(e=>({key:e,label:e}))];return(0,N.jsxs)(f,{direction:`vertical`,size:`small`,className:`regex-library`,style:{width:`100%`,padding:15},children:[(0,N.jsx)(rr,{level:4,children:`常用正则表达式`}),(0,N.jsx)(`div`,{className:`regex-library-search`,children:(0,N.jsx)(j.Search,{placeholder:`搜索正则表达式...`,allowClear:!0,onChange:e=>b(e.target.value),style:{width:`100%`}})}),(0,N.jsx)(Ce,{activeKey:o,onChange:x,items:C,size:`small`,tabBarStyle:{marginBottom:12}}),h.length>0?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(u,{dataSource:v,renderItem:ee,className:`regex-library-list`,size:`small`,pagination:!1}),(0,N.jsx)(p,{align:`end`,total:h.length,pageSize:8,current:l,onChange:y,showSizeChanger:!1,showTotal:e=>`共 ${e} 个`,style:{marginTop:12}})]}):(0,N.jsx)(A,{description:`未找到匹配的正则表达式`,image:A.PRESENTED_IMAGE_SIMPLE,style:{padding:`20px 0`}})]})},{Text:ar,Paragraph:or}=b,{Panel:sr}=de,cr=()=>{let e=[{title:`字符类`,items:[{pattern:`.`,description:`匹配任意单个字符（除换行符外）`,example:`a.b 匹配 aab, abb, acb`},{pattern:`\\d`,description:`匹配任意数字（0-9）`,example:`\\d+ 匹配 123`},{pattern:`\\w`,description:`匹配任意字母、数字或下划线`,example:`\\w+ 匹配 hello_world`},{pattern:`\\s`,description:`匹配任意空白字符（空格、制表符、换行符等）`,example:`a\\sb 匹配 a b`},{pattern:`[abc]`,description:`匹配方括号中的任意一个字符`,example:`[abc] 匹配 a, b 或 c`},{pattern:`[^abc]`,description:`匹配不在方括号中的任意字符`,example:`[^abc] 匹配 d, e, f 等`},{pattern:`[a-z]`,description:`匹配小写字母 a 到 z`,example:`[a-z]+ 匹配 hello`},{pattern:`[A-Z]`,description:`匹配大写字母 A 到 Z`,example:`[A-Z]+ 匹配 HELLO`},{pattern:`[0-9]`,description:`匹配数字 0 到 9`,example:`[0-9]+ 匹配 123`}]},{title:`量词`,items:[{pattern:`*`,description:`匹配前面的元素 0 次或多次`,example:`a* 匹配 '', a, aa, aaa`},{pattern:`+`,description:`匹配前面的元素 1 次或多次`,example:`a+ 匹配 a, aa, aaa`},{pattern:`?`,description:`匹配前面的元素 0 次或 1 次`,example:`a? 匹配 '', a`},{pattern:`{n}`,description:`匹配前面的元素恰好 n 次`,example:`a{3} 匹配 aaa`},{pattern:`{n,}`,description:`匹配前面的元素至少 n 次`,example:`a{2,} 匹配 aa, aaa, aaaa`},{pattern:`{n,m}`,description:`匹配前面的元素至少 n 次，至多 m 次`,example:`a{2,4} 匹配 aa, aaa, aaaa`}]},{title:`边界匹配`,items:[{pattern:`^`,description:`匹配字符串的开头`,example:`^Hello 匹配 Hello world 中的 Hello`},{pattern:`$`,description:`匹配字符串的结尾`,example:`world$ 匹配 Hello world 中的 world`},{pattern:`\\b`,description:`匹配单词边界`,example:`\\bcat\\b 匹配 cat 但不匹配 category`},{pattern:`\\B`,description:`匹配非单词边界`,example:`\\Bcat\\B 匹配 category 中的 cat`}]},{title:`分组和引用`,items:[{pattern:`(abc)`,description:`捕获分组，匹配 abc 并记住匹配`,example:`(abc)+ 匹配 abcabcabc`},{pattern:`(?:abc)`,description:`非捕获分组，匹配 abc 但不记住`,example:`(?:abc)+ 匹配 abcabcabc`},{pattern:`(a|b)`,description:`匹配 a 或 b`,example:`a|b 匹配 a 或 b`},{pattern:`\\1`,description:`引用第一个捕获分组`,example:`(\\d+)\\1 匹配 123123`},{pattern:`\\2`,description:`引用第二个捕获分组`,example:`(\\d+)-(\\w+)\\2 匹配 123-abc123`}]},{title:`特殊字符`,items:[{pattern:`\\`,description:`转义字符，匹配特殊字符本身`,example:`\\$ 匹配 $`},{pattern:`\\n`,description:`匹配换行符`,example:`a\\nb 匹配 a\\nb`},{pattern:`\\t`,description:`匹配制表符`,example:`a\\tb 匹配 a\\tb`},{pattern:`\\r`,description:`匹配回车符`,example:`a\\rb 匹配 a\\rb`}]},{title:`常用标志`,items:[{pattern:`g`,description:`全局匹配，查找所有匹配项`,example:`a/g 匹配所有 a`},{pattern:`i`,description:`忽略大小写`,example:`A/i 匹配 a 和 A`},{pattern:`m`,description:`多行模式，^ 和 $ 匹配每行的开头和结尾`,example:`^Hello/m 匹配每行开头的 Hello`},{pattern:`s`,description:`点号匹配所有字符，包括换行符`,example:`./s 匹配包括换行符在内的所有字符`},{pattern:`u`,description:`Unicode 模式，正确处理 Unicode 字符`,example:`\\u{1F600}/u 匹配 😀`},{pattern:`y`,description:`粘滞模式，从 lastIndex 开始匹配`,example:`a/y 从指定位置开始匹配 a`}]}],t=e=>(0,N.jsxs)(`div`,{className:`syntax-item`,children:[(0,N.jsxs)(f,{size:`small`,style:{width:`100%`,justifyContent:`space-between`},children:[(0,N.jsx)(a,{color:`blue`,style:{fontSize:13,fontFamily:`monospace`},children:e.pattern}),(0,N.jsx)(ar,{style:{fontSize:12,flex:1,textAlign:`left`},children:e.description})]}),e.example&&(0,N.jsx)(`div`,{className:`syntax-example`,children:(0,N.jsxs)(ar,{type:`secondary`,style:{fontSize:11},children:[`示例: `,e.example]})})]});return(0,N.jsxs)(k,{title:(0,N.jsxs)(f,{children:[(0,N.jsx)(Pe,{}),(0,N.jsx)(`span`,{children:`正则表达式语法备忘单`})]}),className:`regex-cheat-sheet`,size:`small`,children:[(0,N.jsx)(de,{defaultActiveKey:[`字符类`,`量词`],size:`small`,className:`regex-cheat-sheet-collapse`,children:e.map(e=>(0,N.jsx)(sr,{header:e.title,children:(0,N.jsx)(f,{direction:`vertical`,size:`small`,style:{width:`100%`},children:e.items.map((n,r)=>(0,N.jsxs)(`div`,{children:[t(n),r<e.items.length-1&&(0,N.jsx)(v,{style:{margin:`8px 0`}})]},r))})},e.title))}),(0,N.jsx)(v,{style:{margin:`16px 0`}}),(0,N.jsxs)(`div`,{className:`regex-tips`,children:[(0,N.jsx)(ar,{strong:!0,style:{display:`block`,marginBottom:8},children:`💡 使用技巧：`}),(0,N.jsx)(or,{style:{fontSize:12,marginBottom:0},children:(0,N.jsxs)(`ul`,{children:[(0,N.jsx)(`li`,{children:`从简单的模式开始，逐步添加复杂性`}),(0,N.jsx)(`li`,{children:`使用在线工具测试和调试正则表达式`}),(0,N.jsxs)(`li`,{children:[`注意转义特殊字符（如 . * + ? ^ $ | \\\\ ( ) [ ] `,`）`]}),(0,N.jsx)(`li`,{children:`使用非捕获分组 (?:...) 来提高性能`}),(0,N.jsx)(`li`,{children:`考虑使用具体的字符类而不是 . 来提高准确性`}),(0,N.jsx)(`li`,{children:`测试边界情况和特殊输入`})]})})]})]})},{Text:K,Paragraph:lr}=b,{Panel:ur}=de,dr=()=>{let e=[{id:`email`,title:`验证电子邮件地址`,description:`学习如何构建一个基本的电子邮件验证正则表达式`,difficulty:`简单`,steps:[{title:`匹配用户名部分`,description:`用户名可以包含字母、数字、点和下划线`,pattern:`[\\w.]+`,explanation:`[\\w.]+ 匹配一个或多个字母、数字、下划线或点`},{title:`添加 @ 符号`,description:`电子邮件必须包含 @ 符号`,pattern:`[\\w.]+@`,explanation:`@ 匹配字面的 @ 符号`},{title:`匹配域名部分`,description:`域名包含字母、数字和点`,pattern:`[\\w.]+@[\\w.]+`,explanation:`[\\w.]+ 匹配域名部分`},{title:`添加顶级域名`,description:`顶级域名通常是 2-4 个字母`,pattern:`[\\w.]+@[\\w.]+\\.[a-zA-Z]{2,4}`,explanation:`\\.[a-zA-Z]{2,4} 匹配点号后跟 2-4 个字母`}],finalPattern:`^[\\w.]+@[\\w.]+\\.[a-zA-Z]{2,4}$`,exampleInput:`user@example.com`,exampleOutput:`✓ 匹配成功`},{id:`phone`,title:`提取电话号码`,description:`学习如何从文本中提取各种格式的电话号码`,difficulty:`中等`,steps:[{title:`匹配可选的区号`,description:`电话号码可能以 +86 或 (010) 开头`,pattern:`(\\+\\d{2,3}|\\(\\d{3,4}\\))?`,explanation:`(\\+\\d{2,3}|\\(\\d{3,4}\\))? 匹配可选的 +数字 或 (数字)`},{title:`匹配分隔符`,description:`区号和号码之间可能有空格或横线`,pattern:`(\\+\\d{2,3}|\\(\\d{3,4}\\))?[-\\s]?`,explanation:`[-\\s]? 匹配可选的横线或空格`},{title:`匹配主号码`,description:`主号码通常是 3-4 位数字`,pattern:`(\\+\\d{2,3}|\\(\\d{3,4}\\))?[-\\s]?\\d{3,4}`,explanation:`\\d{3,4} 匹配 3-4 位数字`},{title:`匹配分隔符和剩余号码`,description:`添加分隔符和剩余的 4 位数字`,pattern:`(\\+\\d{2,3}|\\(\\d{3,4}\\))?[-\\s]?\\d{3,4}[-\\s]?\\d{4}`,explanation:`[-\\s]?\\d{4} 匹配分隔符和 4 位数字`}],finalPattern:`(\\+\\d{2,3}|\\(\\d{3,4}\\))?[-\\s]?\\d{3,4}[-\\s]?\\d{4}`,exampleInput:`联系电话：+86 138-1234-5678`,exampleOutput:`提取: +86 138-1234-5678`},{id:`url`,title:`提取 URL 链接`,description:`学习如何从文本中提取 HTTP/HTTPS 链接`,difficulty:`中等`,steps:[{title:`匹配协议部分`,description:`URL 以 http:// 或 https:// 开头`,pattern:`https?://`,explanation:`https?:// 匹配 http:// 或 https://`},{title:`匹配域名`,description:`域名包含字母、数字、点和横线`,pattern:`https?://[\\w.-]+`,explanation:`[\\w.-]+ 匹配域名部分`},{title:`匹配可选的路径`,description:`URL 可能包含路径、查询参数等`,pattern:`https?://[\\w.-]+(?:/[\\w./?%&=-]*)?`,explanation:`(?:/[\\w./?%&=-]*)? 匹配可选的路径部分`}],finalPattern:`https?://[\\w.-]+(?:/[\\w./?%&=-]*)?`,exampleInput:`访问 https://example.com/path?query=123 获取更多信息`,exampleOutput:`提取: https://example.com/path?query=123`},{id:`date`,title:`提取日期格式`,description:`学习如何匹配和提取各种格式的日期`,difficulty:`简单`,steps:[{title:`匹配年-月-日格式`,description:`常见的 YYYY-MM-DD 格式`,pattern:`\\d{4}-\\d{2}-\\d{2}`,explanation:`\\d{4}-\\d{2}-\\d{2} 匹配 4 位年-2 位月-2 位日`},{title:`支持多种分隔符`,description:`支持 /、.、- 等分隔符`,pattern:`\\d{4}[-/.]\\d{2}[-/.]\\d{2}`,explanation:`[-/.] 匹配横线、斜线或点`},{title:`添加边界匹配`,description:`确保匹配完整的日期`,pattern:`\\b\\d{4}[-/.]\\d{2}[-/.]\\d{2}\\b`,explanation:`\\b 确保匹配单词边界`}],finalPattern:`\\b\\d{4}[-/.]\\d{2}[-/.]\\d{2}\\b`,exampleInput:`会议日期：2024-01-15 或 2024/01/15`,exampleOutput:`提取: 2024-01-15, 2024/01/15`}],t=e=>{s.success(`已复制正则表达式: ${e}`)},n=e=>{switch(e){case`简单`:return`green`;case`中等`:return`orange`;case`复杂`:return`red`;default:return`default`}},r=e=>(0,N.jsx)(`div`,{className:`use-case-item`,children:(0,N.jsxs)(f,{direction:`vertical`,size:`middle`,style:{width:`100%`},children:[(0,N.jsxs)(`div`,{className:`use-case-header`,children:[(0,N.jsxs)(f,{children:[(0,N.jsx)(K,{strong:!0,style:{fontSize:15},children:e.title}),(0,N.jsx)(a,{color:n(e.difficulty),children:e.difficulty})]}),(0,N.jsx)(lr,{style:{fontSize:12,marginBottom:0},children:e.description})]}),(0,N.jsx)(ye,{direction:`vertical`,size:`small`,items:e.steps.map(e=>({title:e.title,description:(0,N.jsxs)(`div`,{className:`step-description`,children:[(0,N.jsx)(K,{type:`secondary`,style:{fontSize:12},children:e.description}),e.pattern&&(0,N.jsx)(`div`,{className:`step-pattern`,children:(0,N.jsx)(K,{code:!0,style:{fontSize:11},children:e.pattern})}),e.explanation&&(0,N.jsx)(K,{type:`secondary`,style:{fontSize:11,display:`block`,marginTop:4},children:e.explanation})]})}))}),(0,N.jsx)(`div`,{className:`use-case-result`,children:(0,N.jsxs)(f,{direction:`vertical`,size:`small`,style:{width:`100%`},children:[(0,N.jsxs)(`div`,{className:`final-pattern`,children:[(0,N.jsx)(K,{strong:!0,style:{fontSize:12},children:`最终正则表达式：`}),(0,N.jsx)(`div`,{className:`pattern-display`,children:(0,N.jsx)(K,{code:!0,style:{fontSize:13},children:e.finalPattern})})]}),(0,N.jsxs)(`div`,{className:`example-demo`,children:[(0,N.jsx)(K,{strong:!0,style:{fontSize:12},children:`示例：`}),(0,N.jsxs)(`div`,{className:`example-input`,children:[(0,N.jsx)(K,{type:`secondary`,style:{fontSize:11},children:`输入：`}),(0,N.jsx)(K,{code:!0,style:{fontSize:11,marginLeft:8},children:e.exampleInput})]}),(0,N.jsxs)(`div`,{className:`example-output`,children:[(0,N.jsx)(K,{type:`secondary`,style:{fontSize:11},children:`输出：`}),(0,N.jsx)(K,{style:{fontSize:11,marginLeft:8,color:`#52c41a`},children:e.exampleOutput})]})]}),(0,N.jsx)(w,{type:`primary`,size:`small`,icon:(0,N.jsx)(Le,{}),onClick:()=>t(e.finalPattern),block:!0,children:`尝试此正则表达式`})]})})]})},e.id);return(0,N.jsxs)(k,{title:(0,N.jsxs)(f,{children:[(0,N.jsx)(ie,{}),(0,N.jsx)(`span`,{children:`常见用例引导示例`})]}),className:`regex-guide-examples`,size:`small`,children:[(0,N.jsx)(de,{defaultActiveKey:[`email`],size:`small`,className:`regex-guide-examples-collapse`,children:e.map(e=>(0,N.jsx)(ur,{header:(0,N.jsxs)(f,{children:[(0,N.jsx)(K,{strong:!0,style:{fontSize:13},children:e.title}),(0,N.jsx)(a,{color:n(e.difficulty),style:{fontSize:11},children:e.difficulty})]}),children:r(e)},e.id))}),(0,N.jsx)(`div`,{className:`guide-tips`,children:(0,N.jsx)(lr,{style:{fontSize:11,marginBottom:0,marginTop:12},children:(0,N.jsx)(K,{type:`secondary`,children:`💡 提示：点击"尝试此正则表达式"按钮可以将正则表达式复制到编辑器中进行测试`})})})]})},{Text:fr}=b,{Panel:pr}=de,mr=({pattern:e,flags:t,testString:n,selectedPreset:i})=>{let o=e=>{let t=[],n=0;for(;n<e.length;){let r=e[n];if(r===`\\`)if(n+1<e.length){let r=e[n+1];t.push({type:`转义字符`,pattern:`\\${r}`,description:{d:`数字 (0-9)`,w:`字母、数字或下划线`,s:`空白字符`,b:`单词边界`,n:`换行符`,t:`制表符`,r:`回车符`}[r]||`转义字符: ${r}`,color:`purple`}),n+=2}else t.push({type:`转义字符`,pattern:`\\`,description:`转义字符（不完整）`,color:`purple`}),n++;else if(r===`[`){let r=``,i=n+1;for(;i<e.length&&e[i]!==`]`;)r+=e[i],i++;i<e.length?(t.push({type:`字符类`,pattern:`[${r}]`,description:`匹配方括号中的任意一个字符: ${r}`,color:`blue`}),n=i+1):(t.push({type:`字符类`,pattern:r,description:`字符类（不完整）`,color:`blue`}),n=i)}else if(r===`(`){let r=``,i=n+1,a=1;for(;i<e.length&&a>0;)e[i]===`(`&&a++,e[i]===`)`&&a--,a>0&&(r+=e[i]),i++;if(a===0){let e=r.startsWith(`?:`);t.push({type:e?`非捕获分组`:`捕获分组`,pattern:`(${r})`,description:e?`匹配但不捕获分组`:`匹配并捕获分组`,color:e?`orange`:`green`}),n=i}else t.push({type:`分组`,pattern:r,description:`分组（不完整）`,color:`green`}),n=i}else if(r===`^`)t.push({type:`边界`,pattern:`^`,description:`匹配字符串的开头`,color:`cyan`}),n++;else if(r===`$`)t.push({type:`边界`,pattern:`$`,description:`匹配字符串的结尾`,color:`cyan`}),n++;else if([`*`,`+`,`?`].includes(r))t.push({type:`量词`,pattern:r,description:{"*":`匹配 0 次或多次`,"+":`匹配 1 次或多次`,"?":`匹配 0 次或 1 次`}[r],color:`red`}),n++;else if(r===`{`){let r=``,i=n+1;for(;i<e.length&&e[i]!==`}`;)r+=e[i],i++;i<e.length?(t.push({type:`量词`,pattern:`{${r}}`,description:`重复次数: ${r}`,color:`red`}),n=i+1):(t.push({type:`量词`,pattern:r,description:`量词（不完整）`,color:`red`}),n=i)}else r===`|`?(t.push({type:`选择`,pattern:`|`,description:`或运算，匹配左边或右边`,color:`magenta`}),n++):r===`.`?(t.push({type:`通配符`,pattern:`.`,description:`匹配任意单个字符（除换行符外）`,color:`geekblue`}),n++):(t.push({type:`字面量`,pattern:r,description:`匹配字面字符: ${r}`,color:`default`}),n++)}return t},s=e=>{let t={g:`全局匹配，查找所有匹配项`,i:`忽略大小写`,m:`多行模式，^ 和 $ 匹配每行的开头和结尾`,s:`点号匹配所有字符，包括换行符`,u:`Unicode 模式，正确处理 Unicode 字符`,y:`粘滞模式，从 lastIndex 开始匹配`};return e.split(``).map(e=>({flag:e,description:t[e]||`未知标志`}))},l=o(e),u=s(t),d=e=>{let t={purple:`#722ed1`,blue:`#1890ff`,green:`#52c41a`,orange:`#fa8c16`,cyan:`#13c2c2`,red:`#f5222d`,magenta:`#eb2f96`,geekblue:`#2f54eb`,default:`#8c8c8c`};return t[e]||t.default};return(0,N.jsx)(k,{title:(0,N.jsxs)(f,{children:[(0,N.jsx)(r,{}),(0,N.jsx)(`span`,{children:`正则表达式可视化`})]}),className:`regex-visualizer`,size:`small`,children:(0,N.jsxs)(f,{direction:`vertical`,size:`middle`,style:{width:`100%`},children:[i&&(0,N.jsx)(`div`,{className:`regex-preset-info`,children:(0,N.jsxs)(f,{direction:`vertical`,size:`small`,style:{width:`100%`},children:[(0,N.jsxs)(f,{children:[(0,N.jsx)(c,{}),(0,N.jsx)(fr,{strong:!0,style:{fontSize:14},children:i.name}),(0,N.jsx)(a,{color:`blue`,style:{fontSize:11},children:i.category})]}),(0,N.jsx)(fr,{type:`secondary`,style:{fontSize:12},children:i.description}),(0,N.jsxs)(`div`,{className:`preset-pattern-display`,children:[(0,N.jsx)(fr,{strong:!0,style:{fontSize:12},children:`正则表达式：`}),(0,N.jsx)(fr,{code:!0,style:{fontSize:13,marginLeft:8},children:i.pattern}),i.flags&&(0,N.jsx)(a,{color:`cyan`,style:{fontSize:11,marginLeft:8},children:i.flags})]})]})}),e?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(`div`,{className:`regex-structure`,children:[(0,N.jsx)(fr,{strong:!0,style:{display:`block`,marginBottom:8},children:`正则表达式结构解析：`}),(0,N.jsx)(f,{wrap:!0,children:l.map((e,t)=>(0,N.jsx)(Te,{title:e.description,children:(0,N.jsx)(a,{color:d(e.color),style:{fontSize:12,fontFamily:`monospace`,cursor:`help`,marginBottom:4},children:e.pattern})},t))})]}),(0,N.jsx)(de,{size:`small`,className:`regex-visualizer-collapse`,children:(0,N.jsx)(pr,{header:`详细解析`,children:(0,N.jsx)(ye,{direction:`vertical`,size:`small`,items:l.map(e=>({title:(0,N.jsxs)(f,{children:[(0,N.jsx)(a,{color:d(e.color),style:{fontSize:11},children:e.type}),(0,N.jsx)(fr,{code:!0,style:{fontSize:12},children:e.pattern})]}),description:(0,N.jsx)(fr,{type:`secondary`,style:{fontSize:11},children:e.description})}))})},`details`)}),t&&(0,N.jsxs)(`div`,{className:`regex-flags`,children:[(0,N.jsx)(fr,{strong:!0,style:{display:`block`,marginBottom:8},children:`标志说明：`}),(0,N.jsx)(f,{wrap:!0,children:u.map((e,t)=>(0,N.jsx)(Te,{title:e.description,children:(0,N.jsx)(a,{color:`blue`,style:{fontSize:12,fontFamily:`monospace`,cursor:`help`},children:e.flag})},t))})]}),n&&(0,N.jsx)(T,{message:`提示`,description:(0,N.jsx)(fr,{type:`secondary`,style:{fontSize:11},children:`将鼠标悬停在正则表达式部分上可以查看详细说明。在中间的测试区域可以看到实际的匹配结果。`}),type:`info`,showIcon:!0,icon:(0,N.jsx)(ue,{})})]}):(0,N.jsx)(T,{message:`等待输入`,description:`请在左侧输入正则表达式以查看可视化解析`,type:`info`,showIcon:!0})]})})},{Text:q,Paragraph:J,Title:hr}=b,gr=({visible:e,onClose:t})=>{let[n,i]=(0,M.useState)(0),a=[{title:`欢迎使用正则表达式沙盒`,icon:(0,N.jsx)(ce,{}),content:(0,N.jsxs)(f,{direction:`vertical`,size:`middle`,style:{width:`100%`},children:[(0,N.jsx)(J,{children:`正则表达式（Regular Expression）是一种强大的文本匹配工具，可以帮助你快速查找、替换和验证文本模式。`}),(0,N.jsx)(T,{message:`本工具专为初学者设计`,description:`即使你没有正则表达式基础，也能通过本工具轻松学习和使用正则表达式。`,type:`info`,showIcon:!0}),(0,N.jsx)(k,{size:`small`,title:`主要功能`,children:(0,N.jsxs)(`ul`,{children:[(0,N.jsx)(`li`,{children:`📝 实时编辑和测试正则表达式`}),(0,N.jsx)(`li`,{children:`📚 内置常用正则表达式库`}),(0,N.jsx)(`li`,{children:`🔍 详细的匹配结果和解释`}),(0,N.jsx)(`li`,{children:`📖 正则表达式语法备忘单`}),(0,N.jsx)(`li`,{children:`💡 常见用例引导示例`}),(0,N.jsx)(`li`,{children:`👁️ 交互式正则表达式可视化`})]})})]})},{title:`界面布局介绍`,icon:(0,N.jsx)(_e,{}),content:(0,N.jsxs)(f,{direction:`vertical`,size:`middle`,style:{width:`100%`},children:[(0,N.jsx)(J,{children:`正则表达式沙盒采用三栏布局，让你可以高效地进行正则表达式开发。`}),(0,N.jsx)(k,{size:`small`,children:(0,N.jsxs)(f,{direction:`vertical`,size:`small`,style:{width:`100%`},children:[(0,N.jsxs)(`div`,{children:[(0,N.jsx)(q,{strong:!0,children:`📌 左侧面板 - 常用正则表达式库`}),(0,N.jsx)(J,{style:{marginBottom:0,marginTop:4},children:`包含预定义的常用正则表达式，点击即可一键应用。支持按分类筛选和搜索。`})]}),(0,N.jsx)(v,{style:{margin:`8px 0`}}),(0,N.jsxs)(`div`,{children:[(0,N.jsx)(q,{strong:!0,children:`📌 中间面板 - 编辑和测试区`}),(0,N.jsx)(J,{style:{marginBottom:0,marginTop:4},children:`上方是正则表达式编辑器，可以输入模式和选择标志；下方是测试区域，可以输入测试字符串并查看匹配结果。`})]}),(0,N.jsx)(v,{style:{margin:`8px 0`}}),(0,N.jsxs)(`div`,{children:[(0,N.jsx)(q,{strong:!0,children:`📌 右侧面板 - 辅助工具区`}),(0,N.jsx)(J,{style:{marginBottom:0,marginTop:4},children:`包含正则表达式可视化、选中正则的详细说明、常见用例引导示例和语法备忘单。`})]})]})})]})},{title:`正则表达式可视化`,icon:(0,N.jsx)(r,{}),content:(0,N.jsxs)(f,{direction:`vertical`,size:`middle`,style:{width:`100%`},children:[(0,N.jsx)(J,{children:`正则表达式可视化功能可以帮助你理解正则表达式的结构和每个部分的作用。`}),(0,N.jsx)(T,{message:`如何使用`,description:`在中间面板输入正则表达式后，右侧面板会自动显示可视化解析。将鼠标悬停在正则表达式的各个部分上，可以看到详细的说明。`,type:`success`,showIcon:!0}),(0,N.jsx)(k,{size:`small`,title:`可视化功能特点`,children:(0,N.jsxs)(`ul`,{children:[(0,N.jsx)(`li`,{children:`🎨 不同颜色标识不同类型的正则表达式元素`}),(0,N.jsx)(`li`,{children:`💬 鼠标悬停显示详细说明`}),(0,N.jsx)(`li`,{children:`📋 支持展开查看完整的步骤解析`}),(0,N.jsx)(`li`,{children:`🚩 标志说明，帮助你理解每个标志的作用`})]})})]})},{title:`常见用例引导示例`,icon:(0,N.jsx)(ie,{}),content:(0,N.jsxs)(f,{direction:`vertical`,size:`middle`,style:{width:`100%`},children:[(0,N.jsx)(J,{children:`常见用例引导示例通过实际案例教你如何构建正则表达式，解决实际问题。`}),(0,N.jsx)(T,{message:`学习路径`,description:`每个用例都按照从简单到复杂的步骤展示正则表达式的构建过程，帮助你理解每个步骤的作用。`,type:`info`,showIcon:!0}),(0,N.jsx)(k,{size:`small`,title:`包含的用例`,children:(0,N.jsxs)(`ul`,{children:[(0,N.jsx)(`li`,{children:`📧 验证电子邮件地址`}),(0,N.jsx)(`li`,{children:`📱 提取电话号码`}),(0,N.jsx)(`li`,{children:`🔗 提取 URL 链接`}),(0,N.jsx)(`li`,{children:`📅 提取日期格式`})]})}),(0,N.jsx)(J,{children:`每个用例都包含详细的步骤说明、最终正则表达式和示例，你可以点击"尝试此正则表达式"按钮将正则表达式复制到编辑器中进行测试。`})]})},{title:`语法备忘单`,icon:(0,N.jsx)(Pe,{}),content:(0,N.jsxs)(f,{direction:`vertical`,size:`middle`,style:{width:`100%`},children:[(0,N.jsx)(J,{children:`正则表达式语法备忘单是一个快速参考指南，帮助你快速查找和记忆正则表达式的语法。`}),(0,N.jsx)(k,{size:`small`,title:`包含的内容`,children:(0,N.jsxs)(`ul`,{children:[(0,N.jsxs)(`li`,{children:[`🔤 字符类（如 `,(0,N.jsx)(q,{code:!0,children:`\\\\d`}),`、`,(0,N.jsx)(q,{code:!0,children:`\\\\w`}),`、`,(0,N.jsx)(q,{code:!0,children:`\\\\s`}),`）`]}),(0,N.jsxs)(`li`,{children:[`🔢 量词（如 *、+、?、`,(0,N.jsx)(q,{code:!0,children:`{n}`}),`）`]}),(0,N.jsxs)(`li`,{children:[`📍 边界匹配（如 ^、$、`,(0,N.jsx)(q,{code:!0,children:`\\\\b`}),`）`]}),(0,N.jsxs)(`li`,{children:[`👥 分组和引用（如 ()、`,(0,N.jsx)(q,{code:!0,children:`\\\\1`}),`）`]}),(0,N.jsx)(`li`,{children:`⚡ 特殊字符（如换行符、制表符）`}),(0,N.jsx)(`li`,{children:`🚩 常用标志（如 g、i、m）`})]})}),(0,N.jsx)(T,{message:`使用技巧`,description:`每个语法元素都包含描述和示例，帮助你理解其用法。你可以随时展开查看，不需要记忆所有内容。`,type:`success`,showIcon:!0})]})},{title:`开始使用`,icon:(0,N.jsx)(me,{}),content:(0,N.jsxs)(f,{direction:`vertical`,size:`middle`,style:{width:`100%`},children:[(0,N.jsx)(J,{children:`恭喜！你已经了解了正则表达式沙盒的主要功能和使用方法。现在可以开始使用了！`}),(0,N.jsx)(k,{size:`small`,title:`快速开始建议`,children:(0,N.jsxs)(f,{direction:`vertical`,size:`small`,style:{width:`100%`},children:[(0,N.jsxs)(`div`,{children:[(0,N.jsx)(q,{strong:!0,children:`1️⃣ 从预设开始`}),(0,N.jsx)(J,{style:{marginBottom:0,marginTop:4},children:`在左侧面板选择一个预设的正则表达式，查看它的效果。`})]}),(0,N.jsxs)(`div`,{children:[(0,N.jsx)(q,{strong:!0,children:`2️⃣ 修改和测试`}),(0,N.jsx)(J,{style:{marginBottom:0,marginTop:4},children:`在中间面板修改正则表达式或测试字符串，实时查看匹配结果。`})]}),(0,N.jsxs)(`div`,{children:[(0,N.jsx)(q,{strong:!0,children:`3️⃣ 学习用例`}),(0,N.jsx)(J,{style:{marginBottom:0,marginTop:4},children:`在右侧面板查看常见用例引导示例，学习如何构建正则表达式。`})]}),(0,N.jsxs)(`div`,{children:[(0,N.jsx)(q,{strong:!0,children:`4️⃣ 查阅语法`}),(0,N.jsx)(J,{style:{marginBottom:0,marginTop:4},children:`遇到不熟悉的语法时，查阅语法备忘单获取帮助。`})]})]})}),(0,N.jsx)(T,{message:`💡 提示`,description:`正则表达式是一个强大的工具，但需要练习才能熟练掌握。多尝试、多练习，你会发现它非常有用！`,type:`info`,showIcon:!0})]})}];return(0,N.jsx)(_,{title:(0,N.jsxs)(f,{children:[(0,N.jsx)(ce,{}),(0,N.jsx)(`span`,{children:`欢迎使用正则表达式沙盒`})]}),open:e,onCancel:t,width:700,footer:[(0,N.jsx)(w,{onClick:()=>{t()},children:`跳过教程`},`skip`),(0,N.jsx)(w,{onClick:()=>{n>0&&i(n-1)},disabled:n===0,children:`上一步`},`prev`),(0,N.jsx)(w,{type:`primary`,onClick:()=>{n<a.length-1?i(n+1):t()},children:n===a.length-1?`开始使用`:`下一步`},`next`)],className:`first-time-guide-modal`,children:(0,N.jsxs)(`div`,{style:{padding:`24px 0`},children:[(0,N.jsx)(ye,{current:n,size:`small`,style:{marginBottom:32},items:a.map(e=>({title:e.title,icon:e.icon}))}),(0,N.jsxs)(`div`,{className:`guide-content`,children:[(0,N.jsx)(hr,{level:4,style:{marginBottom:16},children:a[n].title}),a[n].content]}),(0,N.jsx)(`div`,{style:{marginTop:24,textAlign:`center`},children:(0,N.jsxs)(q,{type:`secondary`,children:[`步骤 `,n+1,` / `,a.length]})})]})})};const _r=[{id:`email`,name:`邮箱地址`,description:`验证标准的邮箱地址格式`,pattern:`^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$`,flags:`g`,category:`验证`},{id:`phone-cn`,name:`中国大陆手机号`,description:`验证中国大陆11位手机号码`,pattern:`^1[3-9]\\d{9}$`,flags:`g`,category:`验证`},{id:`phone-intl`,name:`国际电话号码`,description:`验证国际电话号码格式`,pattern:`^\\+?[1-9]\\d{1,14}$`,flags:`g`,category:`验证`},{id:`url`,name:`URL地址`,description:`验证HTTP/HTTPS URL地址`,pattern:`^https?:\\/\\/(?:www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b(?:[-a-zA-Z0-9()@:%_\\+.~#?&\\/=]*)$`,flags:`g`,category:`验证`},{id:`ipv4`,name:`IPv4地址`,description:`验证IPv4地址格式`,pattern:`^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$`,flags:`g`,category:`验证`},{id:`ipv6`,name:`IPv6地址`,description:`验证IPv6地址格式`,pattern:`^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$`,flags:`g`,category:`验证`},{id:`idcard-cn`,name:`中国大陆身份证号`,description:`验证18位中国大陆身份证号码`,pattern:`^[1-9]\\d{5}(18|19|20)\\d{2}(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])\\d{3}[0-9Xx]$`,flags:`g`,category:`验证`},{id:`password-strong`,name:`强密码`,description:`验证强密码（至少8位，包含大小写字母、数字和特殊字符）`,pattern:`^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$`,flags:`g`,category:`验证`},{id:`username`,name:`用户名`,description:`验证用户名（4-20位字母、数字、下划线）`,pattern:`^[a-zA-Z0-9_]{4,20}$`,flags:`g`,category:`验证`},{id:`date-iso`,name:`ISO日期`,description:`验证ISO 8601日期格式`,pattern:`^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$`,flags:`g`,category:`验证`},{id:`datetime-iso`,name:`ISO日期时间`,description:`验证ISO 8601日期时间格式`,pattern:`^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])T([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d(?:\\.\\d+)?(?:Z|[+-][01]\\d:?[0-5]\\d)?$`,flags:`g`,category:`验证`},{id:`time-24h`,name:`24小时制时间`,description:`验证24小时制时间格式`,pattern:`^([01]\\d|2[0-3]):[0-5]\\d$`,flags:`g`,category:`验证`},{id:`hex-color`,name:`十六进制颜色`,description:`验证十六进制颜色代码（3位、6位或8位）`,pattern:`^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}|[A-Fa-f0-9]{8})$`,flags:`g`,category:`验证`},{id:`credit-card`,name:`信用卡号`,description:`验证信用卡号码（13-19位数字）`,pattern:`^\\d{13,19}$`,flags:`g`,category:`验证`},{id:`chinese`,name:`中文字符`,description:`匹配中文字符`,pattern:`[\\u4e00-\\u9fa5]+`,flags:`g`,category:`匹配`},{id:`chinese-name`,name:`中文姓名`,description:`验证中文姓名（2-4个汉字）`,pattern:`^[\\u4e00-\\u9fa5]{2,4}$`,flags:`g`,category:`验证`},{id:`english-word`,name:`英文单词`,description:`匹配英文单词`,pattern:`\\b[a-zA-Z]+\\b`,flags:`g`,category:`匹配`},{id:`number`,name:`数字`,description:`匹配整数和小数`,pattern:`-?\\d+\\.?\\d*`,flags:`g`,category:`匹配`},{id:`whitespace`,name:`空白字符`,description:`匹配空白字符（空格、制表符、换行等）`,pattern:`\\s+`,flags:`g`,category:`匹配`},{id:`html-tag`,name:`HTML标签`,description:`匹配HTML标签`,pattern:`<([a-z]+)([^<]+)*(?:>(.*)<\\/\\1>|\\s+\\/>)`,flags:`gi`,category:`匹配`},{id:`email-extract`,name:`提取邮箱`,description:`从文本中提取邮箱地址`,pattern:`[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}`,flags:`gi`,category:`提取`},{id:`phone-extract`,name:`提取手机号`,description:`从文本中提取手机号码`,pattern:`1[3-9]\\d{9}`,flags:`g`,category:`提取`},{id:`url-extract`,name:`提取URL`,description:`从文本中提取URL地址`,pattern:`https?:\\/\\/[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b(?:[-a-zA-Z0-9()@:%_\\+.~#?&\\/=]*)`,flags:`gi`,category:`提取`},{id:`ip-extract`,name:`提取IP地址`,description:`从文本中提取IP地址`,pattern:`\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b`,flags:`g`,category:`提取`},{id:`date-extract`,name:`提取日期`,description:`从文本中提取日期（YYYY-MM-DD格式）`,pattern:`\\b\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])\\b`,flags:`g`,category:`提取`},{id:`money`,name:`金额`,description:`验证金额格式（支持千分位和小数）`,pattern:`^\\d{1,3}(,\\d{3})*(\\.\\d{1,2})?$`,flags:`g`,category:`验证`},{id:`postcode-cn`,name:`中国邮政编码`,description:`验证中国邮政编码（6位数字）`,pattern:`^\\d{6}$`,flags:`g`,category:`验证`},{id:`mac-address`,name:`MAC地址`,description:`验证MAC地址格式`,pattern:`^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$`,flags:`g`,category:`验证`},{id:`base64`,name:`Base64编码`,description:`验证Base64编码字符串`,pattern:`^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$`,flags:`g`,category:`验证`},{id:`json`,name:`JSON字符串`,description:`验证JSON字符串格式`,pattern:`^\\{.*\\}$|^\\[.*\\]$`,flags:`g`,category:`验证`},{id:`xml`,name:`XML标签`,description:`匹配XML标签`,pattern:`<([a-zA-Z][a-zA-Z0-9]*)([^>]*)>(.*?)<\\/\\1>`,flags:`gi`,category:`匹配`}];function vr(e,t,n){try{let r=new RegExp(e,t),i=[],a;if(t.includes(`g`))for(;(a=r.exec(n))!==null;)i.push({match:a[0],index:a.index,groups:a.slice(1)});else a=r.exec(n),a&&i.push({match:a[0],index:a.index,groups:a.slice(1)});return{input:n,matches:i,isValid:!0}}catch(e){return{input:n,matches:[],isValid:!1,error:e instanceof Error?e.message:`未知错误`}}}function yr(e){try{return new RegExp(e),{isValid:!0}}catch(e){return{isValid:!1,error:e instanceof Error?e.message:`未知错误`}}}var{Content:br,Sider:xr}=y,Sr=()=>{let[e,t]=(0,M.useState)(`^\\d+$`),[n,i]=(0,M.useState)(`g`),[a,o]=(0,M.useState)(`123
456
abc
789`),[s,c]=(0,M.useState)(null),[l,u]=(0,M.useState)(),[d,f]=(0,M.useState)(null),[p,m]=(0,M.useState)(!1);(0,M.useEffect)(()=>{let t=yr(e);u(t.isValid?void 0:t.error),t.isValid&&a?c(vr(e,n,a)):c(null)},[e,n,a]),(0,M.useEffect)(()=>{localStorage.getItem(`regexSandbox_visited`)||m(!0)},[]);let h=e=>{t(e),f(null)},g=e=>{i(e)},_=e=>{o(e)},v=e=>{t(e.pattern),i(e.flags),f(e)};return(0,N.jsxs)(y,{className:`regex-sandbox`,children:[(0,N.jsx)(Mt,{title:`正则表达式沙盒`}),(0,N.jsx)(br,{className:`regex-sandbox__content`,children:(0,N.jsxs)(y,{className:`regex-sandbox__three-column`,children:[(0,N.jsx)(xr,{width:400,className:`regex-sandbox__left-panel`,children:(0,N.jsx)(ir,{presets:_r,onPresetSelect:v,selectedPreset:d})}),(0,N.jsxs)(br,{className:`regex-sandbox__middle-panel`,children:[(0,N.jsx)($n,{pattern:e,flags:n,onPatternChange:h,onFlagsChange:g,error:l,presets:_r.slice(0,10),onPresetSelect:v}),(0,N.jsx)(tr,{testString:a,onTestStringChange:_,testResult:s})]}),(0,N.jsx)(xr,{width:400,className:`regex-sandbox__right-panel`,children:(0,N.jsx)(Ce,{defaultActiveKey:`visualizer`,items:[{key:`visualizer`,label:(0,N.jsxs)(`span`,{children:[(0,N.jsx)(r,{}),`可视化`]}),children:(0,N.jsx)(mr,{pattern:e,flags:n,testString:a,selectedPreset:d})},{key:`examples`,label:(0,N.jsxs)(`span`,{children:[(0,N.jsx)(ie,{}),`用例引导`]}),children:(0,N.jsx)(dr,{})},{key:`cheatsheet`,label:(0,N.jsxs)(`span`,{children:[(0,N.jsx)(Pe,{}),`语法备忘`]}),children:(0,N.jsx)(cr,{})}],className:`regex-sandbox__tabs`})})]})}),(0,N.jsx)(gr,{visible:p,onClose:()=>{m(!1),localStorage.setItem(`regexSandbox_visited`,`true`)}})]})};const Y={PAGE:`page`,SECTION:`section`,CONTAINER:`container`,GRID:`grid`,FLEX:`flex`,STACK:`stack`,DIV:`div`,SPAN:`span`,TEXT:`text`,HEADING:`heading`,BUTTON:`button`,INPUT:`input`,FORM:`form`,SELECT:`select`,CHECKBOX:`checkbox`,IMAGE:`image`,VIDEO:`video`,ICON:`icon`,CUSTOM:`custom`},Cr={BLOCK:`block`,INLINE:`inline`,FLEX:`flex`,GRID:`grid`,ABSOLUTE:`absolute`},X={EDIT:`edit`,PREVIEW:`preview`,LIVE:`live`},wr=[{id:`section`,name:`区块`,type:Y.SECTION,icon:`📦`,category:`布局`,description:`内容区块容器`,defaultProps:{layout:{type:`block`,display:`block`},style:{width:`100%`,minHeight:`200px`,height:`auto`,padding:`20px`,backgroundColor:`#f8f9fa`,marginBottom:`20px`},constraints:{canDelete:!0,canDuplicate:!0,canResize:!0,allowedChildren:[Y.CONTAINER,Y.DIV,Y.TEXT,Y.HEADING]}}},{id:`container`,name:`容器`,type:Y.CONTAINER,icon:`📁`,category:`布局`,description:`通用容器`,defaultProps:{layout:{type:`block`,display:`block`},style:{width:`100%`,minHeight:`200px`,height:`auto`,padding:`16px`,backgroundColor:`#ffffff`,border:`1px solid #e9ecef`,borderRadius:`8px`,marginBottom:`16px`},constraints:{canDelete:!0,canDuplicate:!0,canResize:!0,allowedChildren:[Y.DIV,Y.TEXT,Y.BUTTON,Y.IMAGE]}}},{id:`flex`,name:`弹性布局`,type:Y.FLEX,icon:`📐`,category:`布局`,description:`Flexbox布局容器`,defaultProps:{layout:{type:`flex`,display:`flex`,flexDirection:`row`,flexWrap:`nowrap`},style:{width:`100%`,minHeight:`200px`,height:`auto`,padding:`16px`,backgroundColor:`#f8f9fa`,gap:`10px`,marginBottom:`16px`},constraints:{canDelete:!0,canDuplicate:!0,canResize:!0,allowedChildren:[Y.DIV,Y.TEXT,Y.BUTTON]}}},{id:`grid`,name:`网格布局`,type:Y.GRID,icon:`🔲`,category:`布局`,description:`CSS Grid布局容器`,defaultProps:{layout:{type:`grid`,display:`grid`,gridTemplateColumns:`repeat(3, 1fr)`,gridTemplateRows:`auto`},style:{width:`100%`,minHeight:`200px`,height:`auto`,padding:`16px`,backgroundColor:`#f8f9fa`,gap:`10px`,marginBottom:`16px`},constraints:{canDelete:!0,canDuplicate:!0,canResize:!0,allowedChildren:[Y.DIV,Y.TEXT,Y.IMAGE]}}},{id:`div`,name:`Div`,type:Y.DIV,icon:`🧱`,category:`基础`,description:`通用块级元素`,defaultProps:{layout:{type:`block`,display:`block`},style:{width:`100%`,minHeight:`100px`,height:`auto`,backgroundColor:`#e9ecef`,border:`1px solid #dee2e6`,borderRadius:`4px`,marginBottom:`10px`},constraints:{canDelete:!0,canDuplicate:!0,canResize:!0,allowedChildren:[Y.TEXT,Y.IMAGE,Y.BUTTON]}}},{id:`text`,name:`文本`,type:Y.TEXT,icon:`📝`,category:`基础`,description:`文本内容`,defaultProps:{layout:{type:`inline`,display:`inline-block`},style:{fontSize:`14px`,color:`#333333`,lineHeight:`1.5`},content:{text:`示例文本`},constraints:{canDelete:!0,canDuplicate:!0,canResize:!0,allowedChildren:[]}}},{id:`heading`,name:`标题`,type:Y.HEADING,icon:`📋`,category:`基础`,description:`标题文本`,defaultProps:{layout:{type:`block`,display:`block`},style:{fontSize:`24px`,fontWeight:`bold`,color:`#333333`,margin:`0 0 16px 0`},content:{text:`标题`},constraints:{canDelete:!0,canDuplicate:!0,canResize:!0,allowedChildren:[]}}},{id:`button`,name:`按钮`,type:Y.BUTTON,icon:`🔘`,category:`表单`,description:`交互按钮`,defaultProps:{layout:{type:`inline`,display:`inline-block`},style:{padding:`8px 16px`,backgroundColor:`#007bff`,color:`#ffffff`,border:`none`,borderRadius:`4px`,cursor:`pointer`},content:{text:`按钮`},constraints:{canDelete:!0,canDuplicate:!0,canResize:!0,allowedChildren:[]}}},{id:`input`,name:`输入框`,type:Y.INPUT,icon:`📱`,category:`表单`,description:`文本输入框`,defaultProps:{layout:{type:`inline`,display:`inline-block`},style:{width:`200px`,padding:`8px 12px`,border:`1px solid #ced4da`,borderRadius:`4px`,fontSize:`14px`},constraints:{canDelete:!0,canDuplicate:!0,canResize:!0,allowedChildren:[]}}},{id:`image`,name:`图片`,type:Y.IMAGE,icon:`🖼️`,category:`媒体`,description:`图片展示`,defaultProps:{layout:{type:`inline`,display:`inline-block`,position:`absolute`},style:{width:`200px`,height:`150px`,backgroundColor:`#f8f9fa`,border:`1px dashed #dee2e6`,borderRadius:`4px`},content:{src:`https://via.placeholder.com/200x150`},constraints:{canDelete:!0,canDuplicate:!0,canResize:!0,allowedChildren:[]}}}],Tr=()=>({layout:wr.filter(e=>e.category===`布局`),basic:wr.filter(e=>e.category===`基础`),form:wr.filter(e=>e.category===`表单`),media:wr.filter(e=>e.category===`媒体`)});var{Search:Er}=j,{Text:Dr}=b,Or=({component:e})=>{let[{isDragging:t},n]=Be(()=>({type:`component`,item:()=>(console.log(`开始拖拽组件: ${e.name} (${e.type})`),{type:`component`,id:e.id,componentType:e.type,name:e.name,icon:e.icon}),collect:e=>({isDragging:e.isDragging()}),end:(t,n)=>{n.didDrop()?console.log(`组件 ${e.name} 成功放置`):console.log(`组件 ${e.name} 拖拽取消`)}}));return(0,N.jsxs)(`div`,{ref:n,className:`draggable-component ${t?`dragging`:``}`,title:e.description,children:[(0,N.jsx)(`span`,{className:`component-icon`,children:e.icon}),(0,N.jsx)(`span`,{className:`component-name`,children:e.name})]})},kr=()=>{let[e,t]=(0,M.useState)(`layout`),[n,r]=(0,M.useState)(``),i=Tr(),a=Object.entries(i).map(([e,t])=>{let r={layout:`📐 布局`,basic:`🧱 基础`,form:`📋 表单`,media:`🖼️ 媒体`}[e]||e,i=t.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())||e.description.toLowerCase().includes(n.toLowerCase()));return{key:e,label:`${r} (${t.length})`,children:(0,N.jsx)(`div`,{className:`component-list-content`,children:i.length>0?(0,N.jsx)(f,{orientation:`vertical`,style:{width:`100%`},size:`small`,children:i.map(e=>(0,N.jsx)(Or,{component:e},e.id))}):(0,N.jsx)(A,{image:A.PRESENTED_IMAGE_SIMPLE,description:n?`没有找到匹配的组件`:`该分类暂无组件`})})}});return(0,N.jsxs)(`div`,{className:`component-panel`,children:[(0,N.jsx)(`div`,{className:`search-section`,children:(0,N.jsx)(Er,{placeholder:`搜索组件...`,allowClear:!0,prefix:(0,N.jsx)(le,{}),value:n,onChange:e=>r(e.target.value),style:{marginBottom:16}})}),(0,N.jsx)(Ce,{activeKey:e,onChange:t,items:a,size:`small`,style:{height:`calc(100% - 60px)`},tabPlacement:`top`,tabBarGutter:8}),(0,N.jsx)(`div`,{className:`panel-footer`,children:(0,N.jsx)(Dr,{type:`secondary`,style:{fontSize:`12px`},children:`拖拽组件到画布`})})]})},Ar=(e,t,n)=>{let r=wr.find(t=>t.type===e)?.defaultProps||{},i={type:Cr.BLOCK,display:`block`,position:`relative`,...r.layout};return{id:t,type:e,name:n,layout:i,style:{...i.position===`absolute`||i.position===`fixed`?{position:`absolute`,left:0,top:0}:{},...r.style},content:{text:``,html:``,children:[],...r.content},events:{},dataBinding:{type:`static`},meta:{createdAt:new Date,updatedAt:new Date,creator:`user`,tags:[],version:1},constraints:{canDelete:!0,canDuplicate:!0,canResize:!0,allowedChildren:[],...r.constraints}}},jr=()=>({nodes:{},selectedNodeId:null,hoveredNodeId:null,dragTargetNodeId:null,zoom:1,gridVisible:!0,alignmentGuidesVisible:!0,previewMode:X.EDIT,previewDevice:`desktop`,previewScale:1});const Z=Ke((e,t)=>({...jr(),addNode:(n,r,i,a)=>{console.log(`开始添加节点:`,{type:n,x:r,y:i,parentId:a});let o=`node-${Date.now()}-${Math.floor(Math.random()*1e3)}`,s=`${n}-${Object.keys(t().nodes).length}`;e(e=>{console.log(`当前节点数量:`,Object.keys(e.nodes).length);let t=Ar(n,o,s);t.layout.position===`absolute`||t.layout.position===`fixed`?(t.style.left=`${r}px`,t.style.top=`${i}px`):(delete t.style.left,delete t.style.top);let c={...e.nodes};if(a&&c[a]){let e=c[a],n=e.content.children||[];(e.layout.position===`static`||e.layout.position===`relative`)&&(delete t.style.left,delete t.style.top,delete t.style.position,t.style.width=`100%`,t.style.marginBottom=`10px`),c[a]={...e,content:{...e.content,children:[...n,o]}}}return c[o]=t,console.log(`节点添加完成，新节点ID:`,o,`总节点数:`,Object.keys(c).length),{nodes:c,selectedNodeId:o}})},updateNode:(t,n)=>{e(e=>{let r=e.nodes[t];if(!r)return e;let i={...e.nodes};return i[t]={...r,...n,meta:{...r.meta,updatedAt:new Date,version:r.meta.version+1}},{nodes:i}})},deleteNode:t=>{e(e=>{let n=e.nodes[t];if(!n||!n.constraints.canDelete)return e;let r={...e.nodes},i=e=>{let t=r[e];t?.content.children&&t.content.children.forEach(e=>i(e)),delete r[e]};return i(t),Object.values(r).forEach(e=>{e.content.children?.includes(t)&&(e.content.children=e.content.children.filter(e=>e!==t))}),{nodes:r,selectedNodeId:e.selectedNodeId===t?null:e.selectedNodeId}})},duplicateNode:t=>{e(e=>{let n=e.nodes[t];if(!n||!n.constraints.canDuplicate)return e;let r=`node-${Date.now()}-${Math.floor(Math.random()*1e3)}`,i={...n,id:r,name:`${n.name}-copy`,style:{...n.style,left:n.style.left+20,top:n.style.top+20},meta:{...n.meta,createdAt:new Date,updatedAt:new Date,version:1}};return{nodes:{...e.nodes,[r]:i},selectedNodeId:r}})},selectNode:t=>{e({selectedNodeId:t})},hoverNode:t=>{console.log(`悬停节点:`,t),e({hoveredNodeId:t})},setDragTargetNodeId:t=>{console.log(`拖拽目标节点:`,t),e({dragTargetNodeId:t})},setZoom:t=>{e({zoom:Math.max(.1,Math.min(3,t))})},toggleGrid:()=>{e(e=>({gridVisible:!e.gridVisible}))},toggleAlignmentGuides:()=>{e(e=>({alignmentGuidesVisible:!e.alignmentGuidesVisible}))},setDragItem:e=>{console.log(`Drag item:`,e)},resetCanvas:()=>{e(jr())},setPreviewMode:t=>{e({previewMode:t})},setPreviewDevice:t=>{e({previewDevice:t})},setPreviewScale:t=>{e({previewScale:Math.max(.1,Math.min(2,t))})},togglePreview:()=>{e(e=>({previewMode:e.previewMode===X.EDIT?X.PREVIEW:X.EDIT}))}})),Mr=(e,t,n={})=>{let{enableDebounce:r=!0,debounceDelay:i=16,enableBoundaryCheck:a=!0}=n,{nodes:o,hoveredNodeId:s,dragTargetNodeId:c,addNode:l,selectNode:u,hoverNode:d,setDragTargetNodeId:f,updateNode:p}=Z(),[m,h]=(0,M.useState)(!1),[g,_]=(0,M.useState)({x:0,y:0}),[v,y]=(0,M.useState)(null),b=(0,M.useRef)(0),x=(0,M.useRef)(null),S=(0,M.useCallback)((e,t)=>(...n)=>{x.current&&clearTimeout(x.current),x.current=setTimeout(()=>e(...n),t)},[]),ee=(0,M.useCallback)((n,r,i,o)=>{if(!a||!e.current)return{left:n,top:r};let s=e.current.clientWidth/t,c=e.current.clientHeight/t;return{left:Math.max(0,Math.min(n,s-i)),top:Math.max(0,Math.min(r,c-o))}},[a,e,t]),C=(0,M.useCallback)((t,n,a)=>{let o=Date.now();if(r&&o-b.current<i)return s;b.current=o;let c=(t,n,r,i)=>{let a=i[t];if(!a)return null;let o=document.querySelector(`[data-node-id="${t}"]`);if(o){let s=o.getBoundingClientRect(),l=e.current?.getBoundingClientRect();if(l){let o=s.left-l.left+(e.current?.scrollLeft||0),u=s.top-l.top+(e.current?.scrollTop||0),d=s.width,f=s.height;if(n>=o&&n<=o+d&&r>=u&&r<=u+f){if(a.content.children&&a.content.children.length>0)for(let e of a.content.children){let t=c(e,n,r,i);if(t)return t}return t}}}else{let o=0,s=0,l=100,u=100;if(a.layout.position===`static`||a.layout.position===`relative`){if(a.style.width)if(typeof a.style.width==`string`&&a.style.width.includes(`%`)){let t=e.current?.clientWidth||722;l=parseFloat(a.style.width)/100*t}else l=parseFloat(String(a.style.width));if(a.style.height)if(typeof a.style.height==`string`&&a.style.height===`auto`)switch(a.type){case Y.SECTION:u=300;break;case Y.CONTAINER:u=200;break;default:u=100}else if(typeof a.style.height==`string`&&a.style.height.includes(`%`)){let t=e.current?.clientHeight||769;u=parseFloat(a.style.height)/100*t}else u=parseFloat(String(a.style.height));let n=0,r=Object.keys(i).filter(e=>!Object.values(i).some(t=>t.content.children&&t.content.children.includes(e)));for(let a of r){if(a===t)break;let r=i[a];if(r.layout.position===`static`||r.layout.position===`relative`){let t=100;if(r.style.height)if(typeof r.style.height==`string`&&r.style.height===`auto`)switch(r.type){case Y.SECTION:t=300;break;case Y.CONTAINER:t=200;break;default:t=100}else if(typeof r.style.height==`string`&&r.style.height.includes(`%`)){let n=e.current?.clientHeight||769;t=parseFloat(r.style.height)/100*n}else t=parseFloat(String(r.style.height));n+=t+20}}s=n}else{if(o=a.style.left?parseFloat(String(a.style.left)):0,s=a.style.top?parseFloat(String(a.style.top)):0,a.style.width)if(typeof a.style.width==`string`&&a.style.width.includes(`%`)){let t=e.current?.clientWidth||722;l=parseFloat(a.style.width)/100*t}else l=parseFloat(String(a.style.width));if(a.style.height)if(typeof a.style.height==`string`&&a.style.height===`auto`)u=200;else if(typeof a.style.height==`string`&&a.style.height.includes(`%`)){let t=e.current?.clientHeight||769;u=parseFloat(a.style.height)/100*t}else u=parseFloat(String(a.style.height))}let d={left:o,top:s,width:l,height:u};if(n>=d.left&&n<=d.left+d.width&&r>=d.top&&r<=d.top+d.height){if(a.content.children&&a.content.children.length>0)for(let e of a.content.children){let t=c(e,n,r,i);if(t)return t}return t}}return null},l=Object.keys(a).filter(e=>!Object.values(a).some(t=>t.content.children&&t.content.children.includes(e)));for(let e of l){let r=c(e,t,n,a);if(r)return r}return null},[e,r,i,s]),[{isOver:te,canDrop:ne},re]=We(()=>({accept:`component`,drop:(n,r)=>{if(!e.current){console.warn(`Canvas ref not available for drop operation`);return}let i=r.getSourceClientOffset();if(i&&e.current){let r=e.current.getBoundingClientRect(),a=(i.x-r.left)/t,c=(i.y-r.top)/t;if(n.componentType){let e;s&&o&&o[s]&&(o[s].constraints.allowedChildren||[]).includes(n.componentType)&&(e=s);try{l(n.componentType,a,c,e)}catch(e){console.error(`Failed to add node:`,e)}}}},hover:r?S((n,r)=>{let i=r.getClientOffset();if(!i||!e.current){d(null),f(null);return}let a=e.current.getBoundingClientRect(),c=C((i.x-a.left)/t,(i.y-a.top)/t,o);c!==s&&d(c),c&&n.componentType&&o&&o[c]&&(o[c].constraints.allowedChildren||[]).includes(n.componentType)?f(c):f(null)},i):(n,r)=>{let i=r.getClientOffset();if(!i||!e.current){d(null),f(null);return}let a=e.current.getBoundingClientRect(),c=C((i.x-a.left)/t,(i.y-a.top)/t,o);c!==s&&d(c),c&&n.componentType&&o&&o[c]?f((o[c].constraints.allowedChildren||[]).includes(n.componentType)?c:null):f(null)},collect:e=>({isOver:e.isOver(),canDrop:e.canDrop()})}),[t,o,s,l,d,f,C,r,S,i]),ie=(0,M.useCallback)((e,t)=>{if(e.stopPropagation(),!o||!o[t]){console.warn(`Node with id ${t} not found`);return}h(!0),y(t),_({x:e.clientX,y:e.clientY}),u(t)},[u,o]),ae=(0,M.useCallback)(e=>{if(!m||!v)return;let n=o&&o[v];if(!n)return;let r=(e.clientX-g.x)/t,i=(e.clientY-g.y)/t,a=ee(parseFloat(n.style.left?.toString()||`0`)+r,parseFloat(n.style.top?.toString()||`0`)+i,parseFloat(n.style.width?.toString()||`100`),parseFloat(n.style.height?.toString()||`100`));try{p(v,{style:{...n.style,left:`${a.left}px`,top:`${a.top}px`}})}catch(e){console.error(`Failed to update node position:`,e)}_({x:e.clientX,y:e.clientY})},[m,v,g,o,t,p,ee]),oe=(0,M.useCallback)(()=>{h(!1),y(null)},[]);return M.useEffect(()=>{let e=e=>{ae(e)},t=()=>{oe()};return m&&(document.addEventListener(`mousemove`,e),document.addEventListener(`mouseup`,t)),()=>{document.removeEventListener(`mousemove`,e),document.removeEventListener(`mouseup`,t),x.current&&clearTimeout(x.current)}},[m,ae,oe]),{drop:re,isOver:te,canDrop:ne,dragNodeId:v,dragTargetNodeId:c,handleNodeDragStart:ie,handleNodeDragMove:ae,handleNodeDragEnd:oe,findNodeAtPosition:C}};var Nr=()=>{let e=(0,M.useRef)(null),[t,n]=(0,M.useState)(1),[r,i]=(0,M.useState)(!0),a=Mr(e,t,{enableDebounce:!0,debounceDelay:16,enableBoundaryCheck:!0,enableDragConstraints:!0}),{nodes:o,selectedNodeId:s,hoveredNodeId:c}=Z(),l=t=>{e.current=t,a.drop(t)},u=e=>{let n=o[e];if(!n)return null;let r=s===e,i=c===e,l=a.dragTargetNodeId===e,d=n.layout.position===`absolute`||n.layout.position===`fixed`,f={position:n.layout.position,left:n.style.left,top:n.style.top,width:n.style.width,height:n.style.height,backgroundColor:n.style.backgroundColor,border:n.style.border,borderRadius:n.style.borderRadius,padding:n.style.padding,margin:n.style.margin,transform:`scale(${t})`,transformOrigin:`top left`,zIndex:r?1e3:i?500:100},p;switch(n.type){case Y.SECTION:p=(0,N.jsx)(`div`,{className:`section-content`,children:`内容区块`});break;case Y.CONTAINER:p=(0,N.jsx)(`div`,{className:`container-content`,children:`容器`});break;case Y.BUTTON:p=(0,N.jsx)(`button`,{className:`button-content`,children:`按钮`});break;case Y.TEXT:p=(0,N.jsx)(`div`,{className:`text-content`,children:`文本`});break;case Y.IMAGE:p=(0,N.jsx)(`div`,{className:`image-content`,children:`图片`});break;default:p=(0,N.jsx)(`div`,{className:`unknown-content`,children:`未知组件`})}return(0,N.jsxs)(`div`,{"data-node-id":e,className:`canvas-node ${r?`selected`:``} ${i?`hovered`:``} ${a.dragNodeId===e?`dragging`:``} ${d?`draggable`:`flow-layout`} ${l?`drag-target`:``}`,style:f,onClick:t=>{t.stopPropagation();let{selectNode:n}=Z.getState();n(e)},onMouseDown:d?t=>a.handleNodeDragStart(t,e):void 0,onMouseEnter:()=>{let{hoverNode:t}=Z.getState();t(e)},onMouseLeave:()=>{let{hoverNode:e}=Z.getState();e(null)},children:[p,n.content.children&&n.content.children.length>0&&(0,N.jsx)(`div`,{className:`node-children`,children:n.content.children.map(e=>u(e))})]},e)},d=Object.values(o).filter(e=>!Object.values(o).some(t=>t.content.children&&t.content.children.includes(e.id)));return(0,N.jsxs)(`div`,{className:`canvas-area`,children:[(0,N.jsxs)(`div`,{className:`canvas-toolbar`,children:[(0,N.jsx)(`div`,{className:`toolbar-group`,children:(0,N.jsx)(`button`,{className:`toolbar-btn ${r?`active`:``}`,onClick:()=>i(!r),title:`切换网格`,children:`📐`})}),(0,N.jsxs)(`div`,{className:`toolbar-group`,children:[(0,N.jsx)(`button`,{className:`toolbar-btn`,onClick:()=>n(e=>Math.min(e+.1,3)),title:`放大`,children:`🔍+`}),(0,N.jsx)(`button`,{className:`toolbar-btn`,onClick:()=>n(e=>Math.max(e-.1,.1)),title:`缩小`,children:`🔍-`}),(0,N.jsx)(`button`,{className:`toolbar-btn`,onClick:()=>n(1),title:`重置缩放`,children:`100%`}),(0,N.jsxs)(`span`,{className:`zoom-info`,children:[`缩放: `,(t*100).toFixed(0),`%`]})]})]}),(0,N.jsxs)(`div`,{ref:e=>{l(e)},className:`canvas-container ${a.isOver?a.canDrop?`drag-over-valid`:`drag-over-invalid`:``}`,onClick:()=>{let{selectNode:e}=Z.getState();e(null)},children:[r&&(0,N.jsx)(`div`,{className:`grid-background`,style:{backgroundSize:`${20*t}px ${20*t}px`}}),d.length>0?(0,N.jsx)(`div`,{className:`node-tree`,children:d.map(e=>u(e.id))}):(0,N.jsx)(`div`,{className:`empty-canvas`,children:(0,N.jsxs)(`div`,{className:`empty-content`,children:[(0,N.jsx)(`div`,{className:`empty-icon`,children:`🎨`}),(0,N.jsx)(`h3`,{children:`拖拽组件开始设计`}),(0,N.jsx)(`p`,{children:`从左侧面板拖拽组件到画布`})]})}),a.isOver&&(0,N.jsx)(`div`,{className:`drag-hint ${a.canDrop?`valid`:`invalid`}`,children:a.canDrop?`释放以添加组件`:`无法在此处放置`})]})]})},{TextArea:Pr}=j,{Text:Q}=b,{Option:$}=O,Fr=({node:e,onUpdate:n})=>(0,N.jsx)(`div`,{className:`style-editor`,children:(0,N.jsxs)(f,{direction:`vertical`,style:{width:`100%`},size:`small`,children:[(0,N.jsxs)(E,{gutter:8,children:[(0,N.jsx)(t,{span:12,children:(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`宽度`}),(0,N.jsx)(j,{size:`small`,value:e.style.width||``,onChange:t=>n({style:{...e.style,width:t.target.value}}),placeholder:`auto`})]})}),(0,N.jsx)(t,{span:12,children:(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`高度`}),(0,N.jsx)(j,{size:`small`,value:e.style.height||``,onChange:t=>n({style:{...e.style,height:t.target.value}}),placeholder:`auto`})]})})]}),(0,N.jsxs)(E,{gutter:8,children:[(0,N.jsx)(t,{span:12,children:(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`背景颜色`}),(0,N.jsx)(ne,{size:`small`,value:e.style.backgroundColor||`#ffffff`,onChange:(t,r)=>n({style:{...e.style,backgroundColor:r}}),showText:!0})]})}),(0,N.jsx)(t,{span:12,children:(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`字体颜色`}),(0,N.jsx)(ne,{size:`small`,value:e.style.color||`#000000`,onChange:(t,r)=>n({style:{...e.style,color:r}}),showText:!0})]})})]}),(0,N.jsxs)(E,{gutter:8,children:[(0,N.jsx)(t,{span:12,children:(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`字体大小`}),(0,N.jsx)(j,{size:`small`,value:e.style.fontSize||``,onChange:t=>n({style:{...e.style,fontSize:t.target.value}}),placeholder:`14px`})]})}),(0,N.jsx)(t,{span:12,children:(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`内边距`}),(0,N.jsx)(j,{size:`small`,value:e.style.padding||``,onChange:t=>n({style:{...e.style,padding:t.target.value}}),placeholder:`0`})]})})]}),(0,N.jsxs)(E,{gutter:8,children:[(0,N.jsx)(t,{span:12,children:(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`外边距`}),(0,N.jsx)(j,{size:`small`,value:e.style.margin||``,onChange:t=>n({style:{...e.style,margin:t.target.value}}),placeholder:`0`})]})}),(0,N.jsx)(t,{span:12,children:(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`圆角`}),(0,N.jsx)(j,{size:`small`,value:e.style.borderRadius||``,onChange:t=>n({style:{...e.style,borderRadius:t.target.value}}),placeholder:`0`})]})})]}),(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`边框`}),(0,N.jsx)(j,{size:`small`,value:e.style.border||``,onChange:t=>n({style:{...e.style,border:t.target.value}}),placeholder:`1px solid #ccc`})]})]})}),Ir=({node:e,onUpdate:t})=>(0,N.jsx)(`div`,{className:`layout-editor`,children:(0,N.jsxs)(f,{direction:`vertical`,style:{width:`100%`},size:`small`,children:[(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`显示类型`}),(0,N.jsxs)(O,{size:`small`,value:e.layout.display,onChange:n=>t({layout:{...e.layout,display:n}}),style:{width:`100%`},children:[(0,N.jsx)($,{value:`block`,children:`块级 (block)`}),(0,N.jsx)($,{value:`inline`,children:`行内 (inline)`}),(0,N.jsx)($,{value:`inline-block`,children:`行内块 (inline-block)`}),(0,N.jsx)($,{value:`flex`,children:`弹性 (flex)`}),(0,N.jsx)($,{value:`grid`,children:`网格 (grid)`}),(0,N.jsx)($,{value:`none`,children:`隐藏 (none)`})]})]}),(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`定位方式`}),(0,N.jsxs)(O,{size:`small`,value:e.layout.position||`static`,onChange:n=>t({layout:{...e.layout,position:n}}),style:{width:`100%`},children:[(0,N.jsx)($,{value:`static`,children:`静态 (static)`}),(0,N.jsx)($,{value:`relative`,children:`相对 (relative)`}),(0,N.jsx)($,{value:`absolute`,children:`绝对 (absolute)`}),(0,N.jsx)($,{value:`fixed`,children:`固定 (fixed)`}),(0,N.jsx)($,{value:`sticky`,children:`粘性 (sticky)`})]})]}),e.layout.display===`flex`&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(v,{style:{margin:`8px 0`,fontSize:`12px`},children:`弹性布局`}),(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`主轴方向`}),(0,N.jsxs)(O,{size:`small`,value:e.layout.flexDirection||`row`,onChange:n=>t({layout:{...e.layout,flexDirection:n}}),style:{width:`100%`},children:[(0,N.jsx)($,{value:`row`,children:`水平 (row)`}),(0,N.jsx)($,{value:`column`,children:`垂直 (column)`}),(0,N.jsx)($,{value:`row-reverse`,children:`水平反向 (row-reverse)`}),(0,N.jsx)($,{value:`column-reverse`,children:`垂直反向 (column-reverse)`})]})]}),(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`换行方式`}),(0,N.jsxs)(O,{size:`small`,value:e.layout.flexWrap||`nowrap`,onChange:n=>t({layout:{...e.layout,flexWrap:n}}),style:{width:`100%`},children:[(0,N.jsx)($,{value:`nowrap`,children:`不换行 (nowrap)`}),(0,N.jsx)($,{value:`wrap`,children:`换行 (wrap)`}),(0,N.jsx)($,{value:`wrap-reverse`,children:`反向换行 (wrap-reverse)`})]})]})]}),e.layout.display===`grid`&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(v,{style:{margin:`8px 0`,fontSize:`12px`},children:`网格布局`}),(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`列模板`}),(0,N.jsx)(j,{size:`small`,value:e.layout.gridTemplateColumns||``,onChange:n=>t({layout:{...e.layout,gridTemplateColumns:n.target.value}}),placeholder:`repeat(3, 1fr)`})]}),(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`行模板`}),(0,N.jsx)(j,{size:`small`,value:e.layout.gridTemplateRows||``,onChange:n=>t({layout:{...e.layout,gridTemplateRows:n.target.value}}),placeholder:`auto`})]})]})]})}),Lr=({node:e,onUpdate:t})=>(0,N.jsx)(`div`,{className:`content-editor`,children:(0,N.jsxs)(f,{direction:`vertical`,style:{width:`100%`},size:`small`,children:[(e.type===Y.TEXT||e.type===Y.HEADING)&&(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:e.type===Y.TEXT?`文本内容`:`标题内容`}),(0,N.jsx)(Pr,{rows:3,value:e.content.text||``,onChange:n=>t({content:{...e.content,text:n.target.value}}),placeholder:e.type===Y.TEXT?`输入文本内容`:`输入标题内容`})]}),e.type===Y.BUTTON&&(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`按钮文本`}),(0,N.jsx)(j,{size:`small`,value:e.content.text||``,onChange:n=>t({content:{...e.content,text:n.target.value}}),placeholder:`按钮`})]}),e.type===Y.IMAGE&&(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`图片地址`}),(0,N.jsx)(j,{size:`small`,value:e.content.src||``,onChange:n=>t({content:{...e.content,src:n.target.value}}),placeholder:`https://example.com/image.jpg`})]})]})}),Rr=({node:e,onUpdate:t})=>(0,N.jsx)(`div`,{className:`interaction-editor`,children:(0,N.jsxs)(f,{direction:`vertical`,style:{width:`100%`},size:`small`,children:[(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`点击事件`}),(0,N.jsxs)(O,{size:`small`,value:e.events.onClick?`enabled`:`disabled`,onChange:n=>{t({events:n===`enabled`?{...e.events,onClick:()=>console.log(`点击事件`)}:{...e.events,onClick:void 0}})},style:{width:`100%`},children:[(0,N.jsx)($,{value:`disabled`,children:`禁用`}),(0,N.jsx)($,{value:`enabled`,children:`启用`})]})]}),(0,N.jsxs)(`div`,{className:`property-group`,children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`12px`},children:`悬停事件`}),(0,N.jsxs)(O,{size:`small`,value:e.events.onHover?`enabled`:`disabled`,onChange:n=>{t({events:n===`enabled`?{...e.events,onHover:()=>console.log(`悬停事件`)}:{...e.events,onHover:void 0}})},style:{width:`100%`},children:[(0,N.jsx)($,{value:`disabled`,children:`禁用`}),(0,N.jsx)($,{value:`enabled`,children:`启用`})]})]})]})}),zr=()=>{let{nodes:e,selectedNodeId:t,updateNode:n,deleteNode:r}=Z(),i=t?e[t]:null;if(!i)return(0,N.jsx)(`div`,{className:`property-panel`,children:(0,N.jsx)(A,{image:A.PRESENTED_IMAGE_SIMPLE,description:(0,N.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,N.jsx)(`div`,{style:{fontSize:`32px`,marginBottom:`8px`},children:`👆`}),(0,N.jsx)(Q,{strong:!0,style:{fontSize:`14px`},children:`选择节点以编辑属性`}),(0,N.jsx)(`br`,{}),(0,N.jsx)(Q,{type:`secondary`,style:{fontSize:`12px`},children:`点击画布上的节点开始编辑`})]})})});let a=e=>{n(i.id,e)},o=()=>{t&&r(t)},s=[{key:`style`,label:(0,N.jsxs)(`span`,{children:[(0,N.jsx)(Fe,{}),`样式`]}),children:(0,N.jsx)(Fr,{node:i,onUpdate:a})},{key:`layout`,label:(0,N.jsxs)(`span`,{children:[(0,N.jsx)(Ne,{}),`布局`]}),children:(0,N.jsx)(Ir,{node:i,onUpdate:a})},{key:`content`,label:(0,N.jsxs)(`span`,{children:[(0,N.jsx)(c,{}),`内容`]}),children:(0,N.jsx)(Lr,{node:i,onUpdate:a})},{key:`interaction`,label:(0,N.jsxs)(`span`,{children:[(0,N.jsx)(_e,{}),`交互`]}),children:(0,N.jsx)(Rr,{node:i,onUpdate:a})}];return(0,N.jsxs)(`div`,{className:`property-panel`,children:[(0,N.jsx)(k,{size:`small`,style:{marginBottom:`16px`},bodyStyle:{padding:`12px`},children:(0,N.jsx)(`div`,{className:`node-info`,children:(0,N.jsxs)(f,{align:`start`,style:{width:`100%`},children:[(0,N.jsx)(`div`,{style:{fontSize:`24px`},children:{[Y.TEXT]:`📝`,[Y.HEADING]:`📋`,[Y.BUTTON]:`🔘`,[Y.IMAGE]:`🖼️`,[Y.DIV]:`🧱`,[Y.SECTION]:`📦`,[Y.CONTAINER]:`📁`,[Y.FLEX]:`📐`,[Y.GRID]:`🔲`,[Y.STACK]:`📚`,[Y.SPAN]:`🔗`,[Y.FORM]:`📝`,[Y.INPUT]:`⌨️`,[Y.SELECT]:`🔽`,[Y.CHECKBOX]:`☑️`,[Y.VIDEO]:`🎥`,[Y.ICON]:`🔣`,[Y.CUSTOM]:`🔧`}[i.type]||`📄`}),(0,N.jsxs)(`div`,{style:{flex:1},children:[(0,N.jsx)(Q,{strong:!0,style:{fontSize:`14px`,display:`block`},children:i.name}),(0,N.jsx)(Q,{type:`secondary`,style:{fontSize:`12px`},children:i.type})]}),(0,N.jsx)(x,{style:{color:`#ff4d4f`,cursor:`pointer`},onClick:o,title:`删除节点`})]})})}),(0,N.jsx)(Ce,{size:`small`,items:s,style:{height:`calc(100% - 80px)`},tabPosition:`top`})]})},Br=({nodeId:e})=>{let{nodes:t}=Z(),n=t[e];if(!n)return(0,N.jsx)(`div`,{children:`节点不存在`});let r=Object.values(t).filter(e=>n.content.children?.includes(e.id));return(()=>{let{style:e,layout:t,content:i}=n,a={...e,...t,position:t?.position||`relative`,display:t?.display||`block`,width:e?.width||`100%`,height:e?.height||`auto`,minHeight:e?.minHeight||`auto`,backgroundColor:e?.backgroundColor||`transparent`,padding:e?.padding||`0`,margin:e?.margin||`0`,border:e?.border||`none`,borderRadius:e?.borderRadius||`0`,boxShadow:e?.boxShadow||`none`};switch(n.type){case Y.SECTION:return(0,N.jsx)(`section`,{className:`preview-section`,style:a,children:r.map(e=>(0,N.jsx)(Br,{nodeId:e.id},e.id))});case Y.CONTAINER:return(0,N.jsx)(`div`,{className:`preview-container`,style:a,children:r.map(e=>(0,N.jsx)(Br,{nodeId:e.id},e.id))});case Y.DIV:return(0,N.jsx)(`div`,{className:`preview-div`,style:a,children:r.map(e=>(0,N.jsx)(Br,{nodeId:e.id},e.id))});case Y.FLEX:return(0,N.jsx)(`div`,{className:`preview-flex`,style:{...a,display:`flex`,flexDirection:t?.flexDirection||`row`,justifyContent:`flex-start`,alignItems:`stretch`,flexWrap:t?.flexWrap||`nowrap`,gap:`0`},children:r.map(e=>(0,N.jsx)(Br,{nodeId:e.id},e.id))});case Y.GRID:return(0,N.jsx)(`div`,{className:`preview-grid`,style:{...a,display:`grid`,gridTemplateColumns:t?.gridTemplateColumns||`1fr`,gridTemplateRows:t?.gridTemplateRows||`auto`,gap:`0`},children:r.map(e=>(0,N.jsx)(Br,{nodeId:e.id},e.id))});case Y.TEXT:return(0,N.jsx)(`div`,{className:`preview-text`,style:a,children:i?.text||`文本内容`});case Y.BUTTON:return(0,N.jsx)(`button`,{className:`preview-button`,style:a,children:i?.text||`按钮`});case Y.IMAGE:return(0,N.jsx)(`img`,{className:`preview-image`,src:i?.src||`/placeholder-image.jpg`,alt:`图片`,style:a});case Y.INPUT:return(0,N.jsx)(`input`,{className:`preview-input`,type:`text`,placeholder:`请输入内容`,style:a});default:return(0,N.jsx)(`div`,{className:`preview-unknown`,style:a,children:r.map(e=>(0,N.jsx)(Br,{nodeId:e.id},e.id))})}})()},Vr=Br,{Option:Hr}=O,Ur=()=>{let{previewMode:e,previewDevice:t,previewScale:n,nodes:i,setPreviewMode:a,setPreviewDevice:o,setPreviewScale:s}=Z(),c=Object.values(i).filter(e=>!Object.values(i).some(t=>t.content.children?.includes(e.id)));return(0,N.jsxs)(`div`,{className:`preview-area`,children:[(0,N.jsx)(`div`,{className:`preview-toolbar`,children:(0,N.jsxs)(f,{children:[(0,N.jsx)(w,{type:e===X.EDIT?`primary`:`default`,icon:(0,N.jsx)(Fe,{}),onClick:()=>a(X.EDIT),children:`编辑模式`}),(0,N.jsx)(w,{type:e===X.PREVIEW?`primary`:`default`,icon:(0,N.jsx)(r,{}),onClick:()=>a(X.PREVIEW),children:`预览模式`}),(0,N.jsx)(Te,{title:`桌面端`,children:(0,N.jsx)(w,{type:t===`desktop`?`primary`:`default`,icon:(0,N.jsx)(xe,{}),onClick:()=>o(`desktop`)})}),(0,N.jsx)(Te,{title:`平板端`,children:(0,N.jsx)(w,{type:t===`tablet`?`primary`:`default`,icon:(0,N.jsx)(oe,{}),onClick:()=>o(`tablet`)})}),(0,N.jsx)(Te,{title:`移动端`,children:(0,N.jsx)(w,{type:t===`mobile`?`primary`:`default`,icon:(0,N.jsx)(be,{}),onClick:()=>o(`mobile`)})}),(0,N.jsx)(Te,{title:`缩小`,children:(0,N.jsx)(w,{icon:(0,N.jsx)(ee,{}),onClick:()=>s(Math.max(.1,n-.1))})}),(0,N.jsxs)(`span`,{className:`scale-info`,children:[(n*100).toFixed(0),`%`]}),(0,N.jsx)(Te,{title:`放大`,children:(0,N.jsx)(w,{icon:(0,N.jsx)(l,{}),onClick:()=>s(Math.min(2,n+.1))})}),(0,N.jsxs)(O,{value:n,style:{width:100},onChange:s,children:[(0,N.jsx)(Hr,{value:.5,children:`50%`}),(0,N.jsx)(Hr,{value:.75,children:`75%`}),(0,N.jsx)(Hr,{value:1,children:`100%`}),(0,N.jsx)(Hr,{value:1.25,children:`125%`}),(0,N.jsx)(Hr,{value:1.5,children:`150%`}),(0,N.jsx)(Hr,{value:2,children:`200%`})]})]})}),(0,N.jsx)(`div`,{className:`preview-container ${t}`,style:{transform:`scale(${n})`},children:(()=>c.length===0?(0,N.jsx)(`div`,{className:`preview-content`,children:(0,N.jsxs)(`div`,{className:`preview-placeholder`,children:[(0,N.jsx)(`h3`,{children:`预览模式`}),(0,N.jsx)(`p`,{children:`请先在编辑模式下添加组件`})]})}):(0,N.jsx)(`div`,{className:`preview-content`,children:(0,N.jsx)(`div`,{className:`device-frame`,children:(0,N.jsx)(`div`,{className:`device-content`,children:c.map(e=>(0,N.jsx)(Vr,{nodeId:e.id},e.id))})})}))()})]})},{Content:Wr}=y,{Text:Gr}=b,Kr=()=>{let{selectedNodeId:e,nodes:t,previewMode:n,togglePreview:i}=Z(),a=()=>(0,N.jsxs)(`div`,{className:`workspace-layout`,children:[(0,N.jsx)(k,{className:`component-panel-container`,title:`组件库`,size:`small`,style:{height:`100%`},children:(0,N.jsx)(kr,{})}),(0,N.jsx)(k,{className:`canvas-area-container`,title:`画布`,size:`small`,style:{height:`100%`,overflow:`hidden`},children:(0,N.jsx)(Nr,{})}),(0,N.jsx)(k,{className:`property-panel-container`,title:`属性面板`,size:`small`,style:{height:`100%`},children:(0,N.jsx)(zr,{})})]}),o=()=>(0,N.jsx)(`div`,{className:`preview-layout`,children:(0,N.jsx)(Ur,{})}),s=(0,N.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`16px`},children:[(0,N.jsxs)(f,{children:[(0,N.jsx)(w,{type:`primary`,icon:(0,N.jsx)(je,{}),children:`保存`}),(0,N.jsx)(w,{type:n===X.EDIT?`default`:`primary`,icon:(0,N.jsx)(r,{}),onClick:i,children:n===X.EDIT?`预览`:`返回编辑`}),(0,N.jsx)(w,{icon:(0,N.jsx)(Ee,{}),children:`导出`}),(0,N.jsx)(w,{icon:(0,N.jsx)(m,{}),children:`重置`})]}),(0,N.jsxs)(Gr,{children:[`节点数: `,Object.keys(t).length,` | 选中: `,e?t[e]?.name:`无`]})]});return(0,N.jsx)(Re,{backend:He,children:(0,N.jsxs)(y,{className:`visual-page-builder`,children:[(0,N.jsx)(Mt,{title:`可视化页面构建器${n===X.EDIT?``:` - ${n===X.PREVIEW?`预览模式`:`实时模式`}`}`,extra:s}),(0,N.jsx)(Wr,{className:`builder-body`,children:n===X.EDIT?a():o()})]})})},{Title:qr,Text:Jr,Paragraph:Yr}=b;const Xr=Ve([{path:`/`,element:(0,N.jsx)(({tools:e})=>{let t=Array.from(new Set(e.map(e=>e.category)));return(0,N.jsxs)(`div`,{className:`tool-navigation`,children:[(0,N.jsxs)(`div`,{className:`tool-navigation__header`,children:[(0,N.jsx)(qr,{level:2,className:`tool-navigation__title`,children:`实用工具集`}),(0,N.jsx)(Jr,{type:`secondary`,className:`tool-navigation__description`,children:`选择一个工具开始使用`})]}),(0,N.jsx)(`div`,{className:`tool-navigation__list`,children:t.map(t=>(0,N.jsxs)(`div`,{className:`tool-navigation__category`,children:[(0,N.jsx)(qr,{level:3,className:`tool-navigation__category-title`,children:t}),(0,N.jsx)(`div`,{className:`tool-navigation__category-body`,children:e.filter(e=>e.category===t).map(e=>(0,N.jsx)(`div`,{className:`tool-navigation__category-item`,children:(0,N.jsx)(ze,{to:`/${e.id}`,className:`tool-navigation__link`,children:(0,N.jsx)(k,{hoverable:!0,className:`tool-navigation__card`,styles:{body:{padding:`24px`}},children:(0,N.jsxs)(f,{orientation:`vertical`,size:10,className:`tool-navigation__space`,children:[(0,N.jsx)(`div`,{className:`tool-navigation__icon`,children:e.icon}),(0,N.jsx)(qr,{level:4,className:`tool-navigation__tool-title`,children:e.name}),(0,N.jsx)(Yr,{type:`secondary`,ellipsis:{rows:2},className:`tool-navigation__tool-description`,children:e.description})]})})})},e.id))})]},t))})]})},{tools:[{id:`unit-converter`,name:`单位换算大全`,description:`涵盖常见和不常见单位，支持现代计量单位和古代计量单位的换算`,icon:`🔄`,category:`计算工具`,path:`/unit-converter`},{id:`habit-tracker`,name:`习惯追踪器`,description:`帮助您建立和坚持好习惯，追踪每日进度，可视化展示完成情况`,icon:`📅`,category:`生活工具`,path:`/habit-tracker`},{id:`color-calculator`,name:`颜色计算器`,description:`计算颜色搭配、对比度、色盲友好度，验证WCAG标准，模拟色盲视图，支持HEX、RGB、HSL、HSV颜色格式、颜色渐变生成实验室`,icon:`🎨`,category:`设计工具`,path:`/color-calculator`},{id:`regex-sandbox`,name:`正则表达式沙盒`,description:`强大的正则表达式编辑器、测试器和库，支持实时匹配测试、测试用例管理、常用正则表达式库，帮助您快速编写和调试正则表达式`,icon:`🔍`,category:`开发工具`,path:`/regex-sandbox`},{id:`visual-page-builder`,name:`视觉页面构建器`,description:`通过拖拽和配置生成页面的可视化编程工具，支持所见即所得的实时预览，提供丰富的组件库和样式编辑功能`,icon:`🎨`,category:`设计工具`,path:`/visual-page-builder`}]})},{path:`/unit-converter`,element:(0,N.jsx)(Ft,{})},{path:`/habit-tracker`,element:(0,N.jsx)(hn,{})},{path:`/color-calculator`,element:(0,N.jsx)(Xn,{})},{path:`/regex-sandbox`,element:(0,N.jsx)(Sr,{})},{path:`/visual-page-builder`,element:(0,N.jsx)(Kr,{})}]);function Zr(){return(0,N.jsx)(Ge,{router:Xr})}var Qr=Zr;(0,Ye.createRoot)(document.getElementById(`root`)).render((0,N.jsx)(M.StrictMode,{children:(0,N.jsx)(Qr,{})}));